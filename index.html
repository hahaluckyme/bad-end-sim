<!DOCTYPE html>
<html class="init-no-js">
<head>
<meta charset="UTF-8" />
<title>Bad End Simulator</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<!--

SugarCube (v2.7.0): A free (gratis and libre) story format, based on TiddlyWiki.

Copyright © 2013–2016 Thomas Michael Edwards <tmedwards@motoslave.net>.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.
2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

-->
<script id="script-libraries" type="text/javascript">
if(document.head&&document.addEventListener&&document.querySelector&&Object.create&&Object.freeze&&JSON){document.documentElement.className="init-loading";
/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
if("document" in self){if(!("classList" in document.createElement("_"))){(function(j){"use strict";if(!("Element" in j)){return}var a="classList",f="prototype",m=j.Element[f],b=Object,k=String[f].trim||function(){return this.replace(/^\s+|\s+$/g,"")},c=Array[f].indexOf||function(q){var p=0,o=this.length;for(;p<o;p++){if(p in this&&this[p]===q){return p}}return -1},n=function(o,p){this.name=o;this.code=DOMException[o];this.message=p},g=function(p,o){if(o===""){throw new n("SYNTAX_ERR","An invalid or illegal string was specified")}if(/\s/.test(o)){throw new n("INVALID_CHARACTER_ERR","String contains an invalid character")}return c.call(p,o)},d=function(s){var r=k.call(s.getAttribute("class")||""),q=r?r.split(/\s+/):[],p=0,o=q.length;for(;p<o;p++){this.push(q[p])}this._updateClassName=function(){s.setAttribute("class",this.toString())}},e=d[f]=[],i=function(){return new d(this)};n[f]=Error[f];e.item=function(o){return this[o]||null};e.contains=function(o){o+="";return g(this,o)!==-1};e.add=function(){var s=arguments,r=0,p=s.length,q,o=false;do{q=s[r]+"";if(g(this,q)===-1){this.push(q);o=true}}while(++r<p);if(o){this._updateClassName()}};e.remove=function(){var t=arguments,s=0,p=t.length,r,o=false,q;do{r=t[s]+"";q=g(this,r);while(q!==-1){this.splice(q,1);o=true;q=g(this,r)}}while(++s<p);if(o){this._updateClassName()}};e.toggle=function(p,q){p+="";var o=this.contains(p),r=o?q!==true&&"remove":q!==false&&"add";if(r){this[r](p)}if(q===true||q===false){return q}else{return !o}};e.toString=function(){return this.join(" ")};if(b.defineProperty){var l={get:i,enumerable:true,configurable:true};try{b.defineProperty(m,a,l)}catch(h){if(h.number===-2146823252){l.enumerable=false;b.defineProperty(m,a,l)}}}else{if(b[f].__defineGetter__){m.__defineGetter__(a,i)}}}(self))}else{(function(){var b=document.createElement("_");b.classList.add("c1","c2");if(!b.classList.contains("c2")){var c=function(e){var d=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(h){var g,f=arguments.length;for(g=0;g<f;g++){h=arguments[g];d.call(this,h)}}};c("add");c("remove")}b.classList.toggle("c3",false);if(b.classList.contains("c3")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(d,e){if(1 in arguments&&!this.contains(d)===!e){return e}else{return a.call(this,d)}}}b=null}())}};
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2015 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/v4.5.6/LICENSE
 */
(function(t,r){"use strict";if(typeof define==="function"&&define.amd){define(r)}else if(typeof exports==="object"){module.exports=r()}else{t.returnExports=r()}})(this,function(){var t=Array;var r=t.prototype;var e=Object;var n=e.prototype;var i=Function;var a=i.prototype;var o=String;var f=o.prototype;var u=Number;var l=u.prototype;var s=r.slice;var c=r.splice;var v=r.push;var h=r.unshift;var p=r.concat;var y=r.join;var d=a.call;var g=a.apply;var w=Math.max;var b=Math.min;var T=n.toString;var m=typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol";var D;var x=Function.prototype.toString,S=/\s*class /,O=function isES6ClassFn(t){try{var r=x.call(t);var e=r.replace(/\/\/.*\n/g,"");var n=e.replace(/\/\*[.\s\S]*\*\//g,"");var i=n.replace(/\n/gm," ").replace(/ {2}/g," ");return S.test(i)}catch(a){return false}},E=function tryFunctionObject(t){try{if(O(t)){return false}x.call(t);return true}catch(r){return false}},j="[object Function]",I="[object GeneratorFunction]",D=function isCallable(t){if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}if(m){return E(t)}if(O(t)){return false}var r=T.call(t);return r===j||r===I};var M;var U=RegExp.prototype.exec,F=function tryRegexExec(t){try{U.call(t);return true}catch(r){return false}},N="[object RegExp]";M=function isRegex(t){if(typeof t!=="object"){return false}return m?F(t):T.call(t)===N};var C;var k=String.prototype.valueOf,R=function tryStringObject(t){try{k.call(t);return true}catch(r){return false}},A="[object String]";C=function isString(t){if(typeof t==="string"){return true}if(typeof t!=="object"){return false}return m?R(t):T.call(t)===A};var P=e.defineProperty&&function(){try{var t={};e.defineProperty(t,"x",{enumerable:false,value:t});for(var r in t){return false}return t.x===t}catch(n){return false}}();var $=function(t){var r;if(P){r=function(t,r,n,i){if(!i&&r in t){return}e.defineProperty(t,r,{configurable:true,enumerable:false,writable:true,value:n})}}else{r=function(t,r,e,n){if(!n&&r in t){return}t[r]=e}}return function defineProperties(e,n,i){for(var a in n){if(t.call(n,a)){r(e,a,n[a],i)}}}}(n.hasOwnProperty);var J=function isPrimitive(t){var r=typeof t;return t===null||r!=="object"&&r!=="function"};var Y=u.isNaN||function(t){return t!==t};var Z={ToInteger:function ToInteger(t){var r=+t;if(Y(r)){r=0}else if(r!==0&&r!==1/0&&r!==-(1/0)){r=(r>0||-1)*Math.floor(Math.abs(r))}return r},ToPrimitive:function ToPrimitive(t){var r,e,n;if(J(t)){return t}e=t.valueOf;if(D(e)){r=e.call(t);if(J(r)){return r}}n=t.toString;if(D(n)){r=n.call(t);if(J(r)){return r}}throw new TypeError},ToObject:function(t){if(t==null){throw new TypeError("can't convert "+t+" to object")}return e(t)},ToUint32:function ToUint32(t){return t>>>0}};var z=function Empty(){};$(a,{bind:function bind(t){var r=this;if(!D(r)){throw new TypeError("Function.prototype.bind called on incompatible "+r)}var n=s.call(arguments,1);var a;var o=function(){if(this instanceof a){var i=g.call(r,this,p.call(n,s.call(arguments)));if(e(i)===i){return i}return this}else{return g.call(r,t,p.call(n,s.call(arguments)))}};var f=w(0,r.length-n.length);var u=[];for(var l=0;l<f;l++){v.call(u,"$"+l)}a=i("binder","return function ("+y.call(u,",")+"){ return binder.apply(this, arguments); }")(o);if(r.prototype){z.prototype=r.prototype;a.prototype=new z;z.prototype=null}return a}});var G=d.bind(n.hasOwnProperty);var B=d.bind(n.toString);var H=d.bind(s);var W=g.bind(s);var L=d.bind(f.slice);var X=d.bind(f.split);var q=d.bind(f.indexOf);var K=d.bind(v);var Q=d.bind(n.propertyIsEnumerable);var V=d.bind(r.sort);var _=t.isArray||function isArray(t){return B(t)==="[object Array]"};var tt=[].unshift(0)!==1;$(r,{unshift:function(){h.apply(this,arguments);return this.length}},tt);$(t,{isArray:_});var rt=e("a");var et=rt[0]!=="a"||!(0 in rt);var nt=function properlyBoxed(t){var r=true;var e=true;var n=false;if(t){try{t.call("foo",function(t,e,n){if(typeof n!=="object"){r=false}});t.call([1],function(){"use strict";e=typeof this==="string"},"x")}catch(i){n=true}}return!!t&&!n&&r&&e};$(r,{forEach:function forEach(t){var r=Z.ToObject(this);var e=et&&C(this)?X(this,""):r;var n=-1;var i=Z.ToUint32(e.length);var a;if(arguments.length>1){a=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.forEach callback must be a function")}while(++n<i){if(n in e){if(typeof a==="undefined"){t(e[n],n,r)}else{t.call(a,e[n],n,r)}}}}},!nt(r.forEach));$(r,{map:function map(r){var e=Z.ToObject(this);var n=et&&C(this)?X(this,""):e;var i=Z.ToUint32(n.length);var a=t(i);var o;if(arguments.length>1){o=arguments[1]}if(!D(r)){throw new TypeError("Array.prototype.map callback must be a function")}for(var f=0;f<i;f++){if(f in n){if(typeof o==="undefined"){a[f]=r(n[f],f,e)}else{a[f]=r.call(o,n[f],f,e)}}}return a}},!nt(r.map));$(r,{filter:function filter(t){var r=Z.ToObject(this);var e=et&&C(this)?X(this,""):r;var n=Z.ToUint32(e.length);var i=[];var a;var o;if(arguments.length>1){o=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.filter callback must be a function")}for(var f=0;f<n;f++){if(f in e){a=e[f];if(typeof o==="undefined"?t(a,f,r):t.call(o,a,f,r)){K(i,a)}}}return i}},!nt(r.filter));$(r,{every:function every(t){var r=Z.ToObject(this);var e=et&&C(this)?X(this,""):r;var n=Z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.every callback must be a function")}for(var a=0;a<n;a++){if(a in e&&!(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return false}}return true}},!nt(r.every));$(r,{some:function some(t){var r=Z.ToObject(this);var e=et&&C(this)?X(this,""):r;var n=Z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.some callback must be a function")}for(var a=0;a<n;a++){if(a in e&&(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return true}}return false}},!nt(r.some));var it=false;if(r.reduce){it=typeof r.reduce.call("es5",function(t,r,e,n){return n})==="object"}$(r,{reduce:function reduce(t){var r=Z.ToObject(this);var e=et&&C(this)?X(this,""):r;var n=Z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduce callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduce of empty array with no initial value")}var i=0;var a;if(arguments.length>=2){a=arguments[1]}else{do{if(i in e){a=e[i++];break}if(++i>=n){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;i<n;i++){if(i in e){a=t(a,e[i],i,r)}}return a}},!it);var at=false;if(r.reduceRight){at=typeof r.reduceRight.call("es5",function(t,r,e,n){return n})==="object"}$(r,{reduceRight:function reduceRight(t){var r=Z.ToObject(this);var e=et&&C(this)?X(this,""):r;var n=Z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduceRight callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduceRight of empty array with no initial value")}var i;var a=n-1;if(arguments.length>=2){i=arguments[1]}else{do{if(a in e){i=e[a--];break}if(--a<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}if(a<0){return i}do{if(a in e){i=t(i,e[a],a,r)}}while(a--);return i}},!at);var ot=r.indexOf&&[0,1].indexOf(1,2)!==-1;$(r,{indexOf:function indexOf(t){var r=et&&C(this)?X(this,""):Z.ToObject(this);var e=Z.ToUint32(r.length);if(e===0){return-1}var n=0;if(arguments.length>1){n=Z.ToInteger(arguments[1])}n=n>=0?n:w(0,e+n);for(;n<e;n++){if(n in r&&r[n]===t){return n}}return-1}},ot);var ft=r.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;$(r,{lastIndexOf:function lastIndexOf(t){var r=et&&C(this)?X(this,""):Z.ToObject(this);var e=Z.ToUint32(r.length);if(e===0){return-1}var n=e-1;if(arguments.length>1){n=b(n,Z.ToInteger(arguments[1]))}n=n>=0?n:e-Math.abs(n);for(;n>=0;n--){if(n in r&&t===r[n]){return n}}return-1}},ft);var ut=function(){var t=[1,2];var r=t.splice();return t.length===2&&_(r)&&r.length===0}();$(r,{splice:function splice(t,r){if(arguments.length===0){return[]}else{return c.apply(this,arguments)}}},!ut);var lt=function(){var t={};r.splice.call(t,0,0,1);return t.length===1}();$(r,{splice:function splice(t,r){if(arguments.length===0){return[]}var e=arguments;this.length=w(Z.ToInteger(this.length),0);if(arguments.length>0&&typeof r!=="number"){e=H(arguments);if(e.length<2){K(e,this.length-t)}else{e[1]=Z.ToInteger(r)}}return c.apply(this,e)}},!lt);var st=function(){var r=new t(1e5);r[8]="x";r.splice(1,1);return r.indexOf("x")===7}();var ct=function(){var t=256;var r=[];r[t]="a";r.splice(t+1,0,"b");return r[t]==="a"}();$(r,{splice:function splice(t,r){var e=Z.ToObject(this);var n=[];var i=Z.ToUint32(e.length);var a=Z.ToInteger(t);var f=a<0?w(i+a,0):b(a,i);var u=b(w(Z.ToInteger(r),0),i-f);var l=0;var s;while(l<u){s=o(f+l);if(G(e,s)){n[l]=e[s]}l+=1}var c=H(arguments,2);var v=c.length;var h;if(v<u){l=f;var p=i-u;while(l<p){s=o(l+u);h=o(l+v);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l+=1}l=i;var y=i-u+v;while(l>y){delete e[l-1];l-=1}}else if(v>u){l=i-u;while(l>f){s=o(l+u-1);h=o(l+v-1);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l-=1}}l=f;for(var d=0;d<c.length;++d){e[l]=c[d];l+=1}e.length=i-u+v;return n}},!st||!ct);var vt=r.join;var ht;try{ht=Array.prototype.join.call("123",",")!=="1,2,3"}catch(pt){ht=true}if(ht){$(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return vt.call(C(this)?X(this,""):this,r)}},ht)}var yt=[1,2].join(undefined)!=="1,2";if(yt){$(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return vt.call(this,r)}},yt)}var dt=function push(t){var r=Z.ToObject(this);var e=Z.ToUint32(r.length);var n=0;while(n<arguments.length){r[e+n]=arguments[n];n+=1}r.length=e+n;return e+n};var gt=function(){var t={};var r=Array.prototype.push.call(t,undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();$(r,{push:function push(t){if(_(this)){return v.apply(this,arguments)}return dt.apply(this,arguments)}},gt);var wt=function(){var t=[];var r=t.push(undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();$(r,{push:dt},wt);$(r,{slice:function(t,r){var e=C(this)?X(this,""):this;return W(e,arguments)}},et);var bt=function(){try{[1,2].sort(null);[1,2].sort({});return true}catch(t){}return false}();var Tt=function(){try{[1,2].sort(/a/);return false}catch(t){}return true}();var mt=function(){try{[1,2].sort(undefined);return true}catch(t){}return false}();$(r,{sort:function sort(t){if(typeof t==="undefined"){return V(this)}if(!D(t)){throw new TypeError("Array.prototype.sort callback must be a function")}return V(this,t)}},bt||!mt||!Tt);var Dt=!{toString:null}.propertyIsEnumerable("toString");var xt=function(){}.propertyIsEnumerable("prototype");var St=!G("x","0");var Ot=function(t){var r=t.constructor;return r&&r.prototype===t};var Et={$window:true,$console:true,$parent:true,$self:true,$frame:true,$frames:true,$frameElement:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$external:true};var jt=function(){if(typeof window==="undefined"){return false}for(var t in window){try{if(!Et["$"+t]&&G(window,t)&&window[t]!==null&&typeof window[t]==="object"){Ot(window[t])}}catch(r){return true}}return false}();var It=function(t){if(typeof window==="undefined"||!jt){return Ot(t)}try{return Ot(t)}catch(r){return false}};var Mt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var Ut=Mt.length;var Ft=function isArguments(t){return B(t)==="[object Arguments]"};var Nt=function isArguments(t){return t!==null&&typeof t==="object"&&typeof t.length==="number"&&t.length>=0&&!_(t)&&D(t.callee)};var Ct=Ft(arguments)?Ft:Nt;$(e,{keys:function keys(t){var r=D(t);var e=Ct(t);var n=t!==null&&typeof t==="object";var i=n&&C(t);if(!n&&!r&&!e){throw new TypeError("Object.keys called on a non-object")}var a=[];var f=xt&&r;if(i&&St||e){for(var u=0;u<t.length;++u){K(a,o(u))}}if(!e){for(var l in t){if(!(f&&l==="prototype")&&G(t,l)){K(a,o(l))}}}if(Dt){var s=It(t);for(var c=0;c<Ut;c++){var v=Mt[c];if(!(s&&v==="constructor")&&G(t,v)){K(a,v)}}}return a}});var kt=e.keys&&function(){return e.keys(arguments).length===2}(1,2);var Rt=e.keys&&function(){var t=e.keys(arguments);return arguments.length!==1||t.length!==1||t[0]!==1}(1);var At=e.keys;$(e,{keys:function keys(t){if(Ct(t)){return At(H(t))}else{return At(t)}}},!kt||Rt);var Pt=new Date(-0xc782b5b342b24).getUTCMonth()!==0;var $t=new Date(-0x55d318d56a724);var Jt=new Date(14496624e5);var Yt=$t.toUTCString()!=="Mon, 01 Jan -45875 11:59:59 GMT";var Zt;var zt;var Gt=$t.getTimezoneOffset();if(Gt<-720){Zt=$t.toDateString()!=="Tue Jan 02 -45875";zt=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(Jt.toString())}else{Zt=$t.toDateString()!=="Mon Jan 01 -45875";zt=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(Jt.toString())}var Bt=d.bind(Date.prototype.getFullYear);var Ht=d.bind(Date.prototype.getMonth);var Wt=d.bind(Date.prototype.getDate);var Lt=d.bind(Date.prototype.getUTCFullYear);var Xt=d.bind(Date.prototype.getUTCMonth);var qt=d.bind(Date.prototype.getUTCDate);var Kt=d.bind(Date.prototype.getUTCDay);var Qt=d.bind(Date.prototype.getUTCHours);var Vt=d.bind(Date.prototype.getUTCMinutes);var _t=d.bind(Date.prototype.getUTCSeconds);var tr=d.bind(Date.prototype.getUTCMilliseconds);var rr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var er=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var nr=function daysInMonth(t,r){return Wt(new Date(r,t,0))};$(Date.prototype,{getFullYear:function getFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);if(t<0&&Ht(this)>11){return t+1}return t},getMonth:function getMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Ht(this);if(t<0&&r>11){return 0}return r},getDate:function getDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Ht(this);var e=Wt(this);if(t<0&&r>11){if(r===12){return e}var n=nr(0,t+1);return n-e+1}return e},getUTCFullYear:function getUTCFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Lt(this);if(t<0&&Xt(this)>11){return t+1}return t},getUTCMonth:function getUTCMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Lt(this);var r=Xt(this);if(t<0&&r>11){return 0}return r},getUTCDate:function getUTCDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Lt(this);var r=Xt(this);var e=qt(this);if(t<0&&r>11){if(r===12){return e}var n=nr(0,t+1);return n-e+1}return e}},Pt);$(Date.prototype,{toUTCString:function toUTCString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Kt(this);var r=qt(this);var e=Xt(this);var n=Lt(this);var i=Qt(this);var a=Vt(this);var o=_t(this);return rr[t]+", "+(r<10?"0"+r:r)+" "+er[e]+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"}},Pt||Yt);$(Date.prototype,{toDateString:function toDateString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();return rr[t]+" "+er[e]+" "+(r<10?"0"+r:r)+" "+n}},Pt||Zt);if(Pt||zt){Date.prototype.toString=function toString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();var i=this.getHours();var a=this.getMinutes();var o=this.getSeconds();var f=this.getTimezoneOffset();var u=Math.floor(Math.abs(f)/60);var l=Math.floor(Math.abs(f)%60);return rr[t]+" "+er[e]+" "+(r<10?"0"+r:r)+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"+(f>0?"-":"+")+(u<10?"0"+u:u)+(l<10?"0"+l:l)};if(P){e.defineProperty(Date.prototype,"toString",{configurable:true,enumerable:false,writable:true})}}var ir=-621987552e5;var ar="-000001";var or=Date.prototype.toISOString&&new Date(ir).toISOString().indexOf(ar)===-1;var fr=Date.prototype.toISOString&&new Date(-1).toISOString()!=="1969-12-31T23:59:59.999Z";var ur=d.bind(Date.prototype.getTime);$(Date.prototype,{toISOString:function toISOString(){if(!isFinite(this)||!isFinite(ur(this))){throw new RangeError("Date.prototype.toISOString called on non-finite value.")}var t=Lt(this);var r=Xt(this);t+=Math.floor(r/12);r=(r%12+12)%12;var e=[r+1,qt(this),Qt(this),Vt(this),_t(this)];t=(t<0?"-":t>9999?"+":"")+L("00000"+Math.abs(t),0<=t&&t<=9999?-4:-6);for(var n=0;n<e.length;++n){e[n]=L("00"+e[n],-2)}return t+"-"+H(e,0,2).join("-")+"T"+H(e,2).join(":")+"."+L("000"+tr(this),-3)+"Z"}},or||fr);var lr=function(){try{return Date.prototype.toJSON&&new Date(NaN).toJSON()===null&&new Date(ir).toJSON().indexOf(ar)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return true}})}catch(t){return false}}();if(!lr){Date.prototype.toJSON=function toJSON(t){var r=e(this);var n=Z.ToPrimitive(r);if(typeof n==="number"&&!isFinite(n)){return null}var i=r.toISOString;if(!D(i)){throw new TypeError("toISOString property is not callable")}return i.call(r)}}var sr=Date.parse("+033658-09-27T01:46:40.000Z")===1e15;var cr=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));var vr=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(vr||cr||!sr){var hr=Math.pow(2,31)-1;var pr=Y(new Date(1970,0,1,0,0,0,hr+1).getTime());Date=function(t){var r=function Date(e,n,i,a,f,u,l){var s=arguments.length;var c;if(this instanceof t){var v=u;var h=l;if(pr&&s>=7&&l>hr){var p=Math.floor(l/hr)*hr;var y=Math.floor(p/1e3);v+=y;h-=y*1e3}c=s===1&&o(e)===e?new t(r.parse(e)):s>=7?new t(e,n,i,a,f,v,h):s>=6?new t(e,n,i,a,f,v):s>=5?new t(e,n,i,a,f):s>=4?new t(e,n,i,a):s>=3?new t(e,n,i):s>=2?new t(e,n):s>=1?new t(e instanceof t?+e:e):new t}else{c=t.apply(this,arguments)}if(!J(c)){$(c,{constructor:r},true)}return c};var e=new RegExp("^"+"(\\d{4}|[+-]\\d{6})"+"(?:-(\\d{2})"+"(?:-(\\d{2})"+"(?:"+"T(\\d{2})"+":(\\d{2})"+"(?:"+":(\\d{2})"+"(?:(\\.\\d{1,}))?"+")?"+"("+"Z|"+"(?:"+"([-+])"+"(\\d{2})"+":(\\d{2})"+")"+")?)?)?)?"+"$");var n=[0,31,59,90,120,151,181,212,243,273,304,334,365];var i=function dayFromMonth(t,r){var e=r>1?1:0;return n[r]+Math.floor((t-1969+e)/4)-Math.floor((t-1901+e)/100)+Math.floor((t-1601+e)/400)+365*(t-1970)};var a=function toUTC(r){var e=0;var n=r;if(pr&&n>hr){var i=Math.floor(n/hr)*hr;var a=Math.floor(i/1e3);e+=a;n-=a*1e3}return u(new t(1970,0,1,0,0,e,n))};for(var f in t){if(G(t,f)){r[f]=t[f]}}$(r,{now:t.now,UTC:t.UTC},true);r.prototype=t.prototype;$(r.prototype,{constructor:r},true);var l=function parse(r){var n=e.exec(r);if(n){var o=u(n[1]),f=u(n[2]||1)-1,l=u(n[3]||1)-1,s=u(n[4]||0),c=u(n[5]||0),v=u(n[6]||0),h=Math.floor(u(n[7]||0)*1e3),p=Boolean(n[4]&&!n[8]),y=n[9]==="-"?1:-1,d=u(n[10]||0),g=u(n[11]||0),w;var b=c>0||v>0||h>0;if(s<(b?24:25)&&c<60&&v<60&&h<1e3&&f>-1&&f<12&&d<24&&g<60&&l>-1&&l<i(o,f+1)-i(o,f)){w=((i(o,f)+l)*24+s+d*y)*60;w=((w+c+g*y)*60+v)*1e3+h;if(p){w=a(w)}if(-864e13<=w&&w<=864e13){return w}}return NaN}return t.parse.apply(this,arguments)};$(r,{parse:l});return r}(Date)}if(!Date.now){Date.now=function now(){return(new Date).getTime()}}var yr=l.toFixed&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||0xde0b6b3a7640080.toFixed(0)!=="1000000000000000128");var dr={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function multiply(t,r){var e=-1;var n=r;while(++e<dr.size){n+=t*dr.data[e];dr.data[e]=n%dr.base;n=Math.floor(n/dr.base)}},divide:function divide(t){var r=dr.size;var e=0;while(--r>=0){e+=dr.data[r];dr.data[r]=Math.floor(e/t);e=e%t*dr.base}},numToString:function numToString(){var t=dr.size;var r="";while(--t>=0){if(r!==""||t===0||dr.data[t]!==0){var e=o(dr.data[t]);if(r===""){r=e}else{r+=L("0000000",0,7-e.length)+e}}}return r},pow:function pow(t,r,e){return r===0?e:r%2===1?pow(t,r-1,e*t):pow(t*t,r/2,e)},log:function log(t){var r=0;var e=t;while(e>=4096){r+=12;e/=4096}while(e>=2){r+=1;e/=2}return r}};var gr=function toFixed(t){var r,e,n,i,a,f,l,s;r=u(t);r=Y(r)?0:Math.floor(r);if(r<0||r>20){throw new RangeError("Number.toFixed called with invalid number of decimals")}e=u(this);if(Y(e)){return"NaN"}if(e<=-1e21||e>=1e21){return o(e)}n="";if(e<0){n="-";e=-e}i="0";if(e>1e-21){a=dr.log(e*dr.pow(2,69,1))-69;f=a<0?e*dr.pow(2,-a,1):e/dr.pow(2,a,1);f*=4503599627370496;a=52-a;if(a>0){dr.multiply(0,f);l=r;while(l>=7){dr.multiply(1e7,0);l-=7}dr.multiply(dr.pow(10,l,1),0);l=a-1;while(l>=23){dr.divide(1<<23);l-=23}dr.divide(1<<l);dr.multiply(1,1);dr.divide(2);i=dr.numToString()}else{dr.multiply(0,f);dr.multiply(1<<-a,0);i=dr.numToString()+L("0.00000000000000000000",2,2+r)}}if(r>0){s=i.length;if(s<=r){i=n+L("0.0000000000000000000",0,r-s+2)+i}else{i=n+L(i,0,s-r)+"."+L(i,s-r)}}else{i=n+i}return i};$(l,{toFixed:gr},yr);var wr=function(){try{return 1..toPrecision(undefined)==="1"}catch(t){return true}}();var br=l.toPrecision;$(l,{toPrecision:function toPrecision(t){return typeof t==="undefined"?br.call(this):br.call(this,t)}},wr);if("ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1){(function(){var t=typeof/()??/.exec("")[1]==="undefined";var r=Math.pow(2,32)-1;f.split=function(e,n){var i=String(this);if(typeof e==="undefined"&&n===0){return[]}if(!M(e)){return X(this,e,n)}var a=[];var o=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,u,l,s,c;var h=new RegExp(e.source,o+"g");if(!t){u=new RegExp("^"+h.source+"$(?!\\s)",o)}var p=typeof n==="undefined"?r:Z.ToUint32(n);l=h.exec(i);while(l){s=l.index+l[0].length;if(s>f){K(a,L(i,f,l.index));if(!t&&l.length>1){l[0].replace(u,function(){for(var t=1;t<arguments.length-2;t++){if(typeof arguments[t]==="undefined"){l[t]=void 0}}})}if(l.length>1&&l.index<i.length){v.apply(a,H(l,1))}c=l[0].length;f=s;if(a.length>=p){break}}if(h.lastIndex===l.index){h.lastIndex++}l=h.exec(i)}if(f===i.length){if(c||!h.test("")){K(a,"")}}else{K(a,L(i,f))}return a.length>p?H(a,0,p):a}})()}else if("0".split(void 0,0).length){f.split=function split(t,r){if(typeof t==="undefined"&&r===0){return[]}return X(this,t,r)}}var Tr=f.replace;var mr=function(){var t=[];"x".replace(/x(.)?/g,function(r,e){K(t,e)});return t.length===1&&typeof t[0]==="undefined"}();if(!mr){f.replace=function replace(t,r){var e=D(r);var n=M(t)&&/\)[*?]/.test(t.source);if(!e||!n){return Tr.call(this,t,r)}else{var i=function(e){var n=arguments.length;var i=t.lastIndex;t.lastIndex=0;var a=t.exec(e)||[];t.lastIndex=i;K(a,arguments[n-2],arguments[n-1]);return r.apply(this,a)};return Tr.call(this,t,i)}}}var Dr=f.substr;var xr="".substr&&"0b".substr(-1)!=="b";$(f,{substr:function substr(t,r){var e=t;if(t<0){e=w(this.length+t,0)}return Dr.call(this,e,r)}},xr);var Sr="	\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003"+"\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028"+"\u2029\ufeff";var Or="\u200b";var Er="["+Sr+"]";var jr=new RegExp("^"+Er+Er+"*");var Ir=new RegExp(Er+Er+"*$");var Mr=f.trim&&(Sr.trim()||!Or.trim());$(f,{trim:function trim(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}return o(this).replace(jr,"").replace(Ir,"")}},Mr);var Ur=d.bind(String.prototype.trim);var Fr=f.lastIndexOf&&"abc\u3042\u3044".lastIndexOf("\u3042\u3044",2)!==-1;$(f,{lastIndexOf:function lastIndexOf(t){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var r=o(this);var e=o(t);var n=arguments.length>1?u(arguments[1]):NaN;var i=Y(n)?Infinity:Z.ToInteger(n);var a=b(w(i,0),r.length);var f=e.length;var l=a+f;while(l>0){l=w(0,l-f);var s=q(L(r,l,a+f),e);if(s!==-1){return l+s}}return-1}},Fr);var Nr=f.lastIndexOf;$(f,{lastIndexOf:function lastIndexOf(t){return Nr.apply(this,arguments)}},f.lastIndexOf.length!==1);if(parseInt(Sr+"08")!==8||parseInt(Sr+"0x16")!==22){parseInt=function(t){var r=/^[\-+]?0[xX]/;return function parseInt(e,n){var i=Ur(e);var a=u(n)||(r.test(i)?16:10);return t(i,a)}}(parseInt)}if(1/parseFloat("-0")!==-Infinity){parseFloat=function(t){return function parseFloat(r){var e=Ur(r);var n=t(e);return n===0&&L(e,0,1)==="-"?-0:n}}(parseFloat)}if(String(new RangeError("test"))!=="RangeError: test"){var Cr=function toString(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var t=this.name;if(typeof t==="undefined"){t="Error"}else if(typeof t!=="string"){t=o(t)}var r=this.message;if(typeof r==="undefined"){r=""}else if(typeof r!=="string"){r=o(r)}if(!t){return r}if(!r){return t}return t+": "+r};Error.prototype.toString=Cr}if(P){var kr=function(t,r){if(Q(t,r)){var e=Object.getOwnPropertyDescriptor(t,r);e.enumerable=false;Object.defineProperty(t,r,e)}};kr(Error.prototype,"message");if(Error.prototype.message!==""){Error.prototype.message=""}kr(Error.prototype,"name")}if(String(/a/gim)!=="/a/gim"){var Rr=function toString(){var t="/"+this.source+"/";if(this.global){t+="g"}if(this.ignoreCase){t+="i"}if(this.multiline){t+="m"}return t};RegExp.prototype.toString=Rr}});
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.0
 * see https://github.com/paulmillr/es6-shim/blob/0.35.0/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */
(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.returnExports=t()}})(this,function(){"use strict";var e=Function.call.bind(Function.apply);var t=Function.call.bind(Function.call);var r=Array.isArray;var n=Object.keys;var o=function notThunker(t){return function notThunk(){return!e(t,this,arguments)}};var i=function(e){try{e();return false}catch(t){return true}};var a=function valueOrFalseIfThrows(e){try{return e()}catch(t){return false}};var u=o(i);var f=function(){return!i(function(){Object.defineProperty({},"x",{get:function(){}})})};var s=!!Object.defineProperty&&f();var c=function foo(){}.name==="foo";var l=Function.call.bind(Array.prototype.forEach);var p=Function.call.bind(Array.prototype.reduce);var v=Function.call.bind(Array.prototype.filter);var y=Function.call.bind(Array.prototype.some);var h=function(e,t,r,n){if(!n&&t in e){return}if(s){Object.defineProperty(e,t,{configurable:true,enumerable:false,writable:true,value:r})}else{e[t]=r}};var b=function(e,t,r){l(n(t),function(n){var o=t[n];h(e,n,o,!!r)})};var g=Function.call.bind(Object.prototype.toString);var d=typeof/abc/==="function"?function IsCallableSlow(e){return typeof e==="function"&&g(e)==="[object Function]"}:function IsCallableFast(e){return typeof e==="function"};var O={getter:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}Object.defineProperty(e,t,{configurable:true,enumerable:false,get:r})},proxy:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,{configurable:n.configurable,enumerable:n.enumerable,get:function getKey(){return e[t]},set:function setKey(r){e[t]=r}})},redefine:function(e,t,r){if(s){var n=Object.getOwnPropertyDescriptor(e,t);n.value=r;Object.defineProperty(e,t,n)}else{e[t]=r}},defineByDescriptor:function(e,t,r){if(s){Object.defineProperty(e,t,r)}else if("value"in r){e[t]=r.value}},preserveToString:function(e,t){if(t&&d(t.toString)){h(e,"toString",t.toString.bind(t),true)}}};var m=Object.create||function(e,t){var r=function Prototype(){};r.prototype=e;var o=new r;if(typeof t!=="undefined"){n(t).forEach(function(e){O.defineByDescriptor(o,e,t[e])})}return o};var w=function(e,t){if(!Object.setPrototypeOf){return false}return a(function(){var r=function Subclass(t){var r=new e(t);Object.setPrototypeOf(r,Subclass.prototype);return r};Object.setPrototypeOf(r,e);r.prototype=m(e.prototype,{constructor:{value:r}});return t(r)})};var j=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")};var S=j();var T=S.isFinite;var I=Function.call.bind(String.prototype.indexOf);var E=Function.apply.bind(Array.prototype.indexOf);var P=Function.call.bind(Array.prototype.concat);var M=Function.call.bind(Array.prototype.sort);var C=Function.call.bind(String.prototype.slice);var x=Function.call.bind(Array.prototype.push);var N=Function.apply.bind(Array.prototype.push);var A=Function.call.bind(Array.prototype.shift);var R=Math.max;var _=Math.min;var k=Math.floor;var F=Math.abs;var L=Math.log;var D=Math.sqrt;var z=Function.call.bind(Object.prototype.hasOwnProperty);var q;var G=function(){};var W=S.Symbol||{};var H=W.species||"@@species";var V=Number.isNaN||function isNaN(e){return e!==e};var B=Number.isFinite||function isFinite(e){return typeof e==="number"&&T(e)};var $=function isArguments(e){return g(e)==="[object Arguments]"};var U=function isArguments(e){return e!==null&&typeof e==="object"&&typeof e.length==="number"&&e.length>=0&&g(e)!=="[object Array]"&&g(e.callee)==="[object Function]"};var J=$(arguments)?$:U;var K={primitive:function(e){return e===null||typeof e!=="function"&&typeof e!=="object"},object:function(e){return e!==null&&typeof e==="object"},string:function(e){return g(e)==="[object String]"},regex:function(e){return g(e)==="[object RegExp]"},symbol:function(e){return typeof S.Symbol==="function"&&typeof e==="symbol"}};var X=function overrideNative(e,t,r){var n=e[t];h(e,t,r,true);O.preserveToString(e[t],n)};var Z=typeof W==="function"&&typeof W["for"]==="function"&&K.symbol(W());var Y=K.symbol(W.iterator)?W.iterator:"_es6-shim iterator_";if(S.Set&&typeof(new S.Set)["@@iterator"]==="function"){Y="@@iterator"}if(!S.Reflect){h(S,"Reflect",{},true)}var Q=S.Reflect;var ee=String;var te={Call:function Call(t,r){var n=arguments.length>2?arguments[2]:[];if(!te.IsCallable(t)){throw new TypeError(t+" is not a function")}return e(t,r,n)},RequireObjectCoercible:function(e,t){if(e==null){throw new TypeError(t||"Cannot call method on "+e)}return e},TypeIsObject:function(e){if(e===void 0||e===null||e===true||e===false){return false}return typeof e==="function"||typeof e==="object"},ToObject:function(e,t){return Object(te.RequireObjectCoercible(e,t))},IsCallable:d,IsConstructor:function(e){return te.IsCallable(e)},ToInt32:function(e){return te.ToNumber(e)>>0},ToUint32:function(e){return te.ToNumber(e)>>>0},ToNumber:function(e){if(g(e)==="[object Symbol]"){throw new TypeError("Cannot convert a Symbol value to a number")}return+e},ToInteger:function(e){var t=te.ToNumber(e);if(V(t)){return 0}if(t===0||!B(t)){return t}return(t>0?1:-1)*k(F(t))},ToLength:function(e){var t=te.ToInteger(e);if(t<=0){return 0}if(t>Number.MAX_SAFE_INTEGER){return Number.MAX_SAFE_INTEGER}return t},SameValue:function(e,t){if(e===t){if(e===0){return 1/e===1/t}return true}return V(e)&&V(t)},SameValueZero:function(e,t){return e===t||V(e)&&V(t)},IsIterable:function(e){return te.TypeIsObject(e)&&(typeof e[Y]!=="undefined"||J(e))},GetIterator:function(e){if(J(e)){return new q(e,"value")}var t=te.GetMethod(e,Y);if(!te.IsCallable(t)){throw new TypeError("value is not an iterable")}var r=te.Call(t,e);if(!te.TypeIsObject(r)){throw new TypeError("bad iterator")}return r},GetMethod:function(e,t){var r=te.ToObject(e)[t];if(r===void 0||r===null){return void 0}if(!te.IsCallable(r)){throw new TypeError("Method not callable: "+t)}return r},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var r=te.GetMethod(e,"return");if(r===void 0){return}var n,o;try{n=te.Call(r,e)}catch(i){o=i}if(t){return}if(o){throw o}if(!te.TypeIsObject(n)){throw new TypeError("Iterator's return method returned a non-object.")}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!te.TypeIsObject(t)){throw new TypeError("bad iterator")}return t},IteratorStep:function(e){var t=te.IteratorNext(e);var r=te.IteratorComplete(t);return r?false:t},Construct:function(e,t,r,n){var o=typeof r==="undefined"?e:r;if(!n&&Q.construct){return Q.construct(e,t,o)}var i=o.prototype;if(!te.TypeIsObject(i)){i=Object.prototype}var a=m(i);var u=te.Call(e,a,t);return te.TypeIsObject(u)?u:a},SpeciesConstructor:function(e,t){var r=e.constructor;if(r===void 0){return t}if(!te.TypeIsObject(r)){throw new TypeError("Bad constructor")}var n=r[H];if(n===void 0||n===null){return t}if(!te.IsConstructor(n)){throw new TypeError("Bad @@species")}return n},CreateHTML:function(e,t,r,n){var o=te.ToString(e);var i="<"+t;if(r!==""){var a=te.ToString(n);var u=a.replace(/"/g,"&quot;");i+=" "+r+'="'+u+'"'}var f=i+">";var s=f+o;return s+"</"+t+">"},IsRegExp:function IsRegExp(e){if(!te.TypeIsObject(e)){return false}var t=e[W.match];if(typeof t!=="undefined"){return!!t}return K.regex(e)},ToString:function ToString(e){return ee(e)}};if(s&&Z){var re=function defineWellKnownSymbol(e){if(K.symbol(W[e])){return W[e]}var t=W["for"]("Symbol."+e);Object.defineProperty(W,e,{configurable:false,enumerable:false,writable:false,value:t});return t};if(!K.symbol(W.search)){var ne=re("search");var oe=String.prototype.search;h(RegExp.prototype,ne,function search(e){return te.Call(oe,e,[this])});var ie=function search(e){var t=te.RequireObjectCoercible(this);if(e!==null&&typeof e!=="undefined"){var r=te.GetMethod(e,ne);if(typeof r!=="undefined"){return te.Call(r,e,[t])}}return te.Call(oe,t,[te.ToString(e)])};X(String.prototype,"search",ie)}if(!K.symbol(W.replace)){var ae=re("replace");var ue=String.prototype.replace;h(RegExp.prototype,ae,function replace(e,t){return te.Call(ue,e,[this,t])});var fe=function replace(e,t){var r=te.RequireObjectCoercible(this);if(e!==null&&typeof e!=="undefined"){var n=te.GetMethod(e,ae);if(typeof n!=="undefined"){return te.Call(n,e,[r,t])}}return te.Call(ue,r,[te.ToString(e),t])};X(String.prototype,"replace",fe)}if(!K.symbol(W.split)){var se=re("split");var ce=String.prototype.split;h(RegExp.prototype,se,function split(e,t){return te.Call(ce,e,[this,t])});var le=function split(e,t){var r=te.RequireObjectCoercible(this);if(e!==null&&typeof e!=="undefined"){var n=te.GetMethod(e,se);if(typeof n!=="undefined"){return te.Call(n,e,[r,t])}}return te.Call(ce,r,[te.ToString(e),t])};X(String.prototype,"split",le)}var pe=K.symbol(W.match);var ve=pe&&function(){var e={};e[W.match]=function(){return 42};return"a".match(e)!==42}();if(!pe||ve){var ye=re("match");var he=String.prototype.match;h(RegExp.prototype,ye,function match(e){return te.Call(he,e,[this])});var be=function match(e){var t=te.RequireObjectCoercible(this);if(e!==null&&typeof e!=="undefined"){var r=te.GetMethod(e,ye);if(typeof r!=="undefined"){return te.Call(r,e,[t])}}return te.Call(he,t,[te.ToString(e)])};X(String.prototype,"match",be)}}var ge=function wrapConstructor(e,t,r){O.preserveToString(t,e);if(Object.setPrototypeOf){Object.setPrototypeOf(e,t)}if(s){l(Object.getOwnPropertyNames(e),function(n){if(n in G||r[n]){return}O.proxy(e,n,t)})}else{l(Object.keys(e),function(n){if(n in G||r[n]){return}t[n]=e[n]})}t.prototype=e.prototype;O.redefine(e.prototype,"constructor",t)};var de=function(){return this};var Oe=function(e){if(s&&!z(e,H)){O.getter(e,H,de)}};var me=function(e,t){var r=t||function iterator(){return this};h(e,Y,r);if(!e[Y]&&K.symbol(Y)){e[Y]=r}};var we=function createDataProperty(e,t,r){if(s){Object.defineProperty(e,t,{configurable:true,enumerable:true,writable:true,value:r})}else{e[t]=r}};var je=function createDataPropertyOrThrow(e,t,r){we(e,t,r);if(!te.SameValue(e[t],r)){throw new TypeError("property is nonconfigurable")}};var Se=function(e,t,r,n){if(!te.TypeIsObject(e)){throw new TypeError("Constructor requires `new`: "+t.name)}var o=t.prototype;if(!te.TypeIsObject(o)){o=r}var i=m(o);for(var a in n){if(z(n,a)){var u=n[a];h(i,a,u,true)}}return i};if(String.fromCodePoint&&String.fromCodePoint.length!==1){var Te=String.fromCodePoint;X(String,"fromCodePoint",function fromCodePoint(e){return te.Call(Te,this,arguments)})}var Ie={fromCodePoint:function fromCodePoint(e){var t=[];var r;for(var n=0,o=arguments.length;n<o;n++){r=Number(arguments[n]);if(!te.SameValue(r,te.ToInteger(r))||r<0||r>1114111){throw new RangeError("Invalid code point "+r)}if(r<65536){x(t,String.fromCharCode(r))}else{r-=65536;x(t,String.fromCharCode((r>>10)+55296));x(t,String.fromCharCode(r%1024+56320))}}return t.join("")},raw:function raw(e){var t=te.ToObject(e,"bad callSite");var r=te.ToObject(t.raw,"bad raw value");var n=r.length;var o=te.ToLength(n);if(o<=0){return""}var i=[];var a=0;var u,f,s,c;while(a<o){u=te.ToString(a);s=te.ToString(r[u]);x(i,s);if(a+1>=o){break}f=a+1<arguments.length?arguments[a+1]:"";c=te.ToString(f);x(i,c);a+=1}return i.join("")}};if(String.raw&&String.raw({raw:{0:"x",1:"y",length:2}})!=="xy"){X(String,"raw",Ie.raw)}b(String,Ie);var Ee=function repeat(e,t){if(t<1){return""}if(t%2){return repeat(e,t-1)+e}var r=repeat(e,t/2);return r+r};var Pe=Infinity;var Me={repeat:function repeat(e){var t=te.ToString(te.RequireObjectCoercible(this));var r=te.ToInteger(e);if(r<0||r>=Pe){throw new RangeError("repeat count must be less than infinity and not overflow maximum string size")}return Ee(t,r)},startsWith:function startsWith(e){var t=te.ToString(te.RequireObjectCoercible(this));if(te.IsRegExp(e)){throw new TypeError('Cannot call method "startsWith" with a regex')}var r=te.ToString(e);var n;if(arguments.length>1){n=arguments[1]}var o=R(te.ToInteger(n),0);return C(t,o,o+r.length)===r},endsWith:function endsWith(e){var t=te.ToString(te.RequireObjectCoercible(this));if(te.IsRegExp(e)){throw new TypeError('Cannot call method "endsWith" with a regex')}var r=te.ToString(e);var n=t.length;var o;if(arguments.length>1){o=arguments[1]}var i=typeof o==="undefined"?n:te.ToInteger(o);var a=_(R(i,0),n);return C(t,a-r.length,a)===r},includes:function includes(e){if(te.IsRegExp(e)){throw new TypeError('"includes" does not accept a RegExp')}var t=te.ToString(e);var r;if(arguments.length>1){r=arguments[1]}return I(this,t,r)!==-1},codePointAt:function codePointAt(e){var t=te.ToString(te.RequireObjectCoercible(this));var r=te.ToInteger(e);var n=t.length;if(r>=0&&r<n){var o=t.charCodeAt(r);var i=r+1===n;if(o<55296||o>56319||i){return o}var a=t.charCodeAt(r+1);if(a<56320||a>57343){return o}return(o-55296)*1024+(a-56320)+65536}}};if(String.prototype.includes&&"a".includes("a",Infinity)!==false){X(String.prototype,"includes",Me.includes)}if(String.prototype.startsWith&&String.prototype.endsWith){var Ce=i(function(){"/a/".startsWith(/a/)});var xe=a(function(){return"abc".startsWith("a",Infinity)===false});if(!Ce||!xe){X(String.prototype,"startsWith",Me.startsWith);X(String.prototype,"endsWith",Me.endsWith)}}if(Z){var Ne=a(function(){var e=/a/;e[W.match]=false;return"/a/".startsWith(e)});if(!Ne){X(String.prototype,"startsWith",Me.startsWith)}var Ae=a(function(){var e=/a/;e[W.match]=false;return"/a/".endsWith(e)});if(!Ae){X(String.prototype,"endsWith",Me.endsWith)}var Re=a(function(){var e=/a/;e[W.match]=false;return"/a/".includes(e)});if(!Re){X(String.prototype,"includes",Me.includes)}}b(String.prototype,Me);var _e=["	\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join("");var ke=new RegExp("(^["+_e+"]+)|(["+_e+"]+$)","g");var Fe=function trim(){return te.ToString(te.RequireObjectCoercible(this)).replace(ke,"")};var Le=["\x85","\u200b","\ufffe"].join("");var De=new RegExp("["+Le+"]","g");var ze=/^[\-+]0x[0-9a-f]+$/i;var qe=Le.trim().length!==Le.length;h(String.prototype,"trim",Fe,qe);var Ge=function(e){te.RequireObjectCoercible(e);this._s=te.ToString(e);this._i=0};Ge.prototype.next=function(){var e=this._s,t=this._i;if(typeof e==="undefined"||t>=e.length){this._s=void 0;return{value:void 0,done:true}}var r=e.charCodeAt(t),n,o;if(r<55296||r>56319||t+1===e.length){o=1}else{n=e.charCodeAt(t+1);o=n<56320||n>57343?1:2}this._i=t+o;return{value:e.substr(t,o),done:false}};me(Ge.prototype);me(String.prototype,function(){return new Ge(this)});var We={from:function from(e){var r=this;var n;if(arguments.length>1){n=arguments[1]}var o,i;if(typeof n==="undefined"){o=false}else{if(!te.IsCallable(n)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){i=arguments[2]}o=true}var a=typeof(J(e)||te.GetMethod(e,Y))!=="undefined";var u,f,s;if(a){f=te.IsConstructor(r)?Object(new r):[];var c=te.GetIterator(e);var l,p;s=0;while(true){l=te.IteratorStep(c);if(l===false){break}p=l.value;try{if(o){p=typeof i==="undefined"?n(p,s):t(n,i,p,s)}f[s]=p}catch(v){te.IteratorClose(c,true);throw v}s+=1}u=s}else{var y=te.ToObject(e);u=te.ToLength(y.length);f=te.IsConstructor(r)?Object(new r(u)):new Array(u);var h;for(s=0;s<u;++s){h=y[s];if(o){h=typeof i==="undefined"?n(h,s):t(n,i,h,s)}f[s]=h}}f.length=u;return f},of:function of(){var e=arguments.length;var t=this;var n=r(t)||!te.IsCallable(t)?new Array(e):te.Construct(t,[e]);for(var o=0;o<e;++o){je(n,o,arguments[o])}n.length=e;return n}};b(Array,We);Oe(Array);var He=function(e){return{value:e,done:arguments.length===0}};q=function(e,t){this.i=0;this.array=e;this.kind=t};b(q.prototype,{next:function(){var e=this.i,t=this.array;if(!(this instanceof q)){throw new TypeError("Not an ArrayIterator")}if(typeof t!=="undefined"){var r=te.ToLength(t.length);for(;e<r;e++){var n=this.kind;var o;if(n==="key"){o=e}else if(n==="value"){o=t[e]}else if(n==="entry"){o=[e,t[e]]}this.i=e+1;return{value:o,done:false}}}this.array=void 0;return{value:void 0,done:true}}});me(q.prototype);var Ve=function orderKeys(e,t){var r=String(te.ToInteger(e))===e;var n=String(te.ToInteger(t))===t;if(r&&n){return t-e}else if(r&&!n){return-1}else if(!r&&n){return 1}else{return e.localeCompare(t)}};var Be=function getAllKeys(e){var t=[];var r=[];for(var n in e){x(z(e,n)?t:r,n)}M(t,Ve);M(r,Ve);return P(t,r)};var $e=Array.of===We.of||function(){var e=function Foo(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&t.length===2}();if(!$e){X(Array,"of",We.of)}var Ue={copyWithin:function copyWithin(e,t){var r=te.ToObject(this);var n=te.ToLength(r.length);var o=te.ToInteger(e);var i=te.ToInteger(t);var a=o<0?R(n+o,0):_(o,n);var u=i<0?R(n+i,0):_(i,n);var f;if(arguments.length>2){f=arguments[2]}var s=typeof f==="undefined"?n:te.ToInteger(f);var c=s<0?R(n+s,0):_(s,n);var l=_(c-u,n-a);var p=1;if(u<a&&a<u+l){p=-1;u+=l-1;a+=l-1}while(l>0){if(u in r){r[a]=r[u]}else{delete r[a]}u+=p;a+=p;l-=1}return r},fill:function fill(e){var t;if(arguments.length>1){t=arguments[1]}var r;if(arguments.length>2){r=arguments[2]}var n=te.ToObject(this);var o=te.ToLength(n.length);t=te.ToInteger(typeof t==="undefined"?0:t);r=te.ToInteger(typeof r==="undefined"?o:r);var i=t<0?R(o+t,0):_(t,o);var a=r<0?o+r:r;for(var u=i;u<o&&u<a;++u){n[u]=e}return n},find:function find(e){var r=te.ToObject(this);var n=te.ToLength(r.length);if(!te.IsCallable(e)){throw new TypeError("Array#find: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0,a;i<n;i++){a=r[i];if(o){if(t(e,o,a,i,r)){return a}}else if(e(a,i,r)){return a}}},findIndex:function findIndex(e){var r=te.ToObject(this);var n=te.ToLength(r.length);if(!te.IsCallable(e)){throw new TypeError("Array#findIndex: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0;i<n;i++){if(o){if(t(e,o,r[i],i,r)){return i}}else if(e(r[i],i,r)){return i}}return-1},keys:function keys(){return new q(this,"key")},values:function values(){return new q(this,"value")},entries:function entries(){return new q(this,"entry")}};if(Array.prototype.keys&&!te.IsCallable([1].keys().next)){delete Array.prototype.keys}if(Array.prototype.entries&&!te.IsCallable([1].entries().next)){delete Array.prototype.entries}if(Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[Y]){b(Array.prototype,{values:Array.prototype[Y]});if(K.symbol(W.unscopables)){Array.prototype[W.unscopables].values=true}}if(c&&Array.prototype.values&&Array.prototype.values.name!=="values"){var Je=Array.prototype.values;X(Array.prototype,"values",function values(){return te.Call(Je,this,arguments)});h(Array.prototype,Y,Array.prototype.values,true)}b(Array.prototype,Ue);if(1/[true].indexOf(true,-0)<0){h(Array.prototype,"indexOf",function indexOf(e){var t=E(this,arguments);if(t===0&&1/t<0){return 0}return t},true)}me(Array.prototype,function(){return this.values()});if(Object.getPrototypeOf){me(Object.getPrototypeOf([].values()))}var Ke=function(){return a(function(){return Array.from({length:-1}).length===0})}();var Xe=function(){var e=Array.from([0].entries());return e.length===1&&r(e[0])&&e[0][0]===0&&e[0][1]===0}();if(!Ke||!Xe){X(Array,"from",We.from)}var Ze=function(){return a(function(){return Array.from([0],void 0)})}();if(!Ze){var Ye=Array.from;X(Array,"from",function from(e){if(arguments.length>1&&typeof arguments[1]!=="undefined"){return te.Call(Ye,this,arguments)}else{return t(Ye,this,e)}})}var Qe=-(Math.pow(2,32)-1);var et=function(e,r){var n={length:Qe};n[r?(n.length>>>0)-1:0]=true;return a(function(){t(e,n,function(){throw new RangeError("should not reach here")},[]);return true})};if(!et(Array.prototype.forEach)){var tt=Array.prototype.forEach;X(Array.prototype,"forEach",function forEach(e){return te.Call(tt,this.length>=0?this:[],arguments)},true)}if(!et(Array.prototype.map)){var rt=Array.prototype.map;X(Array.prototype,"map",function map(e){return te.Call(rt,this.length>=0?this:[],arguments)},true)}if(!et(Array.prototype.filter)){var nt=Array.prototype.filter;X(Array.prototype,"filter",function filter(e){return te.Call(nt,this.length>=0?this:[],arguments)},true)}if(!et(Array.prototype.some)){var ot=Array.prototype.some;X(Array.prototype,"some",function some(e){return te.Call(ot,this.length>=0?this:[],arguments)},true)}if(!et(Array.prototype.every)){var it=Array.prototype.every;X(Array.prototype,"every",function every(e){return te.Call(it,this.length>=0?this:[],arguments)},true)}if(!et(Array.prototype.reduce)){var at=Array.prototype.reduce;X(Array.prototype,"reduce",function reduce(e){return te.Call(at,this.length>=0?this:[],arguments)},true)}if(!et(Array.prototype.reduceRight,true)){var ut=Array.prototype.reduceRight;X(Array.prototype,"reduceRight",function reduceRight(e){return te.Call(ut,this.length>=0?this:[],arguments)},true)}var ft=Number("0o10")!==8;var st=Number("0b10")!==2;var ct=y(Le,function(e){return Number(e+0+e)===0});if(ft||st||ct){var lt=Number;var pt=/^0b[01]+$/i;var vt=/^0o[0-7]+$/i;var yt=pt.test.bind(pt);var ht=vt.test.bind(vt);var bt=function(e){var t;if(typeof e.valueOf==="function"){t=e.valueOf();if(K.primitive(t)){return t}}if(typeof e.toString==="function"){t=e.toString();if(K.primitive(t)){return t}}throw new TypeError("No default value")};var gt=De.test.bind(De);var dt=ze.test.bind(ze);var Ot=function(){var e=function Number(t){var r;if(arguments.length>0){r=K.primitive(t)?t:bt(t,"number")}else{r=0}if(typeof r==="string"){r=te.Call(Fe,r);if(yt(r)){r=parseInt(C(r,2),2)}else if(ht(r)){r=parseInt(C(r,2),8)}else if(gt(r)||dt(r)){r=NaN}}var n=this;var o=a(function(){lt.prototype.valueOf.call(n);return true});if(n instanceof e&&!o){return new lt(r)}return lt(r)};return e}();ge(lt,Ot,{});b(Ot,{NaN:lt.NaN,MAX_VALUE:lt.MAX_VALUE,MIN_VALUE:lt.MIN_VALUE,NEGATIVE_INFINITY:lt.NEGATIVE_INFINITY,POSITIVE_INFINITY:lt.POSITIVE_INFINITY});Number=Ot;O.redefine(S,"Number",Ot)}var mt=Math.pow(2,53)-1;b(Number,{MAX_SAFE_INTEGER:mt,MIN_SAFE_INTEGER:-mt,EPSILON:2.220446049250313e-16,parseInt:S.parseInt,parseFloat:S.parseFloat,isFinite:B,isInteger:function isInteger(e){return B(e)&&te.ToInteger(e)===e},isSafeInteger:function isSafeInteger(e){return Number.isInteger(e)&&F(e)<=Number.MAX_SAFE_INTEGER},isNaN:V});h(Number,"parseInt",S.parseInt,Number.parseInt!==S.parseInt);if(![,1].find(function(e,t){return t===0})){X(Array.prototype,"find",Ue.find)}if([,1].findIndex(function(e,t){return t===0})!==0){X(Array.prototype,"findIndex",Ue.findIndex)}var wt=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable);var jt=function ensureEnumerable(e,t){if(s&&wt(e,t)){Object.defineProperty(e,t,{enumerable:false})}};var St=function sliceArgs(){var e=Number(this);var t=arguments.length;var r=t-e;var n=new Array(r<0?0:r);for(var o=e;o<t;++o){n[o-e]=arguments[o]}return n};var Tt=function assignTo(e){return function assignToSource(t,r){t[r]=e[r];return t}};var It=function(e,t){var r=n(Object(t));var o;if(te.IsCallable(Object.getOwnPropertySymbols)){o=v(Object.getOwnPropertySymbols(Object(t)),wt(t))}return p(P(r,o||[]),Tt(t),e)};var Et={assign:function(e,t){var r=te.ToObject(e,"Cannot convert undefined or null to object");return p(te.Call(St,1,arguments),It,r)},is:function is(e,t){return te.SameValue(e,t)}};var Pt=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}}();if(Pt){X(Object,"assign",Et.assign)}b(Object,Et);if(s){var Mt={setPrototypeOf:function(e,r){var n;var o=function(e,t){if(!te.TypeIsObject(e)){throw new TypeError("cannot set prototype on a non-object")}if(!(t===null||te.TypeIsObject(t))){throw new TypeError("can only set prototype to an object or null"+t)}};var i=function(e,r){o(e,r);t(n,e,r);return e};try{n=e.getOwnPropertyDescriptor(e.prototype,r).set;t(n,{},null)}catch(a){if(e.prototype!=={}[r]){return}n=function(e){this[r]=e};i.polyfill=i(i({},null),e.prototype)instanceof e}return i}(Object,"__proto__")};b(Object,Mt)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&Object.getPrototypeOf(Object.setPrototypeOf({},null))!==null&&Object.getPrototypeOf(Object.create(null))===null){(function(){var e=Object.create(null);var t=Object.getPrototypeOf,r=Object.setPrototypeOf;Object.getPrototypeOf=function(r){var n=t(r);return n===e?null:n};Object.setPrototypeOf=function(t,n){var o=n===null?e:n;return r(t,o)};Object.setPrototypeOf.polyfill=false})()}var Ct=!i(function(){Object.keys("foo")});if(!Ct){var xt=Object.keys;X(Object,"keys",function keys(e){return xt(te.ToObject(e))});n=Object.keys}var Nt=i(function(){Object.keys(/a/g)});if(Nt){var At=Object.keys;X(Object,"keys",function keys(e){if(K.regex(e)){var t=[];for(var r in e){if(z(e,r)){x(t,r)}}return t}return At(e)});n=Object.keys}if(Object.getOwnPropertyNames){var Rt=!i(function(){Object.getOwnPropertyNames("foo")});if(!Rt){var _t=typeof window==="object"?Object.getOwnPropertyNames(window):[];var kt=Object.getOwnPropertyNames;X(Object,"getOwnPropertyNames",function getOwnPropertyNames(e){var t=te.ToObject(e);if(g(t)==="[object Window]"){try{return kt(t)}catch(r){return P([],_t)}}return kt(t)})}}if(Object.getOwnPropertyDescriptor){var Ft=!i(function(){Object.getOwnPropertyDescriptor("foo","bar")});if(!Ft){var Lt=Object.getOwnPropertyDescriptor;X(Object,"getOwnPropertyDescriptor",function getOwnPropertyDescriptor(e,t){return Lt(te.ToObject(e),t)})}}if(Object.seal){var Dt=!i(function(){Object.seal("foo")});if(!Dt){var zt=Object.seal;X(Object,"seal",function seal(e){if(!K.object(e)){return e}return zt(e)})}}if(Object.isSealed){var qt=!i(function(){Object.isSealed("foo")});if(!qt){var Gt=Object.isSealed;X(Object,"isSealed",function isSealed(e){if(!K.object(e)){return true}return Gt(e)})}}if(Object.freeze){var Wt=!i(function(){Object.freeze("foo")});if(!Wt){var Ht=Object.freeze;X(Object,"freeze",function freeze(e){if(!K.object(e)){return e}return Ht(e)})}}if(Object.isFrozen){var Vt=!i(function(){Object.isFrozen("foo")});if(!Vt){var Bt=Object.isFrozen;X(Object,"isFrozen",function isFrozen(e){if(!K.object(e)){return true}return Bt(e)})}}if(Object.preventExtensions){var $t=!i(function(){Object.preventExtensions("foo")});if(!$t){var Ut=Object.preventExtensions;X(Object,"preventExtensions",function preventExtensions(e){if(!K.object(e)){return e}return Ut(e)})}}if(Object.isExtensible){var Jt=!i(function(){Object.isExtensible("foo")});if(!Jt){var Kt=Object.isExtensible;X(Object,"isExtensible",function isExtensible(e){if(!K.object(e)){return false}return Kt(e)})}}if(Object.getPrototypeOf){var Xt=!i(function(){Object.getPrototypeOf("foo")});if(!Xt){var Zt=Object.getPrototypeOf;X(Object,"getPrototypeOf",function getPrototypeOf(e){return Zt(te.ToObject(e))})}}var Yt=s&&function(){var e=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return e&&te.IsCallable(e.get)}();if(s&&!Yt){var Qt=function flags(){if(!te.TypeIsObject(this)){throw new TypeError("Method called on incompatible type: must be an object.")}var e="";if(this.global){e+="g"}if(this.ignoreCase){e+="i"}if(this.multiline){e+="m"}if(this.unicode){e+="u"}if(this.sticky){e+="y"}return e};O.getter(RegExp.prototype,"flags",Qt)}var er=s&&a(function(){return String(new RegExp(/a/g,"i"))==="/a/i"});var tr=Z&&s&&function(){var e=/./;e[W.match]=false;return RegExp(e)===e}();var rr=a(function(){return RegExp.prototype.toString.call({source:"abc"})==="/abc/"});var nr=rr&&a(function(){return RegExp.prototype.toString.call({source:"a",flags:"b"})==="/a/b"});if(!rr||!nr){var or=RegExp.prototype.toString;h(RegExp.prototype,"toString",function toString(){var e=te.RequireObjectCoercible(this);if(K.regex(e)){return t(or,e)}var r=ee(e.source);var n=ee(e.flags);return"/"+r+"/"+n},true);O.preserveToString(RegExp.prototype.toString,or)}if(s&&(!er||tr)){var ir=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get;var ar=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{};var ur=function(){return this.source};var fr=te.IsCallable(ar.get)?ar.get:ur;var sr=RegExp;var cr=function(){return function RegExp(e,t){var r=te.IsRegExp(e);var n=this instanceof RegExp;if(!n&&r&&typeof t==="undefined"&&e.constructor===RegExp){return e}var o=e;var i=t;if(K.regex(e)){o=te.Call(fr,e);i=typeof t==="undefined"?te.Call(ir,e):t;return new RegExp(o,i)}else if(r){o=e.source;i=typeof t==="undefined"?e.flags:t}return new sr(e,t)}}();ge(sr,cr,{$input:true});RegExp=cr;O.redefine(S,"RegExp",cr)}if(s){var lr={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(n(lr),function(e){if(e in RegExp&&!(lr[e]in RegExp)){O.getter(RegExp,lr[e],function get(){return RegExp[e]})}})}Oe(RegExp);var pr=1/Number.EPSILON;var vr=function roundTiesToEven(e){return e+pr-pr};var yr=Math.pow(2,-23);var hr=Math.pow(2,127)*(2-yr);var br=Math.pow(2,-126);var gr=Number.prototype.clz;delete Number.prototype.clz;var dr={acosh:function acosh(e){var t=Number(e);if(Number.isNaN(t)||e<1){return NaN}if(t===1){return 0}if(t===Infinity){return t}return L(t/Math.E+D(t+1)*D(t-1)/Math.E)+1},asinh:function asinh(e){var t=Number(e);if(t===0||!T(t)){return t}return t<0?-Math.asinh(-t):L(t+D(t*t+1))},atanh:function atanh(e){var t=Number(e);if(Number.isNaN(t)||t<-1||t>1){return NaN}if(t===-1){return-Infinity}if(t===1){return Infinity}if(t===0){return t}return.5*L((1+t)/(1-t))},cbrt:function cbrt(e){var t=Number(e);if(t===0){return t}var r=t<0,n;if(r){t=-t}if(t===Infinity){n=Infinity}else{n=Math.exp(L(t)/3);n=(t/(n*n)+2*n)/3}return r?-n:n},clz32:function clz32(e){var t=Number(e);var r=te.ToUint32(t);if(r===0){return 32}return gr?te.Call(gr,r):31-k(L(r+.5)*Math.LOG2E)},cosh:function cosh(e){var t=Number(e);if(t===0){return 1}if(Number.isNaN(t)){return NaN}if(!T(t)){return Infinity}if(t<0){t=-t}if(t>21){return Math.exp(t)/2}return(Math.exp(t)+Math.exp(-t))/2},expm1:function expm1(e){var t=Number(e);if(t===-Infinity){return-1}if(!T(t)||t===0){return t}if(F(t)>.5){return Math.exp(t)-1}var r=t;var n=0;var o=1;while(n+r!==n){n+=r;o+=1;r*=t/o}return n},hypot:function hypot(e,t){var r=0;var n=0;for(var o=0;o<arguments.length;++o){var i=F(Number(arguments[o]));if(n<i){r*=n/i*(n/i);r+=1;n=i}else{r+=i>0?i/n*(i/n):i}}return n===Infinity?Infinity:n*D(r)},log2:function log2(e){return L(e)*Math.LOG2E},log10:function log10(e){return L(e)*Math.LOG10E},log1p:function log1p(e){var t=Number(e);if(t<-1||Number.isNaN(t)){return NaN}if(t===0||t===Infinity){return t}if(t===-1){return-Infinity}return 1+t-1===0?t:t*(L(1+t)/(1+t-1))},sign:function sign(e){var t=Number(e);if(t===0){return t}if(Number.isNaN(t)){return t}return t<0?-1:1},sinh:function sinh(e){var t=Number(e);if(!T(t)||t===0){return t}if(F(t)<1){return(Math.expm1(t)-Math.expm1(-t))/2}return(Math.exp(t-1)-Math.exp(-t-1))*Math.E/2},tanh:function tanh(e){var t=Number(e);if(Number.isNaN(t)||t===0){return t}if(t>=20){return 1}if(t<=-20){return-1}var r=Math.expm1(t);var n=Math.expm1(-t);if(r===Infinity){return 1}if(n===Infinity){return-1}return(r-n)/(Math.exp(t)+Math.exp(-t))},trunc:function trunc(e){var t=Number(e);return t<0?-k(-t):k(t)},imul:function imul(e,t){var r=te.ToUint32(e);var n=te.ToUint32(t);var o=r>>>16&65535;var i=r&65535;var a=n>>>16&65535;var u=n&65535;return i*u+(o*u+i*a<<16>>>0)|0},fround:function fround(e){var t=Number(e);if(t===0||t===Infinity||t===-Infinity||V(t)){return t}var r=Math.sign(t);var n=F(t);if(n<br){return r*vr(n/br/yr)*br*yr}var o=(1+yr/Number.EPSILON)*n;var i=o-(o-n);if(i>hr||V(i)){return r*Infinity}return r*i}};b(Math,dr);h(Math,"log1p",dr.log1p,Math.log1p(-1e-17)!==-1e-17);h(Math,"asinh",dr.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7));h(Math,"tanh",dr.tanh,Math.tanh(-2e-17)!==-2e-17);h(Math,"acosh",dr.acosh,Math.acosh(Number.MAX_VALUE)===Infinity);h(Math,"cbrt",dr.cbrt,Math.abs(1-Math.cbrt(1e-300)/1e-100)/Number.EPSILON>8);h(Math,"sinh",dr.sinh,Math.sinh(-2e-17)!==-2e-17);var Or=Math.expm1(10);h(Math,"expm1",dr.expm1,Or>22025.465794806718||Or<22025.465794806718);
var mr=Math.round;var wr=Math.round(.5-Number.EPSILON/4)===0&&Math.round(-.5+Number.EPSILON/3.99)===1;var jr=pr+1;var Sr=2*pr-1;var Tr=[jr,Sr].every(function(e){return Math.round(e)===e});h(Math,"round",function round(e){var t=k(e);var r=t===-1?-0:t+1;return e-t<.5?t:r},!wr||!Tr);O.preserveToString(Math.round,mr);var Ir=Math.imul;if(Math.imul(4294967295,5)!==-5){Math.imul=dr.imul;O.preserveToString(Math.imul,Ir)}if(Math.imul.length!==2){X(Math,"imul",function imul(e,t){return te.Call(Ir,Math,arguments)})}var Er=function(){var e=S.setTimeout;if(typeof e!=="function"&&typeof e!=="object"){return}te.IsPromise=function(e){if(!te.TypeIsObject(e)){return false}if(typeof e._promise==="undefined"){return false}return true};var r=function(e){if(!te.IsConstructor(e)){throw new TypeError("Bad promise constructor")}var t=this;var r=function(e,r){if(t.resolve!==void 0||t.reject!==void 0){throw new TypeError("Bad Promise implementation!")}t.resolve=e;t.reject=r};t.resolve=void 0;t.reject=void 0;t.promise=new e(r);if(!(te.IsCallable(t.resolve)&&te.IsCallable(t.reject))){throw new TypeError("Bad promise constructor")}};var n;if(typeof window!=="undefined"&&te.IsCallable(window.postMessage)){n=function(){var e=[];var t="zero-timeout-message";var r=function(r){x(e,r);window.postMessage(t,"*")};var n=function(r){if(r.source===window&&r.data===t){r.stopPropagation();if(e.length===0){return}var n=A(e);n()}};window.addEventListener("message",n,true);return r}}var o=function(){var e=S.Promise;var t=e&&e.resolve&&e.resolve();return t&&function(e){return t.then(e)}};var i=te.IsCallable(S.setImmediate)?S.setImmediate:typeof process==="object"&&process.nextTick?process.nextTick:o()||(te.IsCallable(n)?n():function(t){e(t,0)});var a=function(e){return e};var u=function(e){throw e};var f=0;var s=1;var c=2;var l=0;var p=1;var v=2;var y={};var h=function(e,t,r){i(function(){g(e,t,r)})};var g=function(e,t,r){var n,o;if(t===y){return e(r)}try{n=e(r);o=t.resolve}catch(i){n=i;o=t.reject}o(n)};var d=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.fulfillReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+l],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=s;r.reactionLength=0};var O=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.rejectReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+p],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=c;r.reactionLength=0};var m=function(e){var t=false;var r=function(r){var n;if(t){return}t=true;if(r===e){return O(e,new TypeError("Self resolution"))}if(!te.TypeIsObject(r)){return d(e,r)}try{n=r.then}catch(o){return O(e,o)}if(!te.IsCallable(n)){return d(e,r)}i(function(){j(e,r,n)})};var n=function(r){if(t){return}t=true;return O(e,r)};return{resolve:r,reject:n}};var w=function(e,r,n,o){if(e===I){t(e,r,n,o,y)}else{t(e,r,n,o)}};var j=function(e,t,r){var n=m(e);var o=n.resolve;var i=n.reject;try{w(r,t,o,i)}catch(a){i(a)}};var T,I;var E=function(){var e=function Promise(t){if(!(this instanceof e)){throw new TypeError('Constructor Promise requires "new"')}if(this&&this._promise){throw new TypeError("Bad construction")}if(!te.IsCallable(t)){throw new TypeError("not a valid resolver")}var r=Se(this,e,T,{_promise:{result:void 0,state:f,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}});var n=m(r);var o=n.reject;try{t(n.resolve,o)}catch(i){o(i)}return r};return e}();T=E.prototype;var P=function(e,t,r,n){var o=false;return function(i){if(o){return}o=true;t[e]=i;if(--n.count===0){var a=r.resolve;a(t)}}};var M=function(e,t,r){var n=e.iterator;var o=[],i={count:1},a,u;var f=0;while(true){try{a=te.IteratorStep(n);if(a===false){e.done=true;break}u=a.value}catch(s){e.done=true;throw s}o[f]=void 0;var c=t.resolve(u);var l=P(f,o,r,i);i.count+=1;w(c.then,c,l,r.reject);f+=1}if(--i.count===0){var p=r.resolve;p(o)}return r.promise};var C=function(e,t,r){var n=e.iterator,o,i,a;while(true){try{o=te.IteratorStep(n);if(o===false){e.done=true;break}i=o.value}catch(u){e.done=true;throw u}a=t.resolve(i);w(a.then,a,r.resolve,r.reject)}return r.promise};b(E,{all:function all(e){var t=this;if(!te.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=te.GetIterator(e);i={iterator:o,done:false};return M(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{te.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},race:function race(e){var t=this;if(!te.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=te.GetIterator(e);i={iterator:o,done:false};return C(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{te.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},reject:function reject(e){var t=this;if(!te.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}var n=new r(t);var o=n.reject;o(e);return n.promise},resolve:function resolve(e){var t=this;if(!te.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}if(te.IsPromise(e)){var n=e.constructor;if(n===t){return e}}var o=new r(t);var i=o.resolve;i(e);return o.promise}});b(T,{"catch":function(e){return this.then(null,e)},then:function then(e,t){var n=this;if(!te.IsPromise(n)){throw new TypeError("not a promise")}var o=te.SpeciesConstructor(n,E);var i;var b=arguments.length>2&&arguments[2]===y;if(b&&o===E){i=y}else{i=new r(o)}var g=te.IsCallable(e)?e:a;var d=te.IsCallable(t)?t:u;var O=n._promise;var m;if(O.state===f){if(O.reactionLength===0){O.fulfillReactionHandler0=g;O.rejectReactionHandler0=d;O.reactionCapability0=i}else{var w=3*(O.reactionLength-1);O[w+l]=g;O[w+p]=d;O[w+v]=i}O.reactionLength+=1}else if(O.state===s){m=O.result;h(g,i,m)}else if(O.state===c){m=O.result;h(d,i,m)}else{throw new TypeError("unexpected Promise state")}return i.promise}});y=new r(E);I=T.then;return E}();if(S.Promise){delete S.Promise.accept;delete S.Promise.defer;delete S.Promise.prototype.chain}if(typeof Er==="function"){b(S,{Promise:Er});var Pr=w(S.Promise,function(e){return e.resolve(42).then(function(){})instanceof e});var Mr=!i(function(){S.Promise.reject(42).then(null,5).then(null,G)});var Cr=i(function(){S.Promise.call(3,G)});var xr=function(e){var t=e.resolve(5);t.constructor={};var r=e.resolve(t);try{r.then(null,G).then(null,G)}catch(n){return true}return t===r}(S.Promise);var Nr=s&&function(){var e=0;var t=Object.defineProperty({},"then",{get:function(){e+=1}});Promise.resolve(t);return e===1}();var Ar=function BadResolverPromise(e){var t=new Promise(e);e(3,function(){});this.then=t.then;this.constructor=BadResolverPromise};Ar.prototype=Promise.prototype;Ar.all=Promise.all;var Rr=a(function(){return!!Ar.all([1,2])});if(!Pr||!Mr||!Cr||xr||!Nr||Rr){Promise=Er;X(S,"Promise",Er)}if(Promise.all.length!==1){var _r=Promise.all;X(Promise,"all",function all(e){return te.Call(_r,this,arguments)})}if(Promise.race.length!==1){var kr=Promise.race;X(Promise,"race",function race(e){return te.Call(kr,this,arguments)})}if(Promise.resolve.length!==1){var Fr=Promise.resolve;X(Promise,"resolve",function resolve(e){return te.Call(Fr,this,arguments)})}if(Promise.reject.length!==1){var Lr=Promise.reject;X(Promise,"reject",function reject(e){return te.Call(Lr,this,arguments)})}jt(Promise,"all");jt(Promise,"race");jt(Promise,"resolve");jt(Promise,"reject");Oe(Promise)}var Dr=function(e){var t=n(p(e,function(e,t){e[t]=true;return e},{}));return e.join(":")===t.join(":")};var zr=Dr(["z","a","bb"]);var qr=Dr(["z",1,"a","3",2]);if(s){var Gr=function fastkey(e){if(!zr){return null}if(typeof e==="undefined"||e===null){return"^"+te.ToString(e)}else if(typeof e==="string"){return"$"+e}else if(typeof e==="number"){if(!qr){return"n"+e}return e}else if(typeof e==="boolean"){return"b"+e}return null};var Wr=function emptyObject(){return Object.create?Object.create(null):{}};var Hr=function addIterableToMap(e,n,o){if(r(o)||K.string(o)){l(o,function(e){if(!te.TypeIsObject(e)){throw new TypeError("Iterator value "+e+" is not an entry object")}n.set(e[0],e[1])})}else if(o instanceof e){t(e.prototype.forEach,o,function(e,t){n.set(t,e)})}else{var i,a;if(o!==null&&typeof o!=="undefined"){a=n.set;if(!te.IsCallable(a)){throw new TypeError("bad map")}i=te.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=te.IteratorStep(i);if(u===false){break}var f=u.value;try{if(!te.TypeIsObject(f)){throw new TypeError("Iterator value "+f+" is not an entry object")}t(a,n,f[0],f[1])}catch(s){te.IteratorClose(i,true);throw s}}}}};var Vr=function addIterableToSet(e,n,o){if(r(o)||K.string(o)){l(o,function(e){n.add(e)})}else if(o instanceof e){t(e.prototype.forEach,o,function(e){n.add(e)})}else{var i,a;if(o!==null&&typeof o!=="undefined"){a=n.add;if(!te.IsCallable(a)){throw new TypeError("bad set")}i=te.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=te.IteratorStep(i);if(u===false){break}var f=u.value;try{t(a,n,f)}catch(s){te.IteratorClose(i,true);throw s}}}}};var Br={Map:function(){var e={};var r=function MapEntry(e,t){this.key=e;this.value=t;this.next=null;this.prev=null};r.prototype.isRemoved=function isRemoved(){return this.key===e};var n=function isMap(e){return!!e._es6map};var o=function requireMapSlot(e,t){if(!te.TypeIsObject(e)||!n(e)){throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+te.ToString(e))}};var i=function MapIterator(e,t){o(e,"[[MapIterator]]");this.head=e._head;this.i=this.head;this.kind=t};i.prototype={next:function next(){var e=this.i,t=this.kind,r=this.head,n;if(typeof this.i==="undefined"){return{value:void 0,done:true}}while(e.isRemoved()&&e!==r){e=e.prev}while(e.next!==r){e=e.next;if(!e.isRemoved()){if(t==="key"){n=e.key}else if(t==="value"){n=e.value}else{n=[e.key,e.value]}this.i=e;return{value:n,done:false}}}this.i=void 0;return{value:void 0,done:true}}};me(i.prototype);var a;var u=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}if(this&&this._es6map){throw new TypeError("Bad construction")}var e=Se(this,Map,a,{_es6map:true,_head:null,_storage:Wr(),_size:0});var t=new r(null,null);t.next=t.prev=t;e._head=t;if(arguments.length>0){Hr(Map,e,arguments[0])}return e};a=u.prototype;O.getter(a,"size",function(){if(typeof this._size==="undefined"){throw new TypeError("size method called on incompatible Map")}return this._size});b(a,{get:function get(e){o(this,"get");var t=Gr(e);if(t!==null){var r=this._storage[t];if(r){return r.value}else{return}}var n=this._head,i=n;while((i=i.next)!==n){if(te.SameValueZero(i.key,e)){return i.value}}},has:function has(e){o(this,"has");var t=Gr(e);if(t!==null){return typeof this._storage[t]!=="undefined"}var r=this._head,n=r;while((n=n.next)!==r){if(te.SameValueZero(n.key,e)){return true}}return false},set:function set(e,t){o(this,"set");var n=this._head,i=n,a;var u=Gr(e);if(u!==null){if(typeof this._storage[u]!=="undefined"){this._storage[u].value=t;return this}else{a=this._storage[u]=new r(e,t);i=n.prev}}while((i=i.next)!==n){if(te.SameValueZero(i.key,e)){i.value=t;return this}}a=a||new r(e,t);if(te.SameValue(-0,e)){a.key=+0}a.next=this._head;a.prev=this._head.prev;a.prev.next=a;a.next.prev=a;this._size+=1;return this},"delete":function(t){o(this,"delete");var r=this._head,n=r;var i=Gr(t);if(i!==null){if(typeof this._storage[i]==="undefined"){return false}n=this._storage[i].prev;delete this._storage[i]}while((n=n.next)!==r){if(te.SameValueZero(n.key,t)){n.key=n.value=e;n.prev.next=n.next;n.next.prev=n.prev;this._size-=1;return true}}return false},clear:function clear(){o(this,"clear");this._size=0;this._storage=Wr();var t=this._head,r=t,n=r.next;while((r=n)!==t){r.key=r.value=e;n=r.next;r.next=r.prev=t}t.next=t.prev=t},keys:function keys(){o(this,"keys");return new i(this,"key")},values:function values(){o(this,"values");return new i(this,"value")},entries:function entries(){o(this,"entries");return new i(this,"key+value")},forEach:function forEach(e){o(this,"forEach");var r=arguments.length>1?arguments[1]:null;var n=this.entries();for(var i=n.next();!i.done;i=n.next()){if(r){t(e,r,i.value[1],i.value[0],this)}else{e(i.value[1],i.value[0],this)}}}});me(a,a.entries);return u}(),Set:function(){var e=function isSet(e){return e._es6set&&typeof e._storage!=="undefined"};var r=function requireSetSlot(t,r){if(!te.TypeIsObject(t)||!e(t)){throw new TypeError("Set.prototype."+r+" called on incompatible receiver "+te.ToString(t))}};var o;var i=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}if(this&&this._es6set){throw new TypeError("Bad construction")}var e=Se(this,Set,o,{_es6set:true,"[[SetData]]":null,_storage:Wr()});if(!e._es6set){throw new TypeError("bad set")}if(arguments.length>0){Vr(Set,e,arguments[0])}return e};o=i.prototype;var a=function(e){var t=e;if(t==="^null"){return null}else if(t==="^undefined"){return void 0}else{var r=t.charAt(0);if(r==="$"){return C(t,1)}else if(r==="n"){return+C(t,1)}else if(r==="b"){return t==="btrue"}}return+t};var u=function ensureMap(e){if(!e["[[SetData]]"]){var t=e["[[SetData]]"]=new Br.Map;l(n(e._storage),function(e){var r=a(e);t.set(r,r)});e["[[SetData]]"]=t}e._storage=null};O.getter(i.prototype,"size",function(){r(this,"size");if(this._storage){return n(this._storage).length}u(this);return this["[[SetData]]"].size});b(i.prototype,{has:function has(e){r(this,"has");var t;if(this._storage&&(t=Gr(e))!==null){return!!this._storage[t]}u(this);return this["[[SetData]]"].has(e)},add:function add(e){r(this,"add");var t;if(this._storage&&(t=Gr(e))!==null){this._storage[t]=true;return this}u(this);this["[[SetData]]"].set(e,e);return this},"delete":function(e){r(this,"delete");var t;if(this._storage&&(t=Gr(e))!==null){var n=z(this._storage,t);return delete this._storage[t]&&n}u(this);return this["[[SetData]]"]["delete"](e)},clear:function clear(){r(this,"clear");if(this._storage){this._storage=Wr()}if(this["[[SetData]]"]){this["[[SetData]]"].clear()}},values:function values(){r(this,"values");u(this);return this["[[SetData]]"].values()},entries:function entries(){r(this,"entries");u(this);return this["[[SetData]]"].entries()},forEach:function forEach(e){r(this,"forEach");var n=arguments.length>1?arguments[1]:null;var o=this;u(o);this["[[SetData]]"].forEach(function(r,i){if(n){t(e,n,i,i,o)}else{e(i,i,o)}})}});h(i.prototype,"keys",i.prototype.values,true);me(i.prototype,i.prototype.values);return i}()};if(S.Map||S.Set){var $r=a(function(){return new Map([[1,2]]).get(1)===2});if(!$r){var Ur=S.Map;S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new Ur;if(arguments.length>0){Hr(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,S.Map.prototype);return e};S.Map.prototype=m(Ur.prototype);h(S.Map.prototype,"constructor",S.Map,true);O.preserveToString(S.Map,Ur)}var Jr=new Map;var Kr=function(){var e=new Map([[1,0],[2,0],[3,0],[4,0]]);e.set(-0,e);return e.get(0)===e&&e.get(-0)===e&&e.has(0)&&e.has(-0)}();var Xr=Jr.set(1,2)===Jr;if(!Kr||!Xr){var Zr=Map.prototype.set;X(Map.prototype,"set",function set(e,r){t(Zr,this,e===0?0:e,r);return this})}if(!Kr){var Yr=Map.prototype.get;var Qr=Map.prototype.has;b(Map.prototype,{get:function get(e){return t(Yr,this,e===0?0:e)},has:function has(e){return t(Qr,this,e===0?0:e)}},true);O.preserveToString(Map.prototype.get,Yr);O.preserveToString(Map.prototype.has,Qr)}var en=new Set;var tn=function(e){e["delete"](0);e.add(-0);return!e.has(0)}(en);var rn=en.add(1)===en;if(!tn||!rn){var nn=Set.prototype.add;Set.prototype.add=function add(e){t(nn,this,e===0?0:e);return this};O.preserveToString(Set.prototype.add,nn)}if(!tn){var on=Set.prototype.has;Set.prototype.has=function has(e){return t(on,this,e===0?0:e)};O.preserveToString(Set.prototype.has,on);var an=Set.prototype["delete"];Set.prototype["delete"]=function SetDelete(e){return t(an,this,e===0?0:e)};O.preserveToString(Set.prototype["delete"],an)}var un=w(S.Map,function(e){var t=new e([]);t.set(42,42);return t instanceof e});var fn=Object.setPrototypeOf&&!un;var sn=function(){try{return!(S.Map()instanceof S.Map)}catch(e){return e instanceof TypeError}}();if(S.Map.length!==0||fn||!sn){var cn=S.Map;S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new cn;if(arguments.length>0){Hr(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Map.prototype);return e};S.Map.prototype=cn.prototype;h(S.Map.prototype,"constructor",S.Map,true);O.preserveToString(S.Map,cn)}var ln=w(S.Set,function(e){var t=new e([]);t.add(42,42);return t instanceof e});var pn=Object.setPrototypeOf&&!ln;var vn=function(){try{return!(S.Set()instanceof S.Set)}catch(e){return e instanceof TypeError}}();if(S.Set.length!==0||pn||!vn){var yn=S.Set;S.Set=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}var e=new yn;if(arguments.length>0){Vr(Set,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Set.prototype);return e};S.Set.prototype=yn.prototype;h(S.Set.prototype,"constructor",S.Set,true);O.preserveToString(S.Set,yn)}var hn=!a(function(){return(new Map).keys().next().done});if(typeof S.Map.prototype.clear!=="function"||(new S.Set).size!==0||(new S.Map).size!==0||typeof S.Map.prototype.keys!=="function"||typeof S.Set.prototype.keys!=="function"||typeof S.Map.prototype.forEach!=="function"||typeof S.Set.prototype.forEach!=="function"||u(S.Map)||u(S.Set)||typeof(new S.Map).keys().next!=="function"||hn||!un){b(S,{Map:Br.Map,Set:Br.Set},true)}if(S.Set.prototype.keys!==S.Set.prototype.values){h(S.Set.prototype,"keys",S.Set.prototype.values,true)}me(Object.getPrototypeOf((new S.Map).keys()));me(Object.getPrototypeOf((new S.Set).keys()));if(c&&S.Set.prototype.has.name!=="has"){var bn=S.Set.prototype.has;X(S.Set.prototype,"has",function has(e){return t(bn,this,e)})}}b(S,Br);Oe(S.Map);Oe(S.Set)}var gn=function throwUnlessTargetIsObject(e){if(!te.TypeIsObject(e)){throw new TypeError("target must be an object")}};var dn={apply:function apply(){return te.Call(te.Call,null,arguments)},construct:function construct(e,t){if(!te.IsConstructor(e)){throw new TypeError("First argument must be a constructor.")}var r=arguments.length>2?arguments[2]:e;if(!te.IsConstructor(r)){throw new TypeError("new.target must be a constructor.")}return te.Construct(e,t,r,"internal")},deleteProperty:function deleteProperty(e,t){gn(e);if(s){var r=Object.getOwnPropertyDescriptor(e,t);if(r&&!r.configurable){return false}}return delete e[t]},has:function has(e,t){gn(e);return t in e}};if(Object.getOwnPropertyNames){Object.assign(dn,{ownKeys:function ownKeys(e){gn(e);var t=Object.getOwnPropertyNames(e);if(te.IsCallable(Object.getOwnPropertySymbols)){N(t,Object.getOwnPropertySymbols(e))}return t}})}var On=function ConvertExceptionToBoolean(e){return!i(e)};if(Object.preventExtensions){Object.assign(dn,{isExtensible:function isExtensible(e){gn(e);return Object.isExtensible(e)},preventExtensions:function preventExtensions(e){gn(e);return On(function(){Object.preventExtensions(e)})}})}if(s){var mn=function get(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n){var o=Object.getPrototypeOf(e);if(o===null){return void 0}return mn(o,t,r)}if("value"in n){return n.value}if(n.get){return te.Call(n.get,r)}return void 0};var wn=function set(e,r,n,o){var i=Object.getOwnPropertyDescriptor(e,r);if(!i){var a=Object.getPrototypeOf(e);if(a!==null){return wn(a,r,n,o)}i={value:void 0,writable:true,enumerable:true,configurable:true}}if("value"in i){if(!i.writable){return false}if(!te.TypeIsObject(o)){return false}var u=Object.getOwnPropertyDescriptor(o,r);if(u){return Q.defineProperty(o,r,{value:n})}else{return Q.defineProperty(o,r,{value:n,writable:true,enumerable:true,configurable:true})}}if(i.set){t(i.set,o,n);return true}return false};Object.assign(dn,{defineProperty:function defineProperty(e,t,r){gn(e);return On(function(){Object.defineProperty(e,t,r)})},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(e,t){gn(e);return Object.getOwnPropertyDescriptor(e,t)},get:function get(e,t){gn(e);var r=arguments.length>2?arguments[2]:e;return mn(e,t,r)},set:function set(e,t,r){gn(e);var n=arguments.length>3?arguments[3]:e;return wn(e,t,r,n)}})}if(Object.getPrototypeOf){var jn=Object.getPrototypeOf;dn.getPrototypeOf=function getPrototypeOf(e){gn(e);return jn(e)}}if(Object.setPrototypeOf&&dn.getPrototypeOf){var Sn=function(e,t){var r=t;while(r){if(e===r){return true}r=dn.getPrototypeOf(r)}return false};Object.assign(dn,{setPrototypeOf:function setPrototypeOf(e,t){gn(e);if(t!==null&&!te.TypeIsObject(t)){throw new TypeError("proto must be an object or null")}if(t===Q.getPrototypeOf(e)){return true}if(Q.isExtensible&&!Q.isExtensible(e)){return false}if(Sn(e,t)){return false}Object.setPrototypeOf(e,t);return true}})}var Tn=function(e,t){if(!te.IsCallable(S.Reflect[e])){h(S.Reflect,e,t)}else{var r=a(function(){S.Reflect[e](1);S.Reflect[e](NaN);S.Reflect[e](true);return true});if(r){X(S.Reflect,e,t)}}};Object.keys(dn).forEach(function(e){Tn(e,dn[e])});var In=S.Reflect.getPrototypeOf;if(c&&In&&In.name!=="getPrototypeOf"){X(S.Reflect,"getPrototypeOf",function getPrototypeOf(e){return t(In,S.Reflect,e)})}if(S.Reflect.setPrototypeOf){if(a(function(){S.Reflect.setPrototypeOf(1,{});return true})){X(S.Reflect,"setPrototypeOf",dn.setPrototypeOf)}}if(S.Reflect.defineProperty){if(!a(function(){var e=!S.Reflect.defineProperty(1,"test",{value:1});var t=typeof Object.preventExtensions!=="function"||!S.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})){X(S.Reflect,"defineProperty",dn.defineProperty)}}if(S.Reflect.construct){if(!a(function(){var e=function F(){};return S.Reflect.construct(function(){},[],e)instanceof e})){X(S.Reflect,"construct",dn.construct)}}if(String(new Date(NaN))!=="Invalid Date"){var En=Date.prototype.toString;var Pn=function toString(){var e=+this;if(e!==e){return"Invalid Date"}return te.Call(En,this)};X(Date.prototype,"toString",Pn)}var Mn={anchor:function anchor(e){return te.CreateHTML(this,"a","name",e)},big:function big(){return te.CreateHTML(this,"big","","")},blink:function blink(){return te.CreateHTML(this,"blink","","")},bold:function bold(){return te.CreateHTML(this,"b","","")},fixed:function fixed(){return te.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(e){return te.CreateHTML(this,"font","color",e)},fontsize:function fontsize(e){return te.CreateHTML(this,"font","size",e)},italics:function italics(){return te.CreateHTML(this,"i","","")},link:function link(e){return te.CreateHTML(this,"a","href",e)},small:function small(){return te.CreateHTML(this,"small","","")},strike:function strike(){return te.CreateHTML(this,"strike","","")},sub:function sub(){return te.CreateHTML(this,"sub","","")},sup:function sub(){return te.CreateHTML(this,"sup","","")}};l(Object.keys(Mn),function(e){var r=String.prototype[e];var n=false;if(te.IsCallable(r)){var o=t(r,"",' " ');var i=P([],o.match(/"/g)).length;n=o!==o.toLowerCase()||i>2}else{n=true}if(n){X(String.prototype,e,Mn[e])}});var Cn=function(){if(!Z){return false}var e=typeof JSON==="object"&&typeof JSON.stringify==="function"?JSON.stringify:null;if(!e){return false}if(typeof e(W())!=="undefined"){return true}if(e([W()])!=="[null]"){return true}var t={a:W()};t[W()]=true;if(e(t)!=="{}"){return true}return false}();var xn=a(function(){if(!Z){return true}return JSON.stringify(Object(W()))==="{}"&&JSON.stringify([Object(W())])==="[{}]"});if(Cn||!xn){var Nn=JSON.stringify;X(JSON,"stringify",function stringify(e){if(typeof e==="symbol"){return}var n;if(arguments.length>1){n=arguments[1]}var o=[e];if(!r(n)){var i=te.IsCallable(n)?n:null;var a=function(e,r){var n=i?t(i,this,e,r):r;if(typeof n!=="symbol"){if(K.symbol(n)){return Tt({})(n)}else{return n}}};o.push(a)}else{o.push(n)}if(arguments.length>2){o.push(arguments[2])}return Nn.apply(this,o)})}return S});
/*! jQuery v2.2.1 | (c) jQuery Foundation | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=a.document,e=c.slice,f=c.concat,g=c.push,h=c.indexOf,i={},j=i.toString,k=i.hasOwnProperty,l={},m="2.2.1",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return e.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:e.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a){return n.each(this,a)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(e.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor()},push:g,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){var b=a&&a.toString();return!n.isArray(a)&&b-parseFloat(b)+1>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!k.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?i[j.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=d.createElement("script"),b.text=a,d.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b){var c,d=0;if(s(a)){for(c=a.length;c>d;d++)if(b.call(a[d],d,a[d])===!1)break}else for(d in a)if(b.call(a[d],d,a[d])===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):g.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:h.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,e,g=0,h=[];if(s(a))for(d=a.length;d>g;g++)e=b(a[g],g,c),null!=e&&h.push(e);else for(g in a)e=b(a[g],g,c),null!=e&&h.push(e);return f.apply([],h)},guid:1,proxy:function(a,b){var c,d,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(d=e.call(arguments,2),f=function(){return a.apply(b||this,d.concat(e.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:l}),"function"==typeof Symbol&&(n.fn[Symbol.iterator]=c[Symbol.iterator]),n.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){i["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=!!a&&"length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ga(),z=ga(),A=ga(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+L+"*\\]",O=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+N+")*)|.*)\\)|)",P=new RegExp(L+"+","g"),Q=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),R=new RegExp("^"+L+"*,"+L+"*"),S=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),T=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),U=new RegExp(O),V=new RegExp("^"+M+"$"),W={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,_=/[+~]/,aa=/'|\\/g,ba=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ca=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},da=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(ea){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fa(a,b,d,e){var f,h,j,k,l,o,r,s,w=b&&b.ownerDocument,x=b?b.nodeType:9;if(d=d||[],"string"!=typeof a||!a||1!==x&&9!==x&&11!==x)return d;if(!e&&((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,p)){if(11!==x&&(o=$.exec(a)))if(f=o[1]){if(9===x){if(!(j=b.getElementById(f)))return d;if(j.id===f)return d.push(j),d}else if(w&&(j=w.getElementById(f))&&t(b,j)&&j.id===f)return d.push(j),d}else{if(o[2])return H.apply(d,b.getElementsByTagName(a)),d;if((f=o[3])&&c.getElementsByClassName&&b.getElementsByClassName)return H.apply(d,b.getElementsByClassName(f)),d}if(c.qsa&&!A[a+" "]&&(!q||!q.test(a))){if(1!==x)w=b,s=a;else if("object"!==b.nodeName.toLowerCase()){(k=b.getAttribute("id"))?k=k.replace(aa,"\\$&"):b.setAttribute("id",k=u),r=g(a),h=r.length,l=V.test(k)?"#"+k:"[id='"+k+"']";while(h--)r[h]=l+" "+qa(r[h]);s=r.join(","),w=_.test(a)&&oa(b.parentNode)||b}if(s)try{return H.apply(d,w.querySelectorAll(s)),d}catch(y){}finally{k===u&&b.removeAttribute("id")}}}return i(a.replace(Q,"$1"),b,d,e)}function ga(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ha(a){return a[u]=!0,a}function ia(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ja(a,b){var c=a.split("|"),e=c.length;while(e--)d.attrHandle[c[e]]=b}function ka(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function la(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function na(a){return ha(function(b){return b=+b,ha(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function oa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=fa.support={},f=fa.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fa.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=n.documentElement,p=!f(n),(e=n.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",da,!1):e.attachEvent&&e.attachEvent("onunload",da)),c.attributes=ia(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ia(function(a){return a.appendChild(n.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Z.test(n.getElementsByClassName),c.getById=ia(function(a){return o.appendChild(a).id=u,!n.getElementsByName||!n.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ba,ca);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=Z.test(n.querySelectorAll))&&(ia(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\r\\' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ia(function(a){var b=n.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=Z.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ia(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",O)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=Z.test(o.compareDocumentPosition),t=b||Z.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===n||a.ownerDocument===v&&t(v,a)?-1:b===n||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,g=[a],h=[b];if(!e||!f)return a===n?-1:b===n?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return ka(a,b);c=a;while(c=c.parentNode)g.unshift(c);c=b;while(c=c.parentNode)h.unshift(c);while(g[d]===h[d])d++;return d?ka(g[d],h[d]):g[d]===v?-1:h[d]===v?1:0},n):n},fa.matches=function(a,b){return fa(a,null,null,b)},fa.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(T,"='$1']"),c.matchesSelector&&p&&!A[b+" "]&&(!r||!r.test(b))&&(!q||!q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fa(b,n,null,[a]).length>0},fa.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fa.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fa.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fa.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fa.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fa.selectors={cacheLength:50,createPseudo:ha,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ba,ca),a[3]=(a[3]||a[4]||a[5]||"").replace(ba,ca),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fa.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fa.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return W.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&U.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ba,ca).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fa.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(P," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h,t=!1;if(q){if(f){while(p){m=b;while(m=m[p])if(h?m.nodeName.toLowerCase()===r:1===m.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){m=q,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n&&j[2],m=n&&q.childNodes[n];while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if(1===m.nodeType&&++t&&m===b){k[a]=[w,n,t];break}}else if(s&&(m=b,l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),j=k[a]||[],n=j[0]===w&&j[1],t=n),t===!1)while(m=++n&&m&&m[p]||(t=n=0)||o.pop())if((h?m.nodeName.toLowerCase()===r:1===m.nodeType)&&++t&&(s&&(l=m[u]||(m[u]={}),k=l[m.uniqueID]||(l[m.uniqueID]={}),k[a]=[w,t]),m===b))break;return t-=e,t===d||t%d===0&&t/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fa.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ha(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ha(function(a){var b=[],c=[],d=h(a.replace(Q,"$1"));return d[u]?ha(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ha(function(a){return function(b){return fa(a,b).length>0}}),contains:ha(function(a){return a=a.replace(ba,ca),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ha(function(a){return V.test(a||"")||fa.error("unsupported lang: "+a),a=a.replace(ba,ca).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Y.test(a.nodeName)},input:function(a){return X.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:na(function(){return[0]}),last:na(function(a,b){return[b-1]}),eq:na(function(a,b,c){return[0>c?c+b:c]}),even:na(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:na(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:na(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:na(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=la(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=ma(b);function pa(){}pa.prototype=d.filters=d.pseudos,d.setFilters=new pa,g=fa.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=R.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=S.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(Q," ")}),h=h.slice(c.length));for(g in d.filter)!(e=W[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fa.error(a):z(a,i).slice(0)};function qa(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function ra(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(j=b[u]||(b[u]={}),i=j[b.uniqueID]||(j[b.uniqueID]={}),(h=i[d])&&h[0]===w&&h[1]===f)return k[2]=h[2];if(i[d]=k,k[2]=a(b,c,g))return!0}}}function sa(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ta(a,b,c){for(var d=0,e=b.length;e>d;d++)fa(a,b[d],c);return c}function ua(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function va(a,b,c,d,e,f){return d&&!d[u]&&(d=va(d)),e&&!e[u]&&(e=va(e,f)),ha(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ta(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ua(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ua(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ua(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function wa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=ra(function(a){return a===b},h,!0),l=ra(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[ra(sa(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return va(i>1&&sa(m),i>1&&qa(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(Q,"$1"),c,e>i&&wa(a.slice(i,e)),f>e&&wa(a=a.slice(e)),f>e&&qa(a))}m.push(c)}return sa(m)}function xa(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,o,q,r=0,s="0",t=f&&[],u=[],v=j,x=f||e&&d.find.TAG("*",k),y=w+=null==v?1:Math.random()||.1,z=x.length;for(k&&(j=g===n||g||k);s!==z&&null!=(l=x[s]);s++){if(e&&l){o=0,g||l.ownerDocument===n||(m(l),h=!p);while(q=a[o++])if(q(l,g||n,h)){i.push(l);break}k&&(w=y)}c&&((l=!q&&l)&&r--,f&&t.push(l))}if(r+=s,c&&s!==r){o=0;while(q=b[o++])q(t,u,g,h);if(f){if(r>0)while(s--)t[s]||u[s]||(u[s]=F.call(i));u=ua(u)}H.apply(i,u),k&&!f&&u.length>0&&r+b.length>1&&fa.uniqueSort(i)}return k&&(w=y,j=v),t};return c?ha(f):f}return h=fa.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xa(e,d)),f.selector=a}return f},i=fa.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ba,ca),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=W.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ba,ca),_.test(j[0].type)&&oa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qa(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,!b||_.test(a)&&oa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ia(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ia(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ja("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ia(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ja("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ia(function(a){return null==a.getAttribute("disabled")})||ja(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fa}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.uniqueSort=n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},v=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},w=n.expr.match.needsContext,x=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,y=/^.[^:#\[\.,]*$/;function z(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(y.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return h.call(b,a)>-1!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(z(this,a||[],!1))},not:function(a){return this.pushStack(z(this,a||[],!0))},is:function(a){return!!z(this,"string"==typeof a&&w.test(a)?n(a):a||[],!1).length}});var A,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=n.fn.init=function(a,b,c){var e,f;if(!a)return this;if(c=c||A,"string"==typeof a){if(e="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:B.exec(a),!e||!e[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(e[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:d,!0)),x.test(e[1])&&n.isPlainObject(b))for(e in b)n.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e]);return this}return f=d.getElementById(e[2]),f&&f.parentNode&&(this.length=1,this[0]=f),this.context=d,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?void 0!==c.ready?c.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};C.prototype=n.fn,A=n(d);var D=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=w.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.uniqueSort(f):f)},index:function(a){return a?"string"==typeof a?h.call(n(a),this[0]):h.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.uniqueSort(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function F(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return u(a,"parentNode")},parentsUntil:function(a,b,c){return u(a,"parentNode",c)},next:function(a){return F(a,"nextSibling")},prev:function(a){return F(a,"previousSibling")},nextAll:function(a){return u(a,"nextSibling")},prevAll:function(a){return u(a,"previousSibling")},nextUntil:function(a,b,c){return u(a,"nextSibling",c)},prevUntil:function(a,b,c){return u(a,"previousSibling",c)},siblings:function(a){return v((a.parentNode||{}).firstChild,a)},children:function(a){return v(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(E[a]||n.uniqueSort(e),D.test(a)&&e.reverse()),this.pushStack(e)}});var G=/\S+/g;function H(a){var b={};return n.each(a.match(G)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?H(a):n.extend({},a);var b,c,d,e,f=[],g=[],h=-1,i=function(){for(e=a.once,d=b=!0;g.length;h=-1){c=g.shift();while(++h<f.length)f[h].apply(c[0],c[1])===!1&&a.stopOnFalse&&(h=f.length,c=!1)}a.memory||(c=!1),b=!1,e&&(f=c?[]:"")},j={add:function(){return f&&(c&&!b&&(h=f.length-1,g.push(c)),function d(b){n.each(b,function(b,c){n.isFunction(c)?a.unique&&j.has(c)||f.push(c):c&&c.length&&"string"!==n.type(c)&&d(c)})}(arguments),c&&!b&&i()),this},remove:function(){return n.each(arguments,function(a,b){var c;while((c=n.inArray(b,f,c))>-1)f.splice(c,1),h>=c&&h--}),this},has:function(a){return a?n.inArray(a,f)>-1:f.length>0},empty:function(){return f&&(f=[]),this},disable:function(){return e=g=[],f=c="",this},disabled:function(){return!f},lock:function(){return e=g=[],c||(f=c=""),this},locked:function(){return!!e},fireWith:function(a,c){return e||(c=c||[],c=[a,c.slice?c.slice():c],g.push(c),b||i()),this},fire:function(){return j.fireWith(this,arguments),this},fired:function(){return!!d}};return j},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().progress(c.notify).done(c.resolve).fail(c.reject):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=e.call(arguments),d=c.length,f=1!==d||a&&n.isFunction(a.promise)?d:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?e.call(arguments):d,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(d>1)for(i=new Array(d),j=new Array(d),k=new Array(d);d>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().progress(h(b,j,i)).done(h(b,k,c)).fail(g.reject):--f;return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(d,[n]),n.fn.triggerHandler&&(n(d).triggerHandler("ready"),n(d).off("ready"))))}});function J(){d.removeEventListener("DOMContentLoaded",J),a.removeEventListener("load",J),n.ready()}n.ready.promise=function(b){return I||(I=n.Deferred(),"complete"===d.readyState||"loading"!==d.readyState&&!d.documentElement.doScroll?a.setTimeout(n.ready):(d.addEventListener("DOMContentLoaded",J),a.addEventListener("load",J))),I.promise(b)},n.ready.promise();var K=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)K(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},L=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function M(){this.expando=n.expando+M.uid++}M.uid=1,M.prototype={register:function(a,b){var c=b||{};return a.nodeType?a[this.expando]=c:Object.defineProperty(a,this.expando,{value:c,writable:!0,configurable:!0}),a[this.expando]},cache:function(a){if(!L(a))return{};var b=a[this.expando];return b||(b={},L(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0}))),b},set:function(a,b,c){var d,e=this.cache(a);if("string"==typeof b)e[b]=c;else for(d in b)e[d]=b[d];return e},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=a[this.expando];if(void 0!==f){if(void 0===b)this.register(a);else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in f?d=[b,e]:(d=e,d=d in f?[d]:d.match(G)||[])),c=d.length;while(c--)delete f[d[c]]}(void 0===b||n.isEmptyObject(f))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(a){var b=a[this.expando];return void 0!==b&&!n.isEmptyObject(b)}};var N=new M,O=new M,P=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function R(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(Q,"-$&").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:P.test(c)?n.parseJSON(c):c}catch(e){}O.set(a,b,c);
}else c=void 0;return c}n.extend({hasData:function(a){return O.hasData(a)||N.hasData(a)},data:function(a,b,c){return O.access(a,b,c)},removeData:function(a,b){O.remove(a,b)},_data:function(a,b,c){return N.access(a,b,c)},_removeData:function(a,b){N.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=O.get(f),1===f.nodeType&&!N.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),R(f,d,e[d])));N.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){O.set(this,a)}):K(this,function(b){var c,d;if(f&&void 0===b){if(c=O.get(f,a)||O.get(f,a.replace(Q,"-$&").toLowerCase()),void 0!==c)return c;if(d=n.camelCase(a),c=O.get(f,d),void 0!==c)return c;if(c=R(f,d,void 0),void 0!==c)return c}else d=n.camelCase(a),this.each(function(){var c=O.get(this,d);O.set(this,d,b),a.indexOf("-")>-1&&void 0!==c&&O.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){O.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=N.get(a,b),c&&(!d||n.isArray(c)?d=N.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return N.get(a,c)||N.access(a,c,{empty:n.Callbacks("once memory").add(function(){N.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=N.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),U=["Top","Right","Bottom","Left"],V=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)};function W(a,b,c,d){var e,f=1,g=20,h=d?function(){return d.cur()}:function(){return n.css(a,b,"")},i=h(),j=c&&c[3]||(n.cssNumber[b]?"":"px"),k=(n.cssNumber[b]||"px"!==j&&+i)&&T.exec(n.css(a,b));if(k&&k[3]!==j){j=j||k[3],c=c||[],k=+i||1;do f=f||".5",k/=f,n.style(a,b,k+j);while(f!==(f=h()/i)&&1!==f&&--g)}return c&&(k=+k||+i||0,e=c[1]?k+(c[1]+1)*c[2]:+c[2],d&&(d.unit=j,d.start=k,d.end=e)),e}var X=/^(?:checkbox|radio)$/i,Y=/<([\w:-]+)/,Z=/^$|\/(?:java|ecma)script/i,$={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};$.optgroup=$.option,$.tbody=$.tfoot=$.colgroup=$.caption=$.thead,$.th=$.td;function _(a,b){var c="undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function aa(a,b){for(var c=0,d=a.length;d>c;c++)N.set(a[c],"globalEval",!b||N.get(b[c],"globalEval"))}var ba=/<|&#?\w+;/;function ca(a,b,c,d,e){for(var f,g,h,i,j,k,l=b.createDocumentFragment(),m=[],o=0,p=a.length;p>o;o++)if(f=a[o],f||0===f)if("object"===n.type(f))n.merge(m,f.nodeType?[f]:f);else if(ba.test(f)){g=g||l.appendChild(b.createElement("div")),h=(Y.exec(f)||["",""])[1].toLowerCase(),i=$[h]||$._default,g.innerHTML=i[1]+n.htmlPrefilter(f)+i[2],k=i[0];while(k--)g=g.lastChild;n.merge(m,g.childNodes),g=l.firstChild,g.textContent=""}else m.push(b.createTextNode(f));l.textContent="",o=0;while(f=m[o++])if(d&&n.inArray(f,d)>-1)e&&e.push(f);else if(j=n.contains(f.ownerDocument,f),g=_(l.appendChild(f),"script"),j&&aa(g),c){k=0;while(f=g[k++])Z.test(f.type||"")&&c.push(f)}return l}!function(){var a=d.createDocumentFragment(),b=a.appendChild(d.createElement("div")),c=d.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),l.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var da=/^key/,ea=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,fa=/^([^.]*)(?:\.(.+)|)/;function ga(){return!0}function ha(){return!1}function ia(){try{return d.activeElement}catch(a){}}function ja(a,b,c,d,e,f){var g,h;if("object"==typeof b){"string"!=typeof c&&(d=d||c,c=void 0);for(h in b)ja(a,h,c,d,b[h],f);return a}if(null==d&&null==e?(e=c,d=c=void 0):null==e&&("string"==typeof c?(e=d,d=void 0):(e=d,d=c,c=void 0)),e===!1)e=ha;else if(!e)return a;return 1===f&&(g=e,e=function(a){return n().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=n.guid++)),a.each(function(){n.event.add(this,b,e,d,c)})}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=N.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return"undefined"!=typeof n&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(G)||[""],j=b.length;while(j--)h=fa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=N.hasData(a)&&N.get(a);if(r&&(i=r.events)){b=(b||"").match(G)||[""],j=b.length;while(j--)if(h=fa.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&N.remove(a,"handle events")}},dispatch:function(a){a=n.event.fix(a);var b,c,d,f,g,h=[],i=e.call(arguments),j=(N.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.rnamespace||a.rnamespace.test(g.namespace))&&(a.handleObj=g,a.data=g.data,d=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&("click"!==a.type||isNaN(a.button)||a.button<1))for(;i!==this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>-1:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,e,f,g=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||d,e=c.documentElement,f=c.body,a.pageX=b.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)),a.which||void 0===g||(a.which=1&g?1:2&g?3:4&g?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,e,f=a.type,g=a,h=this.fixHooks[f];h||(this.fixHooks[f]=h=ea.test(f)?this.mouseHooks:da.test(f)?this.keyHooks:{}),e=h.props?this.props.concat(h.props):this.props,a=new n.Event(g),b=e.length;while(b--)c=e[b],a[c]=g[c];return a.target||(a.target=d),3===a.target.nodeType&&(a.target=a.target.parentNode),h.filter?h.filter(a,g):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==ia()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===ia()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ga:ha):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={constructor:n.Event,isDefaultPrevented:ha,isPropagationStopped:ha,isImmediatePropagationStopped:ha,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ga,a&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ga,a&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ga,a&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),n.fn.extend({on:function(a,b,c,d){return ja(this,a,b,c,d)},one:function(a,b,c,d){return ja(this,a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=ha),this.each(function(){n.event.remove(this,a,c,b)})}});var ka=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,la=/<script|<style|<link/i,ma=/checked\s*(?:[^=]|=\s*.checked.)/i,na=/^true\/(.*)/,oa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function pa(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function qa(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function ra(a){var b=na.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function sa(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(N.hasData(a)&&(f=N.access(a),g=N.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}O.hasData(a)&&(h=O.access(a),i=n.extend({},h),O.set(b,i))}}function ta(a,b){var c=b.nodeName.toLowerCase();"input"===c&&X.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}function ua(a,b,c,d){b=f.apply([],b);var e,g,h,i,j,k,m=0,o=a.length,p=o-1,q=b[0],r=n.isFunction(q);if(r||o>1&&"string"==typeof q&&!l.checkClone&&ma.test(q))return a.each(function(e){var f=a.eq(e);r&&(b[0]=q.call(this,e,f.html())),ua(f,b,c,d)});if(o&&(e=ca(b,a[0].ownerDocument,!1,a,d),g=e.firstChild,1===e.childNodes.length&&(e=g),g||d)){for(h=n.map(_(e,"script"),qa),i=h.length;o>m;m++)j=e,m!==p&&(j=n.clone(j,!0,!0),i&&n.merge(h,_(j,"script"))),c.call(a[m],j,m);if(i)for(k=h[h.length-1].ownerDocument,n.map(h,ra),m=0;i>m;m++)j=h[m],Z.test(j.type||"")&&!N.access(j,"globalEval")&&n.contains(k,j)&&(j.src?n._evalUrl&&n._evalUrl(j.src):n.globalEval(j.textContent.replace(oa,"")))}return a}function va(a,b,c){for(var d,e=b?n.filter(b,a):a,f=0;null!=(d=e[f]);f++)c||1!==d.nodeType||n.cleanData(_(d)),d.parentNode&&(c&&n.contains(d.ownerDocument,d)&&aa(_(d,"script")),d.parentNode.removeChild(d));return a}n.extend({htmlPrefilter:function(a){return a.replace(ka,"<$1></$2>")},clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=_(h),f=_(a),d=0,e=f.length;e>d;d++)ta(f[d],g[d]);if(b)if(c)for(f=f||_(a),g=g||_(h),d=0,e=f.length;e>d;d++)sa(f[d],g[d]);else sa(a,h);return g=_(h,"script"),g.length>0&&aa(g,!i&&_(a,"script")),h},cleanData:function(a){for(var b,c,d,e=n.event.special,f=0;void 0!==(c=a[f]);f++)if(L(c)){if(b=c[N.expando]){if(b.events)for(d in b.events)e[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);c[N.expando]=void 0}c[O.expando]&&(c[O.expando]=void 0)}}}),n.fn.extend({domManip:ua,detach:function(a){return va(this,a,!0)},remove:function(a){return va(this,a)},text:function(a){return K(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return ua(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=pa(this,a);b.appendChild(a)}})},prepend:function(){return ua(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=pa(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return ua(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return ua(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(_(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return K(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!la.test(a)&&!$[(Y.exec(a)||["",""])[1].toLowerCase()]){a=n.htmlPrefilter(a);try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(_(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=[];return ua(this,arguments,function(b){var c=this.parentNode;n.inArray(this,a)<0&&(n.cleanData(_(this)),c&&c.replaceChild(b,this))},a)}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),f=e.length-1,h=0;f>=h;h++)c=h===f?this:this.clone(!0),n(e[h])[b](c),g.apply(d,c.get());return this.pushStack(d)}});var wa,xa={HTML:"block",BODY:"block"};function ya(a,b){var c=n(b.createElement(a)).appendTo(b.body),d=n.css(c[0],"display");return c.detach(),d}function za(a){var b=d,c=xa[a];return c||(c=ya(a,b),"none"!==c&&c||(wa=(wa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=wa[0].contentDocument,b.write(),b.close(),c=ya(a,b),wa.detach()),xa[a]=c),c}var Aa=/^margin/,Ba=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ca=function(b){var c=b.ownerDocument.defaultView;return c&&c.opener||(c=a),c.getComputedStyle(b)},Da=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},Ea=d.documentElement;!function(){var b,c,e,f,g=d.createElement("div"),h=d.createElement("div");if(h.style){h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===h.style.backgroundClip,g.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",g.appendChild(h);function i(){h.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",h.innerHTML="",Ea.appendChild(g);var d=a.getComputedStyle(h);b="1%"!==d.top,f="2px"===d.marginLeft,c="4px"===d.width,h.style.marginRight="50%",e="4px"===d.marginRight,Ea.removeChild(g)}n.extend(l,{pixelPosition:function(){return i(),b},boxSizingReliable:function(){return null==c&&i(),c},pixelMarginRight:function(){return null==c&&i(),e},reliableMarginLeft:function(){return null==c&&i(),f},reliableMarginRight:function(){var b,c=h.appendChild(d.createElement("div"));return c.style.cssText=h.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",h.style.width="1px",Ea.appendChild(g),b=!parseFloat(a.getComputedStyle(c).marginRight),Ea.removeChild(g),h.removeChild(c),b}})}}();function Fa(a,b,c){var d,e,f,g,h=a.style;return c=c||Ca(a),g=c?c.getPropertyValue(b)||c[b]:void 0,""!==g&&void 0!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),c&&!l.pixelMarginRight()&&Ba.test(g)&&Aa.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f),void 0!==g?g+"":g}function Ga(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}var Ha=/^(none|table(?!-c[ea]).+)/,Ia={position:"absolute",visibility:"hidden",display:"block"},Ja={letterSpacing:"0",fontWeight:"400"},Ka=["Webkit","O","Moz","ms"],La=d.createElement("div").style;function Ma(a){if(a in La)return a;var b=a[0].toUpperCase()+a.slice(1),c=Ka.length;while(c--)if(a=Ka[c]+b,a in La)return a}function Na(a,b,c){var d=T.exec(b);return d?Math.max(0,d[2]-(c||0))+(d[3]||"px"):b}function Oa(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+U[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+U[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+U[f]+"Width",!0,e))):(g+=n.css(a,"padding"+U[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+U[f]+"Width",!0,e)));return g}function Pa(b,c,e){var f=!0,g="width"===c?b.offsetWidth:b.offsetHeight,h=Ca(b),i="border-box"===n.css(b,"boxSizing",!1,h);if(d.msFullscreenElement&&a.top!==a&&b.getClientRects().length&&(g=Math.round(100*b.getBoundingClientRect()[c])),0>=g||null==g){if(g=Fa(b,c,h),(0>g||null==g)&&(g=b.style[c]),Ba.test(g))return g;f=i&&(l.boxSizingReliable()||g===b.style[c]),g=parseFloat(g)||0}return g+Oa(b,c,e||(i?"border":"content"),f,h)+"px"}function Qa(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=N.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&V(d)&&(f[g]=N.access(d,"olddisplay",za(d.nodeName)))):(e=V(d),"none"===c&&e||N.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Fa(a,"opacity");return""===c?"1":c}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Ma(h)||h),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=T.exec(c))&&e[1]&&(c=W(a,b,e),f="number"),null!=c&&c===c&&("number"===f&&(c+=e&&e[3]||(n.cssNumber[h]?"":"px")),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Ma(h)||h),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=Fa(a,b,d)),"normal"===e&&b in Ja&&(e=Ja[b]),""===c||c?(f=parseFloat(e),c===!0||isFinite(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?Ha.test(n.css(a,"display"))&&0===a.offsetWidth?Da(a,Ia,function(){return Pa(a,b,d)}):Pa(a,b,d):void 0},set:function(a,c,d){var e,f=d&&Ca(a),g=d&&Oa(a,b,d,"border-box"===n.css(a,"boxSizing",!1,f),f);return g&&(e=T.exec(c))&&"px"!==(e[3]||"px")&&(a.style[b]=c,c=n.css(a,b)),Na(a,c,g)}}}),n.cssHooks.marginLeft=Ga(l.reliableMarginLeft,function(a,b){return b?(parseFloat(Fa(a,"marginLeft"))||a.getBoundingClientRect().left-Da(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px":void 0}),n.cssHooks.marginRight=Ga(l.reliableMarginRight,function(a,b){return b?Da(a,{display:"inline-block"},Fa,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+U[d]+b]=f[d]||f[d-2]||f[0];return e}},Aa.test(a)||(n.cssHooks[a+b].set=Na)}),n.fn.extend({css:function(a,b){return K(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Ca(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Qa(this,!0)},hide:function(){return Qa(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){V(this)?n(this).show():n(this).hide()})}});function Ra(a,b,c,d,e){return new Ra.prototype.init(a,b,c,d,e)}n.Tween=Ra,Ra.prototype={constructor:Ra,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||n.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Ra.propHooks[this.prop];return a&&a.get?a.get(this):Ra.propHooks._default.get(this)},run:function(a){var b,c=Ra.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ra.propHooks._default.set(this),this}},Ra.prototype.init.prototype=Ra.prototype,Ra.propHooks={_default:{get:function(a){var b;return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0)},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):1!==a.elem.nodeType||null==a.elem.style[n.cssProps[a.prop]]&&!n.cssHooks[a.prop]?a.elem[a.prop]=a.now:n.style(a.elem,a.prop,a.now+a.unit)}}},Ra.propHooks.scrollTop=Ra.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"},n.fx=Ra.prototype.init,n.fx.step={};var Sa,Ta,Ua=/^(?:toggle|show|hide)$/,Va=/queueHooks$/;function Wa(){return a.setTimeout(function(){Sa=void 0}),Sa=n.now()}function Xa(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=U[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ya(a,b,c){for(var d,e=(_a.tweeners[b]||[]).concat(_a.tweeners["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Za(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&V(a),q=N.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?N.get(a,"olddisplay")||za(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Ua.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?za(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=N.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;N.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ya(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function $a(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function _a(a,b,c){var d,e,f=0,g=_a.prefilters.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Sa||Wa(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{},easing:n.easing._default},c),originalProperties:b,originalOptions:c,startTime:Sa||Wa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?(h.notifyWith(a,[j,1,0]),h.resolveWith(a,[j,b])):h.rejectWith(a,[j,b]),this}}),k=j.props;for($a(k,j.opts.specialEasing);g>f;f++)if(d=_a.prefilters[f].call(j,a,k,j.opts))return n.isFunction(d.stop)&&(n._queueHooks(j.elem,j.opts.queue).stop=n.proxy(d.stop,d)),d;return n.map(k,Ya,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(_a,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);return W(c.elem,a,T.exec(b),c),c}]},tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.match(G);for(var c,d=0,e=a.length;e>d;d++)c=a[d],_a.tweeners[c]=_a.tweeners[c]||[],_a.tweeners[c].unshift(b)},prefilters:[Za],prefilter:function(a,b){b?_a.prefilters.unshift(a):_a.prefilters.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(V).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=_a(this,n.extend({},a),f);(e||N.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=N.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Va.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=N.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Xa(b,!0),a,d,e)}}),n.each({slideDown:Xa("show"),slideUp:Xa("hide"),slideToggle:Xa("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Sa=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Sa=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ta||(Ta=a.setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){a.clearInterval(Ta),Ta=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(b,c){return b=n.fx?n.fx.speeds[b]||b:b,c=c||"fx",this.queue(c,function(c,d){var e=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(e)}})},function(){var a=d.createElement("input"),b=d.createElement("select"),c=b.appendChild(d.createElement("option"));a.type="checkbox",l.checkOn=""!==a.value,l.optSelected=c.selected,b.disabled=!0,l.optDisabled=!c.disabled,a=d.createElement("input"),a.value="t",a.type="radio",l.radioValue="t"===a.value}();var ab,bb=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return K(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return"undefined"==typeof a.getAttribute?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),e=n.attrHooks[b]||(n.expr.match.bool.test(b)?ab:void 0)),void 0!==c?null===c?void n.removeAttr(a,b):e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:(a.setAttribute(b,c+""),c):e&&"get"in e&&null!==(d=e.get(a,b))?d:(d=n.find.attr(a,b),null==d?void 0:d))},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(G);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)}}),ab={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=bb[b]||n.find.attr;bb[b]=function(a,b,d){var e,f;return d||(f=bb[b],bb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,bb[b]=f),e}});var cb=/^(?:input|select|textarea|button)$/i,db=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return K(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({prop:function(a,b,c){var d,e,f=a.nodeType;if(3!==f&&8!==f&&2!==f)return 1===f&&n.isXMLDoc(a)||(b=n.propFix[b]||b,
e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):cb.test(a.nodeName)||db.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var eb=/[\t\r\n\f]/g;function fb(a){return a.getAttribute&&a.getAttribute("class")||""}n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,fb(this)))});if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=fb(c),d=1===c.nodeType&&(" "+e+" ").replace(eb," ")){g=0;while(f=b[g++])d.indexOf(" "+f+" ")<0&&(d+=f+" ");h=n.trim(d),e!==h&&c.setAttribute("class",h)}}return this},removeClass:function(a){var b,c,d,e,f,g,h,i=0;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,fb(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof a&&a){b=a.match(G)||[];while(c=this[i++])if(e=fb(c),d=1===c.nodeType&&(" "+e+" ").replace(eb," ")){g=0;while(f=b[g++])while(d.indexOf(" "+f+" ")>-1)d=d.replace(" "+f+" "," ");h=n.trim(d),e!==h&&c.setAttribute("class",h)}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):n.isFunction(a)?this.each(function(c){n(this).toggleClass(a.call(this,c,fb(this),b),b)}):this.each(function(){var b,d,e,f;if("string"===c){d=0,e=n(this),f=a.match(G)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(void 0===a||"boolean"===c)&&(b=fb(this),b&&N.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",b||a===!1?"":N.get(this,"__className__")||""))})},hasClass:function(a){var b,c,d=0;b=" "+a+" ";while(c=this[d++])if(1===c.nodeType&&(" "+fb(c)+" ").replace(eb," ").indexOf(b)>-1)return!0;return!1}});var gb=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(gb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){return n.trim(a.value)}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(l.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(n.valHooks.option.get(d),f)>-1)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>-1:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var hb=/^(?:focusinfocus|focusoutblur)$/;n.extend(n.event,{trigger:function(b,c,e,f){var g,h,i,j,l,m,o,p=[e||d],q=k.call(b,"type")?b.type:b,r=k.call(b,"namespace")?b.namespace.split("."):[];if(h=i=e=e||d,3!==e.nodeType&&8!==e.nodeType&&!hb.test(q+n.event.triggered)&&(q.indexOf(".")>-1&&(r=q.split("."),q=r.shift(),r.sort()),l=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=r.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=e),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},f||!o.trigger||o.trigger.apply(e,c)!==!1)){if(!f&&!o.noBubble&&!n.isWindow(e)){for(j=o.delegateType||q,hb.test(j+q)||(h=h.parentNode);h;h=h.parentNode)p.push(h),i=h;i===(e.ownerDocument||d)&&p.push(i.defaultView||i.parentWindow||a)}g=0;while((h=p[g++])&&!b.isPropagationStopped())b.type=g>1?j:o.bindType||q,m=(N.get(h,"events")||{})[b.type]&&N.get(h,"handle"),m&&m.apply(h,c),m=l&&h[l],m&&m.apply&&L(h)&&(b.result=m.apply(h,c),b.result===!1&&b.preventDefault());return b.type=q,f||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!L(e)||l&&n.isFunction(e[q])&&!n.isWindow(e)&&(i=e[l],i&&(e[l]=null),n.event.triggered=q,e[q](),n.event.triggered=void 0,i&&(e[l]=i)),b.result}},simulate:function(a,b,c){var d=n.extend(new n.Event,c,{type:a,isSimulated:!0});n.event.trigger(d,null,b),d.isDefaultPrevented()&&c.preventDefault()}}),n.fn.extend({trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),l.focusin="onfocusin"in a,l.focusin||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a))};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=N.access(d,b);e||d.addEventListener(a,c,!0),N.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=N.access(d,b)-1;e?N.access(d,b,e):(d.removeEventListener(a,c,!0),N.remove(d,b))}}});var ib=a.location,jb=n.now(),kb=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(b){var c;if(!b||"string"!=typeof b)return null;try{c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(d){c=void 0}return(!c||c.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+b),c};var lb=/#.*$/,mb=/([?&])_=[^&]*/,nb=/^(.*?):[ \t]*([^\r\n]*)$/gm,ob=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,pb=/^(?:GET|HEAD)$/,qb=/^\/\//,rb={},sb={},tb="*/".concat("*"),ub=d.createElement("a");ub.href=ib.href;function vb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(G)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function wb(a,b,c,d){var e={},f=a===sb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function xb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function yb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function zb(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ib.href,type:"GET",isLocal:ob.test(ib.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":tb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?xb(xb(a,n.ajaxSettings),b):xb(n.ajaxSettings,a)},ajaxPrefilter:vb(rb),ajaxTransport:vb(sb),ajax:function(b,c){"object"==typeof b&&(c=b,b=void 0),c=c||{};var e,f,g,h,i,j,k,l,m=n.ajaxSetup({},c),o=m.context||m,p=m.context&&(o.nodeType||o.jquery)?n(o):n.event,q=n.Deferred(),r=n.Callbacks("once memory"),s=m.statusCode||{},t={},u={},v=0,w="canceled",x={readyState:0,getResponseHeader:function(a){var b;if(2===v){if(!h){h={};while(b=nb.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===v?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return v||(a=u[c]=u[c]||a,t[a]=b),this},overrideMimeType:function(a){return v||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>v)for(b in a)s[b]=[s[b],a[b]];else x.always(a[x.status]);return this},abort:function(a){var b=a||w;return e&&e.abort(b),z(0,b),this}};if(q.promise(x).complete=r.add,x.success=x.done,x.error=x.fail,m.url=((b||m.url||ib.href)+"").replace(lb,"").replace(qb,ib.protocol+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=n.trim(m.dataType||"*").toLowerCase().match(G)||[""],null==m.crossDomain){j=d.createElement("a");try{j.href=m.url,j.href=j.href,m.crossDomain=ub.protocol+"//"+ub.host!=j.protocol+"//"+j.host}catch(y){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=n.param(m.data,m.traditional)),wb(rb,m,c,x),2===v)return x;k=n.event&&m.global,k&&0===n.active++&&n.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!pb.test(m.type),f=m.url,m.hasContent||(m.data&&(f=m.url+=(kb.test(f)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=mb.test(f)?f.replace(mb,"$1_="+jb++):f+(kb.test(f)?"&":"?")+"_="+jb++)),m.ifModified&&(n.lastModified[f]&&x.setRequestHeader("If-Modified-Since",n.lastModified[f]),n.etag[f]&&x.setRequestHeader("If-None-Match",n.etag[f])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",m.contentType),x.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+tb+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)x.setRequestHeader(l,m.headers[l]);if(m.beforeSend&&(m.beforeSend.call(o,x,m)===!1||2===v))return x.abort();w="abort";for(l in{success:1,error:1,complete:1})x[l](m[l]);if(e=wb(sb,m,c,x)){if(x.readyState=1,k&&p.trigger("ajaxSend",[x,m]),2===v)return x;m.async&&m.timeout>0&&(i=a.setTimeout(function(){x.abort("timeout")},m.timeout));try{v=1,e.send(t,z)}catch(y){if(!(2>v))throw y;z(-1,y)}}else z(-1,"No Transport");function z(b,c,d,h){var j,l,t,u,w,y=c;2!==v&&(v=2,i&&a.clearTimeout(i),e=void 0,g=h||"",x.readyState=b>0?4:0,j=b>=200&&300>b||304===b,d&&(u=yb(m,x,d)),u=zb(m,u,x,j),j?(m.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(n.lastModified[f]=w),w=x.getResponseHeader("etag"),w&&(n.etag[f]=w)),204===b||"HEAD"===m.type?y="nocontent":304===b?y="notmodified":(y=u.state,l=u.data,t=u.error,j=!t)):(t=y,(b||!y)&&(y="error",0>b&&(b=0))),x.status=b,x.statusText=(c||y)+"",j?q.resolveWith(o,[l,y,x]):q.rejectWith(o,[x,y,t]),x.statusCode(s),s=void 0,k&&p.trigger(j?"ajaxSuccess":"ajaxError",[x,m,j?l:t]),r.fireWith(o,[x,y]),k&&(p.trigger("ajaxComplete",[x,m]),--n.active||n.event.trigger("ajaxStop")))}return x},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax(n.extend({url:a,type:b,dataType:e,data:c,success:d},n.isPlainObject(a)&&a))}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return n.isFunction(a)?this.each(function(b){n(this).wrapInner(a.call(this,b))}):this.each(function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return!n.expr.filters.visible(a)},n.expr.filters.visible=function(a){return a.offsetWidth>0||a.offsetHeight>0||a.getClientRects().length>0};var Ab=/%20/g,Bb=/\[\]$/,Cb=/\r?\n/g,Db=/^(?:submit|button|image|reset|file)$/i,Eb=/^(?:input|select|textarea|keygen)/i;function Fb(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||Bb.test(a)?d(a,e):Fb(a+"["+("object"==typeof e&&null!=e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Fb(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Fb(c,a[c],b,e);return d.join("&").replace(Ab,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Eb.test(this.nodeName)&&!Db.test(a)&&(this.checked||!X.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(Cb,"\r\n")}}):{name:b.name,value:c.replace(Cb,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(b){}};var Gb={0:200,1223:204},Hb=n.ajaxSettings.xhr();l.cors=!!Hb&&"withCredentials"in Hb,l.ajax=Hb=!!Hb,n.ajaxTransport(function(b){var c,d;return l.cors||Hb&&!b.crossDomain?{send:function(e,f){var g,h=b.xhr();if(h.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(g in b.xhrFields)h[g]=b.xhrFields[g];b.mimeType&&h.overrideMimeType&&h.overrideMimeType(b.mimeType),b.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");for(g in e)h.setRequestHeader(g,e[g]);c=function(a){return function(){c&&(c=d=h.onload=h.onerror=h.onabort=h.onreadystatechange=null,"abort"===a?h.abort():"error"===a?"number"!=typeof h.status?f(0,"error"):f(h.status,h.statusText):f(Gb[h.status]||h.status,h.statusText,"text"!==(h.responseType||"text")||"string"!=typeof h.responseText?{binary:h.response}:{text:h.responseText},h.getAllResponseHeaders()))}},h.onload=c(),d=h.onerror=c("error"),void 0!==h.onabort?h.onabort=d:h.onreadystatechange=function(){4===h.readyState&&a.setTimeout(function(){c&&d()})},c=c("abort");try{h.send(b.hasContent&&b.data||null)}catch(i){if(c)throw i}},abort:function(){c&&c()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(e,f){b=n("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&f("error"===a.type?404:200,a.type)}),d.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Ib=[],Jb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Ib.pop()||n.expando+"_"+jb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Jb.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Jb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Jb,"$1"+e):b.jsonp!==!1&&(b.url+=(kb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){void 0===f?n(a).removeProp(e):a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Ib.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),l.createHTMLDocument=function(){var a=d.implementation.createHTMLDocument("").body;return a.innerHTML="<form></form><form></form>",2===a.childNodes.length}(),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||(l.createHTMLDocument?d.implementation.createHTMLDocument(""):d);var e=x.exec(a),f=!c&&[];return e?[b.createElement(e[1])]:(e=ca([a],b,f),f&&f.length&&n(f).remove(),n.merge([],e.childNodes))};var Kb=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Kb)return Kb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>-1&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e||"GET",dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).always(c&&function(a,b){g.each(function(){c.apply(g,f||[a.responseText,b,a])})}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};function Lb(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,n.extend({},h))),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(e=d.getBoundingClientRect(),c=Lb(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent;while(a&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Ea})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;n.fn[a]=function(d){return K(this,function(a,d,e){var f=Lb(a);return void 0===e?f?f[b]:a[d]:void(f?f.scrollTo(c?f.pageXOffset:e,c?e:f.pageYOffset):a[d]=e)},a,d,arguments.length)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Ga(l.pixelPosition,function(a,c){return c?(c=Fa(a,b),Ba.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return K(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},size:function(){return this.length}}),n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Mb=a.jQuery,Nb=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Nb),b&&a.jQuery===n&&(a.jQuery=Mb),n},b||(a.jQuery=a.$=n),n});
/*
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date()-d,n=arguments;function l(){d=+new Date();j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);
/*!
 * imagesLoaded PACKAGED v4.1.0
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}(this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{},n=i[t]=i[t]||[];return-1==n.indexOf(e)&&n.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{},n=i[t]=i[t]||[];return n[e]=!0,this}},e.off=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=i.indexOf(e);return-1!=n&&i.splice(n,1),this}},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var n=0,o=i[n];e=e||[];for(var r=this._onceEvents&&this._onceEvents[t];o;){var s=r&&r[o];s&&(this.off(t,o),delete r[o]),o.apply(this,e),n+=s?0:1,o=i[n]}return this}},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return e(t,i)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.imagesLoaded=e(t,t.EvEmitter)}(window,function(t,e){function i(t,e){for(var i in e)t[i]=e[i];return t}function n(t){var e=[];if(Array.isArray(t))e=t;else if("number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e}function o(t,e,r){return this instanceof o?("string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=n(t),this.options=i({},this.options),"function"==typeof e?r=e:i(this.options,e),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(function(){this.check()}.bind(this))):new o(t,e,r)}function r(t){this.img=t}function s(t,e){this.url=t,this.element=e,this.img=new Image}var h=t.jQuery,a=t.console;o.prototype=Object.create(e.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),this.options.background===!0&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&d[e]){for(var i=t.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=t.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var d={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(e.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,t),n=i.exec(e.backgroundImage)}},o.prototype.addImage=function(t){var e=new r(t);this.images.push(e)},o.prototype.addBackground=function(t,e){var i=new s(t,e);this.images.push(i)},o.prototype.check=function(){function t(t,i,n){setTimeout(function(){e.progress(t,i,n)})}var e=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){e.once("progress",t),e.check()}):void this.complete()},o.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,t,e)},o.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},r.prototype=Object.create(e.prototype),r.prototype.check=function(){var t=this.getIsImageComplete();return t?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},r.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},r.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var t=this.getIsImageComplete();t&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},o.makeJQueryPlugin=function(e){e=e||t.jQuery,e&&(h=e,h.fn.imagesLoaded=function(t,e){var i=new o(this,t,e);return i.jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o});
/*! lz-string-1.3.3-min.js | (c) 2013 Pieroxy | Licensed under a WTFPL license */
var LZString={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(e==null)return"";var t="";var n,r,i,s,o,u,a;var f=0;e=LZString.compress(e);while(f<e.length*2){if(f%2==0){n=e.charCodeAt(f/2)>>8;r=e.charCodeAt(f/2)&255;if(f/2+1<e.length)i=e.charCodeAt(f/2+1)>>8;else i=NaN}else{n=e.charCodeAt((f-1)/2)&255;if((f+1)/2<e.length){r=e.charCodeAt((f+1)/2)>>8;i=e.charCodeAt((f+1)/2)&255}else r=i=NaN}f+=3;s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+LZString._keyStr.charAt(s)+LZString._keyStr.charAt(o)+LZString._keyStr.charAt(u)+LZString._keyStr.charAt(a)}return t},decompressFromBase64:function(e){if(e==null)return"";var t="",n=0,r,i,s,o,u,a,f,l,c=0,h=LZString._f;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<e.length){u=LZString._keyStr.indexOf(e.charAt(c++));a=LZString._keyStr.indexOf(e.charAt(c++));f=LZString._keyStr.indexOf(e.charAt(c++));l=LZString._keyStr.indexOf(e.charAt(c++));i=u<<2|a>>4;s=(a&15)<<4|f>>2;o=(f&3)<<6|l;if(n%2==0){r=i<<8;if(f!=64){t+=h(r|s)}if(l!=64){r=o<<8}}else{t=t+h(r|i);if(f!=64){r=s<<8}if(l!=64){t+=h(r|o)}}n+=3}return LZString.decompress(t)},compressToUTF16:function(e){if(e==null)return"";var t="",n,r,i,s=0,o=LZString._f;e=LZString.compress(e);for(n=0;n<e.length;n++){r=e.charCodeAt(n);switch(s++){case 0:t+=o((r>>1)+32);i=(r&1)<<14;break;case 1:t+=o(i+(r>>2)+32);i=(r&3)<<13;break;case 2:t+=o(i+(r>>3)+32);i=(r&7)<<12;break;case 3:t+=o(i+(r>>4)+32);i=(r&15)<<11;break;case 4:t+=o(i+(r>>5)+32);i=(r&31)<<10;break;case 5:t+=o(i+(r>>6)+32);i=(r&63)<<9;break;case 6:t+=o(i+(r>>7)+32);i=(r&127)<<8;break;case 7:t+=o(i+(r>>8)+32);i=(r&255)<<7;break;case 8:t+=o(i+(r>>9)+32);i=(r&511)<<6;break;case 9:t+=o(i+(r>>10)+32);i=(r&1023)<<5;break;case 10:t+=o(i+(r>>11)+32);i=(r&2047)<<4;break;case 11:t+=o(i+(r>>12)+32);i=(r&4095)<<3;break;case 12:t+=o(i+(r>>13)+32);i=(r&8191)<<2;break;case 13:t+=o(i+(r>>14)+32);i=(r&16383)<<1;break;case 14:t+=o(i+(r>>15)+32,(r&32767)+32);s=0;break}}return t+o(i+32)},decompressFromUTF16:function(e){if(e==null)return"";var t="",n,r,i=0,s=0,o=LZString._f;while(s<e.length){r=e.charCodeAt(s)-32;switch(i++){case 0:n=r<<1;break;case 1:t+=o(n|r>>14);n=(r&16383)<<2;break;case 2:t+=o(n|r>>13);n=(r&8191)<<3;break;case 3:t+=o(n|r>>12);n=(r&4095)<<4;break;case 4:t+=o(n|r>>11);n=(r&2047)<<5;break;case 5:t+=o(n|r>>10);n=(r&1023)<<6;break;case 6:t+=o(n|r>>9);n=(r&511)<<7;break;case 7:t+=o(n|r>>8);n=(r&255)<<8;break;case 8:t+=o(n|r>>7);n=(r&127)<<9;break;case 9:t+=o(n|r>>6);n=(r&63)<<10;break;case 10:t+=o(n|r>>5);n=(r&31)<<11;break;case 11:t+=o(n|r>>4);n=(r&15)<<12;break;case 12:t+=o(n|r>>3);n=(r&7)<<13;break;case 13:t+=o(n|r>>2);n=(r&3)<<14;break;case 14:t+=o(n|r>>1);n=(r&1)<<15;break;case 15:t+=o(n|r);i=0;break}s++}return LZString.decompress(t)},compress:function(e){if(e==null)return"";var t,n,r={},i={},s="",o="",u="",a=2,f=3,l=2,c="",h=0,p=0,d,v=LZString._f;for(d=0;d<e.length;d+=1){s=e.charAt(d);if(!Object.prototype.hasOwnProperty.call(r,s)){r[s]=f++;i[s]=true}o=u+s;if(Object.prototype.hasOwnProperty.call(r,o)){u=o}else{if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}r[o]=f++;u=String(s)}}if(u!==""){if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}}n=2;for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}while(true){h=h<<1;if(p==15){c+=v(h);break}else p++}return c},decompress:function(e){if(e==null)return"";if(e=="")return null;var t=[],n,r=4,i=4,s=3,o="",u="",a,f,l,c,h,p,d,v=LZString._f,m={string:e,val:e.charCodeAt(0),position:32768,index:1};for(a=0;a<3;a+=1){t[a]=a}l=0;h=Math.pow(2,2);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(n=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 2:return""}t[3]=d;f=u=d;while(true){if(m.index>m.string.length){return""}l=0;h=Math.pow(2,s);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(d=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 2:return u}if(r==0){r=Math.pow(2,s);s++}if(t[d]){o=t[d]}else{if(d===i){o=f+f.charAt(0)}else{return null}}u+=o;t[i++]=f+o.charAt(0);r--;f=o;if(r==0){r=Math.pow(2,s);s++}}}};if(typeof module!=="undefined"&&module!=null){module.exports=LZString}
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var saveAs=saveAs||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(e){"use strict";var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=e.URL||e.webkitURL||e,i=t.createElementNS("http://www.w3.org/1999/xhtml","a"),s="download"in i,o=function(n){var r=t.createEvent("MouseEvents");r.initMouseEvent("click",true,false,e,0,0,0,0,0,false,false,false,false,0,null);n.dispatchEvent(r)},u=e.webkitRequestFileSystem,a=e.requestFileSystem||u||e.mozRequestFileSystem,f=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l="application/octet-stream",c=0,h=[],p=function(){var e=h.length;while(e--){var t=h[e];if(typeof t==="string"){r.revokeObjectURL(t)}else{t.remove()}}h.length=0},d=function(e,t,n){t=[].concat(t);var r=t.length;while(r--){var i=e["on"+t[r]];if(typeof i==="function"){try{i.call(e,n||e)}catch(s){f(s)}}}},v=function(t,r){var f=this,p=t.type,v=false,m,g,y=function(){var e=n().createObjectURL(t);h.push(e);return e},b=function(){d(f,"writestart progress write writeend".split(" "))},w=function(){if(v||!m){m=y(t)}if(g){g.location.href=m}else{window.open(m,"_blank")}f.readyState=f.DONE;b()},E=function(e){return function(){if(f.readyState!==f.DONE){return e.apply(this,arguments)}}},S={create:true,exclusive:false},x;f.readyState=f.INIT;if(!r){r="download"}if(s){m=y(t);i.href=m;i.download=r;o(i);f.readyState=f.DONE;b();return}if(e.chrome&&p&&p!==l){x=t.slice||t.webkitSlice;t=x.call(t,0,t.size,l);v=true}if(u&&r!=="download"){r+=".download"}if(p===l||u){g=e}if(!a){w();return}c+=t.size;a(e.TEMPORARY,c,E(function(e){e.root.getDirectory("saved",S,E(function(e){var n=function(){e.getFile(r,S,E(function(e){e.createWriter(E(function(n){n.onwriteend=function(t){g.location.href=e.toURL();h.push(e);f.readyState=f.DONE;d(f,"writeend",t)};n.onerror=function(){var e=n.error;if(e.code!==e.ABORT_ERR){w()}};"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=f["on"+e]});n.write(t);f.abort=function(){n.abort();f.readyState=f.DONE};f.readyState=f.WRITING}),w)}),w)};e.getFile(r,{create:false},E(function(e){e.remove();n()}),E(function(e){if(e.code===e.NOT_FOUND_ERR){n()}else{w()}}))}),w)}),w)},m=v.prototype,g=function(e,t){return new v(e,t)};m.abort=function(){var e=this;e.readyState=e.DONE;d(e,"abort")};m.readyState=m.INIT=0;m.WRITING=1;m.DONE=2;m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null;e.addEventListener("unload",p,false);return g}(self)
/*! seedrandom.js v2.3.3 | (c) 2013 David Bau, all rights reserved. | Licensed under a BSD-style license */
!function(a,b,c,d,e,f,g,h,i){function j(a){var b,c=a.length,e=this,f=0,g=e.i=e.j=0,h=e.S=[];for(c||(a=[c++]);d>f;)h[f]=f++;for(f=0;d>f;f++)h[f]=h[g=r&g+a[f%c]+(b=h[f])],h[g]=b;(e.g=function(a){for(var b,c=0,f=e.i,g=e.j,h=e.S;a--;)b=h[f=r&f+1],c=c*d+h[r&(h[f]=h[g=r&g+b])+(h[g]=b)];return e.i=f,e.j=g,c})(d)}function k(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(k(a[c],b-1))}catch(f){}return d.length?d:"string"==e?a:a+"\0"}function l(a,b){for(var c,d=a+"",e=0;e<d.length;)b[r&e]=r&(c^=19*b[r&e])+d.charCodeAt(e++);return n(b)}function m(c){try{return a.crypto.getRandomValues(c=new Uint8Array(d)),n(c)}catch(e){return[+new Date,a,(c=a.navigator)&&c.plugins,a.screen,n(b)]}}function n(a){return String.fromCharCode.apply(0,a)}var o=c.pow(d,e),p=c.pow(2,f),q=2*p,r=d-1,s=c["seed"+i]=function(a,f,g){var h=[],r=l(k(f?[a,n(b)]:null==a?m():a,3),h),s=new j(h);return l(n(s.S),b),(g||function(a,b,d){return d?(c[i]=a,b):a})(function(){for(var a=s.g(e),b=o,c=0;p>a;)a=(a+c)*d,b*=d,c=s.g(1);for(;a>=q;)a/=2,b/=2,c>>>=1;return(a+c)/b},r,this==c)};l(c[i](),b),g&&g.exports?g.exports=s:h&&h.amd&&h(function(){return s})}(this,[],Math,256,6,52,"object"==typeof module&&module,"function"==typeof define&&define,"random");
/*! console_hack.js | (c) 2015 Thomas Michael Edwards | Licensed under SugarCube's Simple BSD license */
!function(){for(var methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],length=methods.length,noop=function(){},console=window.console=window.console||{};length--;){var method=methods[length];console[method]||(console[method]=noop)}}();
}else{document.documentElement.className="init-lacking"}
</script>
<style id="style-normalize" type="text/css">/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}</style>
<style id="style-init-screen" type="text/css">#init-screen{display:none;z-index:100000;position:fixed;top:0;left:0;height:100%;width:100%;font-size:28px;text-align:center}#init-screen p{display:none;width:75%;margin:2em auto;font-weight:700;font-style:italic}#init-loading progress{height:20px}html.init-lacking #init-screen,html.init-loading #init-screen,html.init-no-js #init-screen{display:block}html.init-no-js #init-no-js{display:block}html.init-lacking #init-lacking{display:block}html.init-loading #init-loading{display:block}html.init-loading #passages,html.init-loading #ui-bar{display:none}html.init-no-js #init-no-js,noscript{color:red;font-weight:700}</style>
<style id="style-fonts" type="text/css">@font-face{font-family:tme-fa-icons;src:url(data:application/octet-stream;base64,d09GRgABAAAAACWoAA4AAAAAQhQAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABRAAAAEQAAABWPihI/2NtYXAAAAGIAAAAOgAAAUrQXRm3Y3Z0IAAAAcQAAAAKAAAACgAAAABmcGdtAAAB0AAABZQAAAtwiJCQWWdhc3AAAAdkAAAACAAAAAgAAAAQZ2x5ZgAAB2wAABjCAAAq+uJ4WNtoZWFkAAAgMAAAADQAAAA2BZlJs2hoZWEAACBkAAAAIAAAACQIJwQZaG10eAAAIIQAAABuAAABOPTeAABsb2NhAAAg9AAAAJ4AAACeojKW6m1heHAAACGUAAAAIAAAACAA6gvwbmFtZQAAIbQAAAGPAAAC/eLsyKlwb3N0AAAjRAAAAfwAAAM0412SIHByZXAAACVAAAAAZQAAAHvdawOFeJxjYGRWYZzAwMrAwVTFtIeBgaEHQjM+YDBkZGJgYGJgZWbACgLSXFMYHF4wvPBhDvqfxRDFHMQwDSjMCJIDANLeC6V4nGNgYGBmgGAZBkYGEHAB8hjBfBYGDSDNBqQZGZgYGF74/P8PUvCCAURLMELVAwEjG8OIBwC4Ywb6AAAAAAAAAAAAAAAAAAB4nK1WaXMTRxCd1WHLNj6CDxI2gVnGcox2VpjLCBDG7EoW4BzylexCjl1Ldu6LT/wG/ZpekVSRb/y0vB4d2GAnVVQoSv2m9+1M9+ueXpPQksReWI+k3HwpprY2aWTnSUg3bFqO4kPZ2QspU0z+LoiCaLXUvu04JCISgap1hSWC2PfI0iTjQ48yWrYlvWpSbulJd9kaD+qt+vbT0FGO3QklNZuhQ+uRLanCqBJFMu2RkjYtw9VfSVrh5yvMfNUMJYLoJJLGm2EMj+Rn44xWGa3GdhxFkU2WG0WKRDM8iCKPslpin1wxQUD5oBlSXvk0onyEH5EVe5TTCnHJdprf9yU/6R3OvyTieouyJQf+QHZkB3unK/ki0toK46adbEehivB0fSfEI5uT6p/sUV7TaOB2RaYnzQiWyleQWPkJZfYPyWrhfMqXPBrVkoOcCFovc2Jf8g60HkdMiWsmyILujk6IoO6XnKHYY/q4+OO9XSwXIQTIOJb1jkq4EEYpYbOaJG0EOYiSskWV1HpHTJzyOi3iLWG/Tu3oS2e0Sag7MZ6th46tnKjkeDSp00ymTu2k5tGUBlFKOhM85tcBlB/RJK+2sZrEyqNpbDNjJJFQoIVzaSqIZSeWNAXRPJrRm7thmmvXokWaPFDPPXpPb26Fmzs9p+3AP2v8Z3UqpoO9MJ2eDshKfJp2uUnRun56hn8m8UPWAiqRLTbDlMVDtn4H5eVjS47CawNs957zK+h99kTIpIH4G/AeL9UpBUyFmFVQC9201rUsy9RqVotUZOq7IU0rX9ZpAk05Dn1jX8Y4/q+ZGUtMCd/vxOnZEZeeufYlyDSH3GZdj+Z1arFdgM5sz+k0y/Z9nebYfqDTPNvzOh1ha+t0lO2HOi2w/UinY2wvaEGT7jsEchGBXMAGEoGwdRAI20sIhK1CIGwXEQjbIgJhu4RA2H6MQNguIxC2l7Wsmn4qaRw7E8sARYgDoznuyGVuKldTyaUSrotGpzbkKXKrpKJ4Vv0rA/3ikTesgbVAukTW/IpJrnxUleOPrmh508S5Ao5Vf3tzXJ8TD2W/WPhT8L/amqqkV6x5ZHIVeSPQk+NE1yYVj67p8rmqR9f/i4oOa4F+A6UQC0VZlg2+mZDwUafTUA1c5RAzGzMP1/W6Zc3P4fybGCEL6H78NxQaC9yDTllJWe1gr9XXj2W5twflsCdYkmK+zOtb4YuMzEr7RWYpez7yecAVMCqVYasNXK3gzXsS85DpTfJMELcVZYOkjceZILGBYx4wb76TICRMXbWB2imcsIG8YMwp2O+EQ1RvlOVwe6F9Ho2Uf2tX7MgZFU0Q+G32Rtjrs1DyW6yBhCe/1NdAVSFNxbipgEsj5YZq8GFcrdtGMk6gr6jYDcuyig8fR9x3So5lIPlIEatHRz+tvUKd1Ln9yihu3zv9CIJBaWL+9r6Z4qCUd7WSZVZtA1O3GpVT15rDxasO3c2j7nvH2Sdy1jTddE/c9L6mVbeDg7lZEO3bHJSlTC6o68MOG6jLzaXQ6mVckt52DzAsMKDfoRUb/1f3cfg8V6oKo+NIvZ2oH6PPYgzyDzh/R/UF6OcxTLmGlOd7lxOfbtzD2TJdxV2sn+LfwKy15mbpGnBD0w2Yh6xaHbrKDXynBjo90tyO9BDwse4K8QBgE8Bi8InuWsbzKYDxfMYcH+Bz5jBoMofBFnMYbDNnDWCHOQx2mcNgjzkMvmDOOsCXzGEQModBxBwGT5gTADxlDoOvmMPga+Yw+IY59wG+ZQ6DmDkMEuYw2Nd0ayhzixd0F6htUBXowPQTFvewONRUGbK/44Vhf28Qs38wiKk/aro9pP7EC0P92SCm/mIQU3/VdGdI/Y0Xhvq7QUz9wyCmPtMvxnKZwV9GvkuFA8ouNp/z98T7B8IaQLYAAQAB//8AD3icrToNcBzVefe9/b3dvd29u909/dyd7ke6k86yLEunOyHJsrCxJWyJGmEcLMDYxBhHNsZQBzOAkjQmFDrGIq5gHEIcCILOAGZq3IQO04RkIGkgaUMKMbQznSlJW0wgJtOQHxRr1e+93TvJwq7JTD3y2/f//bzvfX/vAhAIzL3KPcYNBFIB8UR9EJYuAcuAqGNbOiwDSczkuorlaJ6WTeVSRwMIDveY8aN20GztjzMhW4P2H+kNUPM5NaVNQE0K3tWM77vv8rJqgnT33VJE4WWIfd/QbKHZjcXcZiFAqjCDgUJA/mZTWOIIwi0vAwNiUjkW9THIZs6DAbnj6ffGP/P+0y2vv+5SXGLKuXHJPJH92c+yT7x3883wnI9W/DxI4T9+bm7uOL+MUwNywAg0BJYFQgNKa2NDzFBEjqeM0SFXLHU4YKe7yjFoSmdEKWw5nemOUj5czMXCliilM7lyuFgqp3HaDf1j/fhH+s6cfm4MEpA8c0BSQBO5CUkD5fJi05kDjSUoNnETTUUSXtpPVm0aGHDdmV0nNkPiMUWeHZMVRSZPSlp0dqypCKVG8iT9IK5AEeamyZGAjecW5tm5SSBm8ojiSqBsYoXDTRtuymw13V8axjB+p2EPlsMGcRzTTRkGOLRpmk/AzSZ+A97ecx+QN8g9gUbc26F7N+GJiN5pLGMA8hUo7EQcHI455A0PwrS3I37N+bZhTE8bex1aeeIJ4+MTjTY6gcH+iIvgGWQRdh2TR9sS81kspCzytguLfBcyuBOLXuhwYnZnh8NFUs6plLPLScGpWBKwkYztwsop7Hie9r7rYK/9brWXTg9U+RiBX+GJiyc0rgIv7UNJe3vPjrFdyZOV/byNUkyW/0AuIi/h+h6U5a64SmW5ieGcya2AYimG+EUtnZN08ImgveV+KOYykiiJVMrbkI+dHUkC9+nyPUFdD94j639r1uTq7FiSNrR1hXS8uLbGapYUSbpaJvzmp5aODbU9iJNBU1gJa5LFTCqihNpDigmWWtc2GjUy7Y2m3hHk14qmPJXp2cTInZudO85dhzw2AuXAJQHl+Yt7l0RVjkO8u4q5JZARE2A5yNxStNgGWcQSj7izA1HucCgJOsRsb7xYWgn9XAwvRqaN4HAS4ENF3kXFFovJ/muW3zsYDK3jxaCQbOouOPXZPmBDNZG4krS0N2/9wakf7hHv+IcPX/jcaGWZAp9fvrFtv66UeSlXn4zYdZo5kLNwIJJRTbEu3jz62Zf37Xv5l7RAeugZfAQ7kJ5koA3PoJB1eP8MpHRVWqpygyITpiKz4DCoHMENlun+wrDA0bNZ9jmJZdZwhhx9UnewMKztg2yAlie9j6O7Lzrks7tYdRdOO4u/FJ9e5G93RyFTJ1f5G17IZDs7z25uEfuFBYwlvYpUUuTnKJO6umg5IymD88yGGxbycjN2JOkIVk6wUoEzm/0O5T/Owb92Jg8NyL/6qFrl30IZ5nSgMp3nch7DkvOMCaMeoQ1U4JZxQncenmAMmcAei/S7V9CvAccW8mczwtMCceSQ8nwhXWuKAeQPJbRCc9RnhoSyhvBL+WgxTzsk0Y567IFj+35wa4Xq7ykS5YIm7UIdq4iCfKcsiIoSvFFWONUnFovZoXHKhXE69R9hTOIEgZPcJ0VZRrx+i3j9hhtFPqQDnYjX8uaEpS2+F4twiVkOylSJAwfvBZO3XBnoTaEHtltSWAGKIEl3SJIQ1CRESIRnLFtJRc88GckEbQuOBTO5zBXziL0JIPKiyMtzggwiMc+czmbDEbDMbJaLhC3LPzPuFOKaD6zEM+tt15gNxTPLIg5dvglCfGmbmakYmqmKsEfRVOWWAXjqvEzVeamT6botq9321Vu2rIb7KOrufmZ24LWmoiI3yspJJ65e704JprBSFGH3pxXLhAQe9fBzbM1rq7YAm1dsctvZSiqu8G94rxwS/LQ7JYorRR0XXq/GmSh4dJADKAsSk70ajQ8gHdE0MhzVjOCbVDSvKINd1PhKVN+fgMTG2zYCvIaq+V2mmsNTP36IRLD6xO7ejWTDisfc7zCVD6tQW+/eMTW1Y3fSt20foe+hBZpQ3zfGfH3vyzmCZNvHFoJFVPrRjj7m6I26M3r7KHQxgD5c2H/4tQdIeJLJ+yQDvTsZOwv4jYfJQxVaxxmtKtNTTVaQnRmS6kkWvfBoNvCeIT55jt41PJZwpg3YYeJYGK+dppgK/sF+R/8ggZIOBlnyNoK/qpwokLZ6uCFRKCTKV8HeGaYksPg2Xj/3fyQZb6dhGWv2QLLQU4DW7lZwf77Hw+vb3AjzexKIVywkEXoGlB1JUqr4FW3A7BZlDzgzhZ5W0tyfI1da7mmn13JvsZOFxLuJIRsmLXJVskByA41iu/uvSds9bWOnPZQ4lSgANm+xqQ6gMPlGH2YR79rSDIXLXQBujHZSxkCpSIeynwCdNxEFJ2HVmSDaFPxQYoIN2BfCM8E6zTCu66VDSQ97KkPfIa8i7nGUITNAZagDhYFJjeg5rXh+bcBuYamT/JWmRVE8Iopeb/3ud1ZdSIs4TkQLcaogJ63Z5dGUxEfefz8qSKko+Qm2PB/ZgyEEMngmjkjovYB0GBog+n9COzD7MiQ73pfOA5S8NLseIst+QWbPC9y/J8dRv7QFliCNWcnzAYlI3fE8hdNVbBPY1WEeZxm8m5mKOdypQRG1qhiRgQBnZbr7N20qT1ipoPsLVYWEGq8hE3BoLPn2tV8PhWVe0WTB4nIN3WMD7cmIiDZEhaSSROulWMbk2+sX4LIs0Iq4NNdUfV3mDeqCbaEOligmbYSFCaU0VRVULrhTKoKlIMubNvV3ZyyOByWMilXkBpNjcIjihTjBrwzF/bmKF1iMJNsHxrobcnxElDVF0C3u69fevP5txIsEcUrVZyR96DPqiI/C+zGTp0uZGkXVP6PG1RncET7Ey/eKjnX885QeWw83krsCIVyvMp8TD9P3rEvMFUkFZxS6Rw25ytWQJ/52/tqLyQSDrc7Dpiq/H2XDgYsVBgjnK7BF95EwLKLNKLh0bg5x74VXPNwJO1fq7raB588j7pbhat78pDKjPE1td1Jl6Hhn8Q73LdISsCrrgwuijljQ28Tinnavx+Xu9ap6jYqn2QzNaly7RoVJ99MoBl/DvmtU1X0Lu3FCnO37XXKEW832Nai8BYnDKKvIF92W3F9dotK94ahCNyJPuW+5b2L1WrQ2X6fSc1TBejLg77uvsm8FX2b1ghWk6cbjuB1FUIVm9y0f6aMKfMbdhjshNGihFKgIgE7044ZvkbXz+zbh3chXN/f35Z6mOyF2b/m7H6V7HVV3XYOYtiDOig/J25bh+xPuAPMdxRPRc8V1YU8Z2mEv9OIO2O6DTg8Wtt2C3+lCcjBRmEaNVbDhi0nLnUK1ttvqdVpsexruQ93WGnf3T9s47N+te7nN5FeohRGeChUfIvZx5htAPYTNjQl/ea/tTlkW7LZ7nIK3dyNsGUwWpq0+a4k/ALvozB5nurkCqwthUdrq5mnzBD/tu5rpfPVYuC6L0VZwnMfd/YnGxgTc97jjFNjGFvRQ6iyrYPfZjyPVyQJM233YRF5YVb1xgLzjwVMX3NOwZ/K7wtJZx4W8pGRNNzf4ZOBeCKgPCxuKcUYmxQNycbjP5wGlEJGk8OZc369tR3gtaZ+X6CbmVkIONRVJcugpluk1TQL1Fqmfy1ELVi4hYy1zJhYNj4zu7RkfbuebN17fv+q2Fj4sDgtE7Hv2uk89uneIH7j9yNWjR1YMmUvJSzO6s9QcGWkbHt83PtzW0yWCMMLr4roNcMm+o88e3XdJ/0VDkWiFDxSv5YhXq8d3nVAryjjtoDXp7Ojn2gg6ijGHIUxDpQZ0Y2lQym2+5NZHN219to8XhsUw33Lb6p6dG9DVGN598/bmkXA0NoPeR2t4qO/h0U8d3bcKtmB5yeilos6PCCB29fgINjeNmEsdfaYmGhm6qB9RrPhEx7mrEbfGwCDauZXNJo09wLJ1oAhSe1NxWkUDKKJofMqeE+szt8S4K9JYmjbLXRRtylOU1vWN//mVy4/0DVGNqM9QJT7SvL287ot5MSZoGC/oyHTWO7p3vdd5s6RB439/5fKH6aIaEDh46AVkpMqWo1YdaWpe1690hzT4e79jxGuLvD+R0iUwuiJ+TLUM4+yrA8aAdsVAsX1JFgMsTkCF4ceBdtgLZ8oXaENnPpfPipLA6A57nn4+XI1hUbCoYmig1KP5pH44Kybnq4cUyatKivvTmXpeOC7y8J4il3yHncWVz+SDrc5zTqucPyYro3Af7XP30/I8ddJxsQAgXIFbz37QdsmqNhJl0K6145C0rkWzExAX8aM3sDpwYyA8oF83PNBXWu7xRPQMIT1E6syw7M4F2tFwOmyhVKQ7+uH/lz9DribLBF4jsuze94lYBc+7LzLOXMw4c+66u52EZz/QLEWxyA0XZFuA9+OVUfSTwyzWCw0o3a0Jx9BYTrKp2AZiEi9qGSs6OFhZkPboRDXesZKpbcd3UOjV8dMgNNQhr1pJh0Qy5petVIQ48Zq1KefMj7zIhluf3pQeBs5JfUuJMGcgHFRik16gP1mzHX2EmroaYhmVysETLOo54aSGU/gHzbEwdRvCMXuGhUczHj3HkZ42Rk9LYIDS07c8YRuqSBg91Pmnwo8VghFR2Y9oKTmxziSwi0HTN2I1cMvT3E7Fezk/Pae1UnYyUwqdRnqCNZPoXSJSk6hxGWmRBKqBSMqyTP97/wmaJcQCGpqbG5Iw6vhEtHpEVWihepULpFG3rqG0rOha2qTxJIC0YOSYFjrxEtP8nlSlIxvu7PLcRKmS76mk04Sq0HoTqJ04CcfcK+DDIU34mhCX/dByaAiDy58ibicVeRdNJrNyezI2G/ESlUKsZDxiOtLJk/ChXCc9Imp+1nO2xL6QZIkkWiizM7SHIF9q9K8ZpQDx8zOjgWaMzORvdrSGPJ2sEzRYZer9O2gmWD4zSTr6sSuH8Uc/IGjmyLIMOHUV0G48840967ixy2v6zIhcU+pr3bDj9u0bc1xfqUbO9sUuH3O/iqEbFPqaPbOBZuFTO57rx7mxvnDL7avRFLah/ei55LZCpKddjqz4OxhyH6YRLuzA0rcfY5yC8rQTcb08JdLYleZW8TZ0lGgSCyVfQoQtRDiPV6BqKLryzL7kqRmkuoGdE5UzlKWy39mJQlU1OChf1KrEHOYcsdMhvaO3j5JN+zZBXJZ2Kmq0WRSMDSFJGqmtC0q8eZesmfWxPxNNca3DC3KzYsg7MBBXhJ2yHmvy5sojNXVBmQvfhUdoxJ0NgiENWTzfqwd3SOjC927ceNvGjbfTUTNp13eIumhvAKEvJA/HTUW6Maj1CeJAUtBFrcOI1xugSWxubV1qqaRJ1gZvqiHLbKqwOo5TR9hELw7/iBsjL/t6WXl+SWN9VOO5RfnTtJcwreTFY35bWthGB+bMB+yOcGEDg4bztxbkUR0wh1h2kJWgV0awMR+Hjvn5mlrmu9BMCMpYsZynmQC8KR2xco4maZIg5jN5CU86ViJ/s27nzqlxgFc6167fuXP92s5XYOdDO8j4pYNYw16IjR8eH79U0ra3Y6V9uyat20l2P7AbsKpjJ81Tzs39nt9PXgqYeL9LNB+Yi9uMN1BEZ0knnvijDiZLEDg6dJ30NuA9oQEVh9U0uk/kgO8A+R94pvWy8YveWn0ZWbfmLepJXdqz5Z5B94qhu7d2k75r7l0Lx2gVtvTMr6FXgDY7p56d6qSNS+/e0ke6r//CQ1/YXiTdW++u+FK/529HfC3klvzNhK3Te4txIUFlkuQ8tIjguXrUG6WAPWgMsIcDF664d3v3DHXwhQ07YMul2I9QDvtQXz+bokoej3uUo5mt1Qi7f/m58pGoIAyavsnnFiUl8cbhKTpRmI+CKw9Y1oKc5GvZZJCT6kWJcCHNzzDS3KTQKEocr/6Fe1GoUf+1rq/QG/W/hs9goz8E649Xc5M6HxXjAnDV9OT9spBFuwOC26Prv2bzQ3RhCHfwaYpW8+LxqOzlYOZR7/Kf/RbmXMktCzAr3jWP/Kqt5KUqZDq4uTqyBbYGfL17HcuL19KcjykyePSoAP2bNgILH1qOXXFwA9l471P3bOIvOwRXL8j+k0OjB6cPjrLCfe2sXP/824QcsAMZlOmGWiMo0rwb4K1qo+mH/LkBVlXdA+cFXFFWvz0//AXvbZ6+ac3GoyzHHvXfzCqvNILfLi9qV7KBJ/03OPbql/A+XlcDa3g9C1/rnPPU/XzkR4E3q/4p6kHES6V3vVx1M7x3EG4RnpwfhuT9B8mTF4BG6w/vZp7SbtoL4oJBkCuYe2+LL3GT6CtdzGKjNas6FGaHETyqOIeljCSdy4azYTwkLxFIL08OHSKaM+7sonl9vERpGguhHaS5bUgz24xu3ETTPsVKqntkIZfpqR1MdBfQKd6hmiFHviU1QZ260MQ2FSOcbfDmVoyFeHkb9rq/db9KFWsP6uutqz6LgZW6R+JrIjp86Gp6jSXL+7RoUv38yjEracH0NiVpKdu2ISBl27QDRdTKAT9WHoc/IL/p7w4sptcdmtpFR6IcZRnNXDnaT909x7Ykjj6PwmlFdP9FMuWgQvb8nAiKpHB7iS4/r+pk678LRCWOGpq9QwfOlOGlbpDkEPwThngKL7puibAY5LvMl+ZQQ8Yx4mxF/wZjkGJ7a3NjKl5jyjiJ/hAhLzVVExN+9qMpZsAyWImhu/eF2NlfcmS6bxq6lNlO9CZvxpjon/G7R5k1SqVwuFwOv3HTTZn0TTelSQs2wtjpPkNH8D/RH++b3mkosx0KLkzSlfi92qSrzPKX2arMTe692ChjJ7T5I75t3I487EIe5jXKQ6pg6Q83qs/lEn3noSFynmb4aOrBF9sEoBuHhKFYcL11up41emofLCQGE60wVdeDClSvn5qqM41Go7t+iuWUHqzrNrOGWTsFst5TtwLXXPk0Syc9fSX2rsBFmzadY6C/Fge8d+e5uXHkfyiQRc6vwTu2Ylkhz95Fq2/8+YVv/CxSqb7xxyqhDjDBRxFBxcQnSYzeBfrYNqGJjej4TLDfWEywII42hqZ+/BB/6I2DkCn0WS9uv3PD4Z0DpG/3oemDe7u5NS/aMOWtol60t2qCusYTSi19uHn1iHiQOpz2i2v6xx/4xqE9PfyqHQ+N3Ln9RftsmoxADcYAyvMt9Y73lr7wdwTUmb8g/u53GOaw6pPizJC9MJrEj7noG9sG1CNhmWN2BcF2dpRzGBfz5XrojEWZRxuj6aCYY0tiLJOTMmK2uJJQjxj/8hjKEB1iGHCj4JTpxczQzEtehAevG+5pUO12twtCjfG4I979yJB4a7RlZbDdVGV1OMgDQPZQY+ERm1wqiVyYJwJHMrGaP+o9YKbUlE2ApL6YEiyylNT9ESff74qtvCgqNSZcBVOa+2Hr9q9E70rVikGTcxRJ4BSQa6ImzpQIEXk+OFbqhvQRQ4souDWotqAiL2Xqm+AZ/Yz0kXcCOnvfqg1779vzOXtqtvPMii9Ig5+dwj87Kf4bQ6EJfdRt4PyQZYFY0/NXERbE5vPzi+As2njhToFqfp7h6ufXYTFiZ6MCryyG/xQX5qIBFddLfr6b+SYsHc3P1ocikRD5rxCMuNslxeBKuiZjzQpUY6kFvwNgPtyioHRxkEr9fv+HE5AwHFc9q0neOXOa/kiAi9ByQX3et1fZb2+q7yCL914QN5y1GVt/DOVaR29JPCECXV9iGaI84A7sQ9W3Y4dLZe4vVR1Mxd3Hc7rq7lNVOKjqHM9xqmiceVWXNTgoiO6fswpN0R/EfnefyHtnMvcsdw1nzMOJiSzGpQ+SPmclxmVRqlVM0HG5wNFSQYAIRhjE3ZDTsobwJbifVegTxj7sx7mCRwvp5XSWh6/QYs/TwjyMahKsVCYZVaeECMTR56MplPyzCfrSPO/dL0m8RwvpQ1oS56aF7i/58Mpn0eOHaKxcTNGd84cLd4oCvXPu3B+4a8kPUA7rmSzJ7E3Zy7OzuJEm/Mt+7Eh/pyDPMx7xF7luuh/CY9hDe4WZYLqvW+YhFlJiWX1PO0aOB6L0t3AVOUK7V/XSqP8Dx/CavHCY8erwC3jhyKHZR2nu9wXvpz4vKN4dwOIA22sZ/S1RTbhyBxbvF/XeXzEQpfEUTa0hLTTE+RigN9vzQhBp0RzT5OUaKazwlhEU8u0fx8D9XmGdwVmmZmpavDGuichhJJUz1nn5pp9yj5H3GG7DgZtovmnn5YNFiiT/JyIZqw6Uvd+i0TRIFwumFw7SVEg/TYvQDM/8hE9O4uTWEVlECuyU2tLW1oKK3jIk+bItDxy6TZKw36mttdZgKDxo1fIRzrFMSbrt0J/Cl8KVh1OcozuqGUyO7RxLBk3UrA6XfmDTF97qwAErpOl655GnjnTqOidyIQsHO08G/hcLt/j/AAB4nGNgZGBgAOLaW41M8fw2Xxm4mV8ARRguss1QhNC5H/9//Z/FUsEcBORyMDCBRAFTFwxveJxjYGRgYA76n8UQxVLGwPD/FUsFA1AEBfgBAHyYBUh4nGN+wcDAvACCWfSBNIgviMBM1kA6koGBMRWVBqsDYqYmiF4wHQkxg+kUBMPVWEP0gTDYvBdoahZAzYxEY0ciuWUBFjkoZimDYLC8IKpehmsQccYvSGYgYZB7YBhFL5o8cxTQjDUI/wIArpclrwAAAAAAAAA6AIYA3AEKAUgBgAGgAfoCYgKqAwIDOgOGA9wEQAR4BLYFAgU8BZoFzAYMBlIGmga6BtgG+AcYB0QHcAecB8gIAAg2CG4IpgjyCUAJrAo0CtALOAueDAoMYA0ADVANjg3mDiQOjg7GDvgPOA+ED84QPBB2EN4RNhGgEfISchKoEsgS6BMGEz4TXhOSE8QT+BQsFGIUiBTWFX0AAAABAAAATgBuAAYAAAAAAAIAAAAQAHMAAAAiC3AAAAAAeJx1kctOGzEUhn9DoIKgLloJdcdZIRDK5CKhSqyoogJrhLJDwgyeSzpjRx4HlGfgLcoz8Dp9j+76Z2KhqFJmZM93Ph/bxx4AX/AHCqvnnG3FCgeMVryFT/gReZv+JnKHfBd5B108RN6l/xV5H2d4idzFV/zmCqqzx2iK98gK39RR5C18Vt8jb9P/jNwh30fewaGaR96lf428j4l6i9zFsfo7drOFL/MiyMn4VEaD4bk8LsRRlVZXouehcL6RS8mcDaaqXJK6OtSml+lemTrb3Jp8Xmm/rtZ5YnxTOivDZLCur401XgfztNytec5HIWSSeVfLVdxHZt5NTRqSIoTZRb+/vj/GcJhhAY8SOQoECE5oT/kdYYAhf4zgkRnCzFVWCQuNikZjzhlFO9IwvmTLGFlaw4yKnCBlX9PUdD2Oa/Zlay1n3dLmXKei9xuzNvkJ7XLvso2F9SaselP2Na1tZ+i2wqePszV4ZhUj2sBZy1P4tmrB1X/nEd7XcmxKk9In7a0F2gv0+W44/z/KQo7lAHicbZLnlpswEIW5Bgy4bLLpvfeE9N57z76DLARWEJKOEEucpw8CO/kTncOdT6PhnlHxRt4wJt7/x47nYQQfAUKMESFGggmmmGGOLezBXmxjH/bjAA7iEA7jCI7iGI7jBE7iFE7jDM7iHM7jAi7iEi7jCq7iGq7jBlLcxC3cxh3cxT3cxwM8xCM8xhM8xTM8xwu8xCu8xhu8xTu8xwd8xCd8xhd8xTd8xw/sBLUlZuIkZZW2q0hzahvDRqocUyIpE4EWTR1WXDZ1sGRCz5yklBsqWBZwmauZk01mTqxl0nIlUyLs9r/Zej35m4kFl2XKftlAKFomTlKlmfQ1l74lRdB9dbxQqqyIKbc2MPQZGqbFKsqVaYnJ4ky1Ms24iQXLrYPE8GLZ07jRfaIvcf5JX+NoMhQ5jLoqFwenBS8Gpw7WTh05py6MaOtT2ibEGNXWKW1Da0i9nPY6dNe7CEWy7pc+5EJpvfJVnvtUFUHFZBPWS2LYxKqiECztVpINypAuGS2nvQ6Gs+H0hsk0U3ZznDETguua1/MNpLvMWH/RFGEuuobCihScxqS2zPC6jH4rVaVcxn1UjQ1yJW1QK2MTJ6nrPOqp0d3Vk1WoSVOz7p0oHeWdTbpoh5i3sVWpezp23AGTWch+Mmonu0o0Vb+l6RqdabLmRnveH9ru7j54nGPw3sFwIihiIyNjX+QGxp0cDBwMyQUbGVidNjIwaEFoDhR6JwMDAycyi5nBZaMKY0dgxAaHjoiNzCkuG9VAvF0cDQyMLA4dySERICWRQLCRgUdrB+P/1g0svRuZGFwAB9MiuAAAAA==) format('woff')}</style>
<style id="style-core" type="text/css">html{font:16px/1 Helmet,Freesans,sans-serif}#store-area,tw-storydata{display:none!important;z-index:0}#story{z-index:10;margin:2.5em;-webkit-transition:margin-left .2s ease-in;-o-transition:margin-left .2s ease-in;transition:margin-left .2s ease-in}@media screen and (max-width:1136px){#story{margin-right:1.5em}}#passages{max-width:54em;margin:0 auto}.no-transition{-webkit-transition:none!important;-o-transition:none!important;transition:none!important}:focus{outline:thin dotted}body{color:#eee;background-color:#111}a{cursor:pointer;color:#68d;text-decoration:none;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}a:hover{color:#8af;text-decoration:underline}a.link-broken{color:#c22}a.link-broken:hover{color:#e44}span.link-disabled{color:#aaa}area{cursor:pointer}button{cursor:pointer;color:#eee;background-color:#35a;border:1px solid #57c;line-height:normal;padding:.4em;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}button:hover{background-color:#57c;border-color:#79e}button:disabled{cursor:not-allowed;background-color:#444;border:1px solid #666}input,select,textarea{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}select{padding:.34em .4em}input[type=text]{min-width:18em}textarea{min-width:30em}input[type=checkbox],input[type=file],input[type=radio],select{cursor:pointer}input:focus,input:hover,select:focus,select:hover,textarea:focus,textarea:hover{background-color:#333;border-color:#eee}hr{display:block;height:1px;border:none;border-top:1px solid #eee;margin:1em 0;padding:0}textarea{resize:vertical}audio,canvas,progress,video{max-width:100%}.error{padding:.25em;background-color:#511;border-left:.5em solid #c22}.error[title]{cursor:help}.highlight,.marked{color:#ff0;font-weight:700;font-style:italic}.nobr{white-space:nowrap}#story a.link-external:after,.error:before,[data-icon-after]:after,[data-icon-before]:before,[data-icon]:before{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}[data-icon]:before{content:attr(data-icon)}[data-icon-before]:before{content:attr(data-icon-before) "\00a0"}[data-icon-after]:after{content:"\00a0" attr(data-icon-after)}.error:before{content:"\00a0\e80d\00a0\00a0"}#story a.link-external:after{content:"\00a0\e80e"}.passage{line-height:1.75;text-align:left;-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.passage-in{opacity:0}.passage ol,.passage ul{margin-left:.5em;padding-left:1.5em}.passage table{margin:1em 0;border-collapse:collapse;font-size:100%}.passage caption,.passage td,.passage th,.passage tr{padding:3px}.passage .error{white-space:nowrap}.macro-repeat-insert,.macro-timed-insert{-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.macro-repeat-in,.macro-timed-in{opacity:0}</style>
<style id="style-ui-bar" type="text/css">#story{margin-left:20em}#ui-bar.stowed~#story{margin-left:4.5em}@media screen and (max-width:1136px){#story{margin-left:19em}#ui-bar.stowed~#story{margin-left:3.5em}}@media screen and (max-width:768px){#story{margin-left:3.5em}}#ui-bar{position:fixed;z-index:50;top:0;left:0;width:17.5em;height:100%;margin:0;padding:0;-webkit-transition:left .2s ease-in;-o-transition:left .2s ease-in;transition:left .2s ease-in}#ui-bar.stowed{left:-15.5em}#ui-bar-body{height:90%;height:calc(100% - 2.5em);margin:2.5em 0;padding:0 1.5em}#ui-bar.stowed #ui-bar-body,#ui-bar.stowed #ui-bar-history{visibility:hidden;-webkit-transition:visibility .2s step-end;-o-transition:visibility .2s step-end;transition:visibility .2s step-end}#ui-bar{background-color:#222;border-right:1px solid #444;text-align:center}#ui-bar-tray{position:absolute;top:.2em;left:0;right:0}#ui-bar a{text-decoration:none}#ui-bar hr{border-color:#444}#ui-bar-history [id|=history],#ui-bar-toggle{font-size:1.2em;line-height:inherit;color:#eee;background-color:transparent;border:1px solid #444}#ui-bar-toggle{display:block;position:absolute;top:0;right:0;border-right:none;padding:.3em .45em .25em}#ui-bar.stowed #ui-bar-toggle{padding:.3em .35em .25em .55em}#ui-bar-toggle:hover{background-color:#444;border-color:#eee}#ui-bar-history{margin:0 auto}#ui-bar-history [id|=history]{padding:.2em .45em .35em}#ui-bar-history #history-jumpto{padding:.2em .665em .35em}#ui-bar-history [id|=history]:not(:first-child){margin-left:1.2em}#ui-bar-history [id|=history]:hover{background-color:#444;border-color:#eee}#ui-bar-history [id|=history]:disabled{color:#444;background-color:transparent;border-color:#444}#ui-bar-body{line-height:1.5;overflow:auto}#ui-bar-body>:not(:first-child){margin-top:2em}#story-title{margin:0;font-size:162.5%}#story-author{margin-top:2em;font-weight:700}#menu ul{margin:1em 0 0;padding:0;list-style:none;border:1px solid #444}#menu ul:empty{display:none}#menu li{margin:0}#menu li:not(:first-child){border-top:1px solid #444}#menu li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-transform:uppercase}#menu li a:hover{background-color:#444;border-color:#eee}#menu a,#ui-bar-history [id|=history],#ui-bar-toggle{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#menu-item-restart a:before,#menu-item-saves a:before,#menu-item-settings a:before,#menu-item-share a:before,#ui-bar-history [id|=history],#ui-bar-toggle:before{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}#ui-bar-toggle:before{content:"\e81d"}#ui-bar.stowed #ui-bar-toggle:before{content:"\e81e"}#menu-item-saves a:before{content:"\e82b\00a0"}#menu-item-settings a:before{content:"\e82d\00a0"}#menu-item-restart a:before{content:"\e82c\00a0"}#menu-item-share a:before{content:"\e82f\00a0"}</style>
<style id="style-ui-dialog" type="text/css">html.ui-dialog-open body{overflow:hidden}#ui-overlay.open{visibility:visible;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-overlay:not(.open){-webkit-transition:visibility .2s step-end,opacity .2s ease-in;-o-transition:visibility .2s step-end,opacity .2s ease-in;transition:visibility .2s step-end,opacity .2s ease-in}#ui-overlay{visibility:hidden;opacity:0;z-index:1000;position:fixed;top:0;left:0;height:100%;width:100%}#ui-dialog.open{display:block;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-dialog{display:none;opacity:0;z-index:1100;position:fixed;top:50px;margin:0;padding:0}#ui-dialog-titlebar{position:relative}#ui-dialog-close{display:block;position:absolute;right:0;top:0;white-space:nowrap}#ui-dialog-body{overflow:auto;min-width:280px;height:90%;height:calc(100% - 2.1em - 34px)}#ui-dialog-body.settings [id|=setting-body]{display:table;width:100%}#ui-dialog-body.settings [id|=setting-label]{display:table-cell;padding:.4em 2em .4em 0}#ui-dialog-body.settings [id|=setting-label]+div{display:table-cell;min-width:8em;text-align:right;vertical-align:middle;white-space:nowrap}#ui-overlay{background-color:#000}#ui-overlay.open{opacity:.8}#ui-dialog{max-width:66em}#ui-dialog.open{opacity:1}#ui-dialog-titlebar{background-color:#444;min-height:24px}#ui-dialog-title{margin:0;padding:.2em 3.5em .2em .5em;font-size:1.5em;text-align:center;text-transform:uppercase}#ui-dialog-close{cursor:pointer;font-size:120%;margin:0;padding:0;width:3.6em;height:92%;background-color:transparent;border:1px solid transparent;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}#ui-dialog-close:hover{background-color:#b44;border-color:#d66}#ui-dialog-body{background-color:#111;border:1px solid #444;text-align:left;line-height:1.5;padding:1em}#ui-dialog-body>:first-child{margin-top:0}#ui-dialog-body hr{background-color:#444}#ui-dialog-body ul.buttons{margin:0;padding:0;list-style:none}#ui-dialog-body ul.buttons li{display:inline-block;margin:0;padding:.4em .4em 0 0}#ui-dialog-body ul.buttons>li+li>button{margin-left:1em}#ui-dialog-body.list{padding:0;min-width:140px}#ui-dialog-body.list ul{margin:0;padding:0;list-style:none;border:1px solid transparent}#ui-dialog-body.list li{margin:0}#ui-dialog-body.list li:not(:first-child){border-top:1px solid #444}#ui-dialog-body.list li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-decoration:none}#ui-dialog-body.list li a:hover{background-color:#333;border-color:#eee}#ui-dialog-body.saves{padding:0 0 1px}#ui-dialog-body.saves>:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves table{border-spacing:0;min-width:340px;width:100%}#ui-dialog-body.saves tr:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves td{padding:.33em .33em}#ui-dialog-body.saves td:first-child{min-width:1.5em;text-align:center}#ui-dialog-body.saves td:nth-child(3){line-height:1.2}#ui-dialog-body.saves td:last-child{text-align:right}#ui-dialog-body.saves .empty{color:#999}#ui-dialog-body.saves .datestamp{font-size:75%}#ui-dialog-body.saves ul.buttons li{padding:.4em}#ui-dialog-body.saves ul.buttons li:last-child{float:right}#ui-dialog-body.settings div[id|=setting-body]+div[id|=setting-body]{margin:.5em 0}#ui-dialog-body.settings [id|=setting-control]{white-space:nowrap}#ui-dialog-body.settings button[id|=setting-control]{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}#ui-dialog-body.settings button[id|=setting-control]:hover{background-color:#333;border-color:#eee}#ui-dialog-body.settings button[id|=setting-control].enabled{background-color:#282;border-color:#4a4}#ui-dialog-body.settings button[id|=setting-control].enabled:hover{background-color:#4a4;border-color:#6c6}#ui-dialog-body.share{min-width:140px}#ui-dialog-body.list a,#ui-dialog-body.settings span[id|=setting-input],#ui-dialog-close{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves button[id=saves-export]:before,#ui-dialog-body.saves button[id=saves-import]:before,#ui-dialog-body.saves button[id=saves-clear]:before,#ui-dialog-body.settings button[id|=setting-control].enabled:after,#ui-dialog-body.settings button[id|=setting-control]:after,#ui-dialog-close{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}#ui-dialog-body.saves button[id=saves-export]:before{content:"\e829\00a0"}#ui-dialog-body.saves button[id=saves-import]:before{content:"\e82a\00a0"}#ui-dialog-body.saves button[id=saves-clear]:before{content:"\e827\00a0"}#ui-dialog-body.settings button[id|=setting-control]:after{content:"\00a0\00a0\e830"}#ui-dialog-body.settings button[id|=setting-control].enabled:after{content:"\00a0\00a0\e831"}</style>
<style id="style-debugview" type="text/css">#ui-bar-body>#debug-view-toggle:first-child{margin-top:1em}#ui-bar-body>#debug-view-toggle:first-child+*{margin-top:1em}#debug-view-toggle{text-transform:uppercase}#debug-view-toggle:after,#debug-view-toggle:before{font-family:tme-fa-icons;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;speak:none}#debug-view-toggle:before{content:"\e838\00a0"}html:not(.debug-view) #debug-view-toggle{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}html:not(.debug-view) #debug-view-toggle:hover{background-color:#333;border-color:#eee}html:not(.debug-view) #debug-view-toggle:after{content:"\00a0\00a0\e830"}html.debug-view #debug-view-toggle{background-color:#282;border-color:#4a4}html.debug-view #debug-view-toggle:hover{background-color:#4a4;border-color:#6c6}html.debug-view #debug-view-toggle:after{content:"\00a0\00a0\e831"}html.debug-view .debug{padding:.25em;background-color:#234}html.debug-view .debug[title]{cursor:help}html.debug-view .debug.block{display:inline-block;vertical-align:middle}html.debug-view .debug.invalid{text-decoration:line-through}html.debug-view .debug.hidden,html.debug-view .debug.hidden .debug{background-color:#555}html:not(.debug-view) .debug.hidden{display:none}html.debug-view .debug[data-name][data-type].nonvoid:after,html.debug-view .debug[data-name][data-type]:before{background-color:rgba(0,0,0,.25);font-family:monospace,monospace;white-space:pre}html.debug-view .debug[data-name][data-type]:before{content:attr(data-name)}html.debug-view .debug[data-name][data-type|=macro]:before{content:"<<" attr(data-name) ">>"}html.debug-view .debug[data-name][data-type|=macro].nonvoid:after{content:"<</" attr(data-name) ">>"}html.debug-view .debug[data-name][data-type|=html]:before{content:"<" attr(data-name) ">"}html.debug-view .debug[data-name][data-type|=html].nonvoid:after{content:"</" attr(data-name) ">"}html.debug-view .debug[data-name][data-type]:not(:empty):before{margin-right:.25em}html.debug-view .debug[data-name][data-type].nonvoid:not(:empty):after{margin-left:.25em}html.debug-view .debug[data-name][data-type|=special],html.debug-view .debug[data-name][data-type|=special]:before{display:block}</style>
</head>
<body>
	<div id="init-screen">
		<p id="init-no-js"><noscript>Apologies! JavaScript is required. Please enable it to continue.</noscript></p>
		<p id="init-lacking">Apologies! You are using an <strong>outdated</strong> browser which lacks required capabilities. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
		<p id="init-loading">Initializing. Please wait&hellip;<br /><progress></progress></p>
	</div>
	<div id="store-area" hidden><tw-storydata name="Bad End Simulator" startnode="2" creator="Twee2" creator-version="0.5.0" ifid="ee17885e-4b39-4f12-a280-1ddc940c12ad" format="SugarCube2" options=""><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">br {
  margin: 1em;
  display: block;
  font-size: 100%;
}
</style><script role="script" id="twine-user-script" type="text/twine-javascript">(() => {
	$(document).on('keyup', (ev) => {
    if (['1', '2', '3', '4', '5'].includes(ev.key)) {
      const key = ev.key - '1';
      const a_tags = $('.passage').find('a');
      if (key < a_tags.length) {
        a_tags[key].click();
      }
    } else if (ev.key === ',') {
      $('#history-backward').click();
    } else if (ev.key === '.') {
      $('#history-forward').click();
    }
	});
})();
</script><tw-passagedata pid="1" name="StoryCaption" tags="" position="">You are $name,
$description</tw-passagedata><tw-passagedata pid="2" name="Start" tags="" position="">&lt;&lt;silently&gt;&gt;
  &lt;&lt;set $name = "Arcanis"&gt;&gt;
  &lt;&lt;set $description = "a young catboy thief"&gt;&gt;
&lt;&lt;/silently&gt;&gt;What reason would there be to struggle when one could simply cast a magic spell to make life’s hardships disappear? Teleportation circles to visit exotic lands, wishing stones to aid in finding true love... these are but a few of the wonders that the mystical arts can do, but even a simple commoner's life can be greatly eased with the right spell. This unbreakable logic for you has been the northern star of your life, guiding you when you had nothing else in your future. Lucky students who spend countless hours studying and perfecting their craft in a prestigious academy, only to leave and do amazing things with their lives. But you are not one of those fortunate few.

Now, as you ebb and weave your way through the Weirmere marketplace, you scan the crowd with your keen eyes, searching for a heavy pocket to pick from an unsuspecting member of the packed, shoulder-to-shoulder throng. Almost like second nature, your thoughts drift as you expertly size up each possible target.

You clash shoulders with an elderly gentleman dressed in layers of rich violet, the most common colour worn by nobility that risk coming to the poorer districts, presumably only on business matters. “Ah, I’m sorry.” You mutter as the old noble gives you a dirty look and quickly steps away. You continue forward, keeping a measured pace, until you finally turn left down a narrow alley, then left again up a very narrow flight of stone steps. You come to a stop on the roof of your favourite spot in Weirmere that overlooks the marketplace and all the people below.

Feeling safe here, and having retreated to this spot many times, you take out the small coin purse which, until just a minute prior, did not belong to you. A dozen silver coins are contained within. Enough to feed you well enough for a week. There is an old neglected tree far out of town that you visit once a fortnight, and under the foot of that tree you leave what silver or other valuables you have stolen while in the Weirmere marketplace, or from elsewhere in the city of Praxis.

Although you don't have much, you always save some. Half holding a hopeless dream of affording schooling someday, and half because there is inevitably some kind of unfortunate expense that drains what little you have in your pockets.

You sigh as you weigh the coins in your hand. A catboy like yourself isn't even going to find employment in a non-criminal line of work. Hell, even many humans find it hard enough. You only do this because you have to survive. Catfolk, and beastfolk in general, are merely second-class citizens when it comes to life in the city.

[[Snoop around nearby|Snoop]]
[[Head out]]</tw-passagedata><tw-passagedata pid="3" name="Snoop" tags="" position="">As you sit there on the roof under the stifling hot summer’s afternoon, you can’t help but hear stifled moans from the alleyway you just passed. Unable to resist your curiosity and temptation, you steal a peek at the source of the sound, easing your way silently over to the edge of the roof, peering cautiously down at the alley below.

You see a very buxom young human woman with her back against the alley wall, being pressured by a smaller, waifish woman with ear-length sandy-blond hair. You stare for a hot heavy second into her deep cleavage line from this viewpoint. She's heavier set than the average woman, and much better dressed. If you had to guess by her attire, she looked to be nobility trying to disguise herself as poorer, but failing badly, given the mismatched accessories.

Standing chest-to-chest with this nobleman’s daughter is the smaller girl, her chest not nearly as blessed. She looks to be an actual member of the poverty-class, which you also belong in. You watch as she passionately slips her tongue into the other's mouth, slipping her hand into her dress, and groping at her tits with surprising roughness. As if in exchange, the noble girl slips her hand down her lover's crotch, rubbing her pussy from over the tattered-brown dress.

This isn’t the first time you’ve caught people in the act of satiating their lusts like this. As a thief, you have something of a knack for seeing others without being seen yourself. And as a catboy, you also have particularly keen eyes and ears, and agility far exceeding anything a human would be capable of.

“What if we’re seen?” says the noble girl, her well-spoken accent cementing in your mind that she is definitely of cultured upbringing.

The sandy-haired girl ignores her question, and puts her mouth on the girl's breast, kissing the nipple. She moans in response, quickly becoming short of breath, and pausing her hand's reciprocal motions, simply letting herself be played with.

With this sight, you've unquestionably become erect, and despite remaining hidden, feel a slight sense of embarrassment. The impulse to play with yourself tugs at you, but you don't act on it, content on just watching the events unfold for now. At any given moment the noble girl could look up and you could be spotted, a shame partially out of being caught as a peeping tom, but also kind of out of a professional pride.

The dominating girl lifts her head back, revealing the noble girl’s breasts, slick with saliva and lust, pulling them out to expose them to the cool alleyway air. Her nipple has perked up, and she doesn't hold back her pleasure.

You can't help but play with your cock a little now, spreading your legs wide as you lay flat against the roof of the stone building, imagining those fat, perky tits for yourself to play with.

The noble girl lets out another stifled moan as she puts her palms against the wall into an even more submissive position. You watch as the sandy-haired girl continues to tease, play, and massage the noble girl’s breasts and body, until finally the noble girl, blushing red in the face, pulls her tits back into her dress, regaining some composure.

“What’s wrong, Emma?” says the sandy-haired girl, disappointedly.

“I... I have a gift for you.” says Emma, as she reveals a tiny emerald stone the size of a grain of rice.

//Wow!// You think, genuinely shocked to see a magical artifact before your eyes. A normal human’s eyes wouldn’t be able to see it from this high up on the roof, but for you, it's no problem. You have only seen these magic stones maybe a handful of times in your life.

“Is that a Delilah stone?!” The sandy-haired girl gasps, just as amazed as you are to see it.

“Yes, Bonnie.” says Emma, a little condescendingly.

“Is it... dangerous?” says Bonnie, taking a tiny step back as she collects herself, wiping the spit off her plump lips.

“Some are,” says Emma, “but not this one. I hired a sorceress to make this for us. For you.”

“What does it do?” says Bonnie, fascinated. You're glad she's acting as a stand-in for your curiosity.

“It’s a spell, contained in the Delilah-stone. The sorceress said it's only good for one use.”

“But you still haven’t told me what it does!” says Bonnie, more excited than hesitant now.

“Do you trust me?” asks Emma.

“Yes.” says Bonnie, without hesitation.

“Okay, then hold still and let me use it on you.”

“Really, though… is it safe?”

“I love you.” Emma says, with extra care in her voice. “I wouldn’t do anything in the world that would hurt you.”

“Okay.” says Bonnie, nodding.

You watch as Emma closes her eyes and the Delilah-stone begins to glow a bright emerald. In the next instant, the stone cracks, and a glowing green mist streams directly into Bonnie's chest.

Bonnie breathes in and out quickly, but then settles as if nothing happened.

“What was that?” she says, “What was the spell?”

Emma looks at the now broken Delilah stone pinched between her fingers. But then Bonnie gives a sudden squeal of fright and shivers, although you can’t see why. Several seconds later, the cause becomes obvious. //Bonnie’s breasts are growing!//

The bust line of her brown summer dress starts to give as the breasts underneath quickly rival Emma’s. “Oh my god! They’re getting so big!” says Bonnie in a hushed voice, alarmed, but not upset. She holds up her newly swelled tits. “That’s what it does?!”

“You like it?” says Emma, “I know you love playing with mine so much… and I know how much you like it when I play with yours, too.”

“I love them!” says Bonnie, excitedly. “This is amazing!”

Her new breasts look even bigger than Emma's, given how small her petite frame is. You could only have imagined something like that, and you're struggling to contain your lust. You're definitely going to masturbate to this after.

You hear a mild gurgling sound as Bonnie’s tits grow even bigger, finally snapping the straps of her summer dress, and spilling out of her clothes. “Oh!” Bonnie cries, now having to hold up her dress whilst also propping up the largest and most awe-inspiring pair of breasts you’ve ever seen.

“I’m sorry, I didn’t think it would be this much!” says Emma, panicked.

“It’s fine—it’s fine.” says Bonnie, still amazed but a little uncomfortable.

“It's only supposed to be for a few hours, we can… we can hide and wait it out here if it's not okay!”

“It’s fine! If it's only for a little bit, then we should have a little fun while it lasts, right?”

Emma takes off her shawl and wraps it around Bonnie's shoulders, hiding the broken straps but doing nothing for her massive tits.

“Look!” says Bonnie, suddenly, pointing up at you. You stumble back and flatten your ears, hiding from their sight. Damn it, you got too excited watching!

“Come down here so we can talk to you.” says Bonnie, sternly.

You peer hesitantly over the edge, barely enough so that you can see. Emma is looking up too, confirming that you've been caught peeping.

Your face flushes with embarrassment. What are you going to do, run away? It's not like you can just go down and try to explain you weren’t //intending// to peep on them, it just happened. But maybe if you talk to Emma you could sort it out, maybe even ask her about the sorceress and her magic and… no, you shake away your thoughts. Or maybe they'd just want a closer look at you so they can call the local guards over to rough you up.

[[Talk with them. It's not like you can't easily get away.|Talk]]
[[Sneak off and hope you'll never see them again.|Sneak]]</tw-passagedata><tw-passagedata pid="4" name="Talk" tags="" position="">You think for a short moment before finally settling on giving a reply. They're two normal girls, and it's pretty unlikely they'd have anything up their sleeves to use against you. With impressive feline grace, you descend from the top of the building as if you were merely sliding down. You catch yourself glancing at Emma and Bonnie’s breasts a bit too long now that they're directly in front of you.

“Care to explain yourself?” says Emma.

“I was on the roof.” You say, as if that were enough of an answer to satisfy them.

“And what were you doing on the roof?” says Emma, eyeing you intently. She moves a little closer toward you, her heaving breasts now a hand's width from touching your chest.

“Relaxing.” You say, knowing it not to be a wise course of action to reveal one’s profession as a thief.

“How long were you watching?” says Bonnie. Unlike Emma, she closes the gap and lets her new breasts press into your shoulder. You can feel the incredible heft to their warm jostling weight as you instinctively look down into her deep inviting cleavage and back up to her eyes.

“Oh Bonnie, don’t tease him.” Emma puts her hands gently on Bonnie’s shoulders.

“We’re not angry with you.” says Emma. It’s then she strokes the fur underside of your neck with her left hand, catching you off guard. It feels so good to be touched like that, and your hair stands on end from the pleasure.

“He’s so cute!” says Bonnie, “Ah, look! He’s getting turned on!”

You can't help but blush as you think they must have noticed your pitched tent, from your body naturally responding to the two rather voluptuous girls touching and pressing at you. You reach down at your crotch to adjust yourself slightly, awkwardly.

Bonnie and Emma both break into a fit of giggles as you do this. Clearly Bonnie hadn’t actually meant what you thought she meant. You catch the two girls sharing a quizzical look at each other before they nod and smile knowingly, looking back to you. You feel Emma’s hand rest against your crotch, pressing against you seductively. Before you can do anything to respond, you feel both women take hold of you and press you against the wall. Their grip is firm enough that it would take you a bit of effort to break out of it, but right now you’re not really sure if you want to.

“Do you like them?” says Bonnie playfully, as you feel her breasts pressed heavily against you. She's obviously enjoying her new assets, and you're not going to complain. At the same time, you feel Emma’s hand caressing your balls and shaft through the fabric. You’re definitely hard now, and you can feel your body heating up in anticipation of what might happen.

“Y-yes.” You stammer. “Of course.”

You feel Emma release her hand from your crotch as she gets up and looks around.

“Where are you going?” says Bonnie as Emma hurries across the alley to an old wooden door. She tries it and it opens.

“Emma?!” says Bonnie, in a loud whisper. Both you and Bonnie gaze at her as she disappears into the building on the other side of the alley, leaving you two alone for a moment. She returns with an excited look on her face.

“It’s clear! Come quick, out of the alley!” she says.

You feel Bonnie’s hand grip your wrist firmly as she guides you into the small building. You pass beyond the doorway and behind it appears to be a neglected out-of-business store. All the shelves are empty, and there are small cobwebs in the corners of the ceiling. Despite what should be a gloomy space, the sunny weather streaming through the boarded up windows makes the space rather pleasant. The store must have been very cozy when it was open.

Emma approaches you, grabbing your other wrist and together, she and Bonnie take you across the store to a large countertop.

“Sit.” says Emma. Feeling hot and aroused, you do as you’re told and hop up onto the countertop.

“Good.” she says, “Now. You wanted to watch us? Then be a good little kitty cat and watch.”

Emma turns to Bonnie and pulls her close. Bonnie gasps as their breasts press together, making it look for a moment as if they were both wearing very tight corsets. You can feel the immediate lust and anticipation between them as Bonnie and Emma look into each other’s eyes with passion. Emma brings her hands to Bonnie’s borrowed shawl and pulls it gently away. Then she takes Bonnie’s dress and tugs it down until Bonnie’s humongous tits flop out, jostling as if they were full of thick creamy milk. In a matter of seconds, Bonnie stands completely naked, her crotch having a light patch of blonde pubic hair that you can now see.

A rickety old chair creaks as Emma pulls it close and has Bonnie sit there in all her naked beauty. Bonnie shudders at her nakedness, and her chest rises and falls quickly as her face reddens, clearly having never before done something like this in front of another viewer. “Here?” she says with bated breath.

Emma doesn’t answer. Instead, Emma shakes her hair out of her face and gets to her knees and parts Bonnie’s legs. Bonnie’s crotch is blocked from your view thanks to Emma’s head nestled into it, but the erotic scene makes you hot with arousal as Emma begins to lick and play with Bonnie’s pussy. Bonnie in turn lets out an unhindered moan, her body easily responding to the touch. She lets her hand rest gently atop Emma’s head, curling a lock around her index finger. Her feet arch as they press against the old wood floorboards.

You flinch as Bonnie’s gaze meets yours. She doesn’t look away as you see her bite her bottom lip enticingly. Emma continues to lick and tease Bonnie’s pussy, and you can see the full effect it is having on Bonnie as her mouth form an ‘o’ shape and her eyelashes flutter as the pleasure continues to build.

You can't help but reach down and feel your throbbing cock against your palm, fully erect and bulging in your bottoms. Still maintaining eye contact with Bonnie, you start to jerk your cock slowly, with an uncomfortableness but strange arousal from looking deeply at each other. Bonnie glances down at you and back up to your eyes.

“Wait. Stop.” says Bonnie. Emma seems as surprised as you, lifting her head up.

“This isn’t turning me on.” says Bonnie, gesturing to you. “He’s just too… boyish, I guess.” You wince at what should have been obvious from a pair of lesbians.

Emma looks at you and hums in agreement. “Yeah, this isn’t as fun as I thought it would be.”

You see Emma think things through for a moment. You’re sure she’s about to ask you to leave until she smiles. “I know.” She says, and she picks up Bonnie’s dress with the busted straps. She walks over to you and chucks it over your lap.

“Put it on.” She says. “I’ll help with the straps.”

You look at her wide-eyed. Is she serious?! There’s no way you’re going to wear a dress!

“Either you wear it or go.” says Emma, smirking, putting her hands to her generous hips.

You are still incredibly aroused and very sexually close to the two of the hottest girls you've ever seen. And you don't want to admit it, but the embarrassment of the situation is actually turning you on a lot. You’re not sure what madness inside you inspires you to do it, but you start to put the dress on. But Emma stops you again.

“No.” she says, “Take all your clothes off first.”

You groan and do as she says, taking off your bottoms, and your cloak, and setting down your little satchel of provisions on top of the rest. You’re naked before them now, but not for long as Emma helps put Bonnie’s summer dress over you.

“Oh wow!” says Emma, impressed when she looks you over. “You look so feminine already! You would make an excellent catgirl. What do you think, Bonnie?”

“Cute!” says Bonnie. She stands from the chair and hurries over to you, pressing her breasts into you again. This might be the stupidest thing you've ever done, but at this point you're too aroused and committed.

You feel them play with your fur, caressing you softly. The two seem way more interested in you now than they did before. Bonnie reaches down and cups your behind, her fingers groping firmly, and you flinch at her touch, but it feels good. You feel Emma move her hand onto your shaft, and she begins to pump your cock. She might be a lesbian, but you can tell she's handled a man before. You don't last long. You gasp and cum quickly, squirting your load onto the inside of Bonnie's dress, who quickly becomes horrified.

“Look what he did!” says Bonnie, surprised and annoyed.

“It’s my fault.” says Emma, “Don’t be angry with //her//.”

Did she just call you ‘her’? You feel an odd sensation in your stomach like butterflies.

“Now what am I going to wear?” says Bonnie, sighing. “We’ll have to scrub it.” says Emma.

It seems you’ve ruined this impromptu erotic scene. Your head is a bit fuzzy from cumming so recently, and how fast things are happening.

“You.” says Emma, putting a few coins into your palm. “Go and get Bonnie a new dress and make it quick. We’ll be here when you get back.”

You did just cum inside Bonnie’s dress. Sure, she made you, but you didn’t make any attempt to stop her advances and it was incredibly pleasurable. You start to take the dress off, but Emma stops you.

“No, go out like that. Here.” she says. She rubs the front of the dress where you came so the stain doesn’t look as obvious from the outside.

“Go already!” Emma says, shooing you out the door.

Before you know it, you’re back out in the alleyway, and still wearing a dress! You look around, suddenly feeling very on show and realizing the precarious situation. You feel Bonnie’s hand at your shoulder then as she peeks out, still naked, from the abandoned store. “Don’t forget this.” She says, and she puts a small flower in your fur. You can’t see this yourself, but you look remarkably feminine for a male cat now.

You don’t waste any time. You nervously leave the alley and find yourself back in the bustling Weirmere marketplace street. Thankfully, your fur is covering your deeply red face.

“A damned cat stole my money!” you hear that purple-dressed old nobleman from before say to a guard. The old man looks right at you, staring intently, and you wonder if he might recognise you, but he quickly glances away as he continues to complain to the guard.

You go up to a stall where cheap dresses are on sale. A young woman looks at you and smiles.

“What would you like?” she says.

You look among the dresses on sale and wordlessly pick out a simple summer dress as close in appearance to the one you're already wearing.

“Excellent choice.” says the girl, smiling and you exchange several coins for the dress. Once you have it draped over your arm you waste no time hurrying back towards the alley.

You're so lost in thought that you don't notice as you bump hard into a large Catboy like yourself. He's a head taller than you, and more muscle than lean.

“Hey!” he says, turning around to you with a look of anger, but his expression softens when he sees your face.

“Oh.” he says, grinning. “What’s your name, cutie?”

You freeze. You don't dare say a word in your clearly not feminine voice. How do you get out of this?

“What’s-a-matter? Shy?” says the big cat, standing in an unintentionally intimidating way.

You feel his huge arm drape around your shoulders. “That’s a real pretty dress you’re wearing. Come around here often?”

He’ll surely want to break your neck when he finds out you’re not really a catgirl, but thankfully after a short awkward silence, you feel the hefty weight of his arm ease off of you.

“Alright." he lets up, holding up his hands, disappointed. "I can take a hint.” It looks like you’re free to go. You leave in a hurry, but not without looking back over your shoulder. He notices you look back and winks at you as you turn off into the alley. Your heart is thumping in your chest. You’re not gay, yet that was incredibly exciting just now. Humiliating, but exciting. But you’re sure you’ll never, ever, ever do anything like this again for as long as you live.

You return to the abandoned store.

“That was quick. Good job.” says Emma. You start to undress but she stops you again.

“No, we’ll take the new one.” she says, taking the new dress from you and giving it to Bonnie. Surprisingly, it fits her very well, although her breasts are stuffed in and heaving like two giant watermelons at the front.

“You look so good in it! Keep it.” says Bonnie.

You feel Emma slide something in your palm. It’s a note. The two begin to leave as you read. “If you ever want to have fun with us…come see us in the dress and we’ll play again. But //only// in the dress. We like you //so much better// like this.”

Your mind is a little overloaded from everything you’ve just experienced. You’re still in a daze as Bonnie and Emma exit, giving a friendly wave goodbye before you're left alone in the store. You stand there for a bit, and finally undress and change back into your normal clothes, but not before stuffing the dress into your satchel. With this done, you leave the store and the troublesome alleyway.

[[Head out]]</tw-passagedata><tw-passagedata pid="5" name="Head out" tags="" position="">You buy food to eat with the money you earned earlier and return to the place that has been your home these past few weeks; you were fortunate enough to find a funeral parlor that has ovens burning day and night. Because the ovens are constantly being used, and because most people avoid such a place unless they have need of the service, you have found a very comfortable and isolated home on the roof of one of the cremation buildings.

The nights in these parts are cold despite your fur, so the warmth radiating up from the building helps ease you off to a comfortable sleep. Nimble as you are, you’ve managed to remain undetected by most save the crows that sometimes occupy the space. You slide into your comfortable nook between the two warm chimneys, wrap yourself up in a blanket, and let yourself drift off to sleep while the constant thrum and crackle of the fire acts as white noise.

[[Sleep]]</tw-passagedata><tw-passagedata pid="6" name="Sleep" tags="" position="">DAY 2

Come dawn, you rise, double-check your pockets and provisions, and head out to the Weirmere market again. You buy several cooked sardines on a stick, your favourite snacks to eat. As you sit on a stone step eating the last of the sardines, a familiar little boy comes up to you and stands there.

“There’s a new job for you,” says the little boy.

Though you don’t know for sure, it is likely he’s an orphan. What you do know is that he works as a messenger boy in the criminal underworld. If the riff-raff like yourself need a message delivered quickly, then what better way than one of the endless messenger boys who’ll do so for very little coin? You were even in this line of work once when you were young, but for the time it takes to seek out the persons you’ve been assigned to look for, and the consequences if you were to make a mistake or take too long in your task, simply weren’t worth the small amount of money. Stealing brought higher risk, but much greater reward for your efforts.

“Who else is getting this message?” you ask. Very rarely do you ever get a personal invitation to a new job. Instead, the fleet of messenger boys seek out all the thieves they can to spread the message like a human bulletin board.

“This one is for you only,” says the boy.

He hands you a roll of parchment tied with a ribbon, then hurries away down the market and out of sight, lost in the sea of other people. Your mind lingers on the young boy. How could you not feel sad for him having to work such a dangerous job at such a young age? Two years ago, he would barely be able to stand upright, let alone deliver messages to unsavory types. Although you didn’t think of yourself as particularly bad, per say, you were still a part of the underworld.

You look at the rolled parchment tied with a ribbon, thinking there might be a good chance the messenger boy has delivered it to the wrong Cat. You untie the ribbon and unfurl the crisp parchment, then read its contents.

//Thief,//

//If you are available to meet at the Crowned Badger this evening at 5pm prompt, I have a job you may be interested in taking up. This will pay far above your usual rate. Tell no one of this message under penalty of forfeiting the job.//

//Regards,//

//A.//

You’re immediately suspicious of the invitation. It wouldn’t be the first time there has been plans to abduct a Cat like you with false promises. You know that if you’re not careful, you could wind up with a collar around your neck at the leash of a new owner. Cats are the most targeted for slavery out of all the beast races. Of the little you were told of your family history as a child, you remember being told the story of your grandfather’s years of slavery to a noble family before he bought his freedom. Just the thought that someone in your heritage has already lived out the humiliation of slavery… You shake your head from the negative thoughts. You make a decent living as a thief who can get the job done stealthily and on schedule. It isn’t outside the realm of possibility that this invitation is an offer to step up in reputation in the criminal underworld.

The Crowned Badger resides on the opposite side of the city. You'd have to leave now if you wanted to scout it out a bit early as a precaution. You make quick work leaping from one rooftop to another and dropping to the ground when they are blocked. At night, you’re truly in your element, the cool breeze rippling against your fur and cloak. Your keen Cat eyes see easily in the dark as you pounce, leap, and side-step gracefully with minimal conscious effort.

The tavern glows in the night from the lantern lights within. You can hear carousing and laughing as you approach and see the place is full of patrons. Several Cats of your species are around, but most either have collars on denoting their role as slaves or are working for the Crowned Badger as servants. This is not an unusual sight, but it is still one that leaves you with a sour taste in your mouth.

With not much else to go on, you make your way to the bar and order yourself a white kitty: just another way of saying sweetened, creamy milk with alcohol in it. You pay for the drink and then look for a better place to reside and watch the patrons until this mysterious ‘A’ sends for you. The inside is far too crowded for your liking, so you head out to the back. To your surprise, the back of the Crowned Badger is quite pleasant, with real grass and even a small fountain. Overhead, there are red and blue lanterns, and by the side gate entrance, a blind man is strumming a cittern that fits the warm night mood perfectly.

You take a sip of your drink and feel the warmth spread down your throat and heat up your body. If you’re not careful, you can get addicted to these–they're that good. Since yesterday’s pickpocketing went well, you have enough extra coin to treat yourself. Plus, being a little inebriated is always good for socializing. As you take another sip, you feel a hand tap your shoulder.

You turn and see a pretty young Catgirl around the same age as you. Her fur is snow white and lined with thin pink stripes. She has a tray of used glasses in one hand.

“Sir,” she says, overly formal while on duty. “There is a lady who wishes to speak with you upstairs.”

You give a nod, and the pink-striped Cat leads the way back inside. She hands off her tray of used cups to a human working behind the bar, and she leads you up a short set of winding stairs. On the way up, you can’t help but take notice of her perky behind and the way her tail swishes back and forth invitingly. You wonder if she's doing it intentionally. For a moment, you forget all about your reasons for coming to the Crowned Badger and wonder if you might ask this Catgirl out on a date after the meeting. Of course, this is just a daydream, since you’ve never had the confidence to do something like that.

Upstairs, the bar is empty, save for a human woman sitting at a table. The upstairs bar area shouldn’t be vacant, but it seems it has been barred from common entry so this very meeting can take place.

Drawing closer, you can see that she is smiling, and she stands from her seat to offer you a hand to shake. She’s taller than you are, with very long and slender legs. The heels she’s wearing give her already impressive stature even more height. Her professional outfit and her cheerful disposition make you feel immediately at ease. She’s no career criminal. If anything, she’s someone’s assistant way out of her element.

“Hello. Please sit,” she says, and you take the seat opposite of her at the table.

“I’m Astraya, or ‘A’, as you would know me from the letter.”

You give a nod. When meeting for work, you find it best to say as little as possible until you can safely predict their behavior.

“Will you need anything else?” asks the pink-striped Catgirl. You hadn’t realised she was still here.

“That will be all. Thank you,” says Astraya, not bothering to look at the catgirl she’s dismissing. The catgirl, like yourself, can hardly be heard moving away since she is so nimble on her pawed feet.

“First of all, thank you for coming on such short notice,” says Astraya, smiling, interlocking her fingers as she leans forward.

You give a small nod for her to continue.

“Well, before I go over the details of the job, I’ll need your word that you will not tell anyone about it should you not want to take it,” she says.

You notice now a strange dazzle in her eyes, like minute fireworks. It is there for a moment and gone the next, leaving you wondering if you really saw it there at all.

“I won’t tell anyone,” you say. “All I //can //give you is my word.”

“Very good, that’s all we need,” says Astraya.

You begin to wonder who she means by ‘we’...

“The job, if you wish to take it, will be a simple theft.”

Astraya takes out a roll of parchment and spreads it out on the table. She unfurls it to reveal an artistic rendering of a beautiful amulet that, if it is to scale, would be the size of your closed fist.

“This amulet is what we want. It has been in my master’s family for generations, but in the last century it has fallen into //common //hands. While my master could see to take back the amulet by direct means–he has the manpower for it, let me tell you–he believes a tactful approach would be the best course of action to avoid unnecessary trouble.”

“Is there anything special about the amulet besides its importance to your master?” you ask.

“It is a priceless heirloom,” says Astraya. “It holds great sentimental value. There are many like it, but my master wishes to have the amulet that rightfully belongs in his lineage.”

“Who is your master?” you ask.

“My master would like to remain anonymous. For that, we are willing to pay a larger than common fee for your services,” says Astraya.

You have more questions, but you have to be careful. One wrong question could sour this whole conversation and leave you without a lucrative job. You decide to turn the discussion to the most important aspect for you.

“What is my compensation for stealing the amulet?” you ask.

Astraya smiles. “One hundred gold coins.”

Your ears twitch and the fur along your spine ripples from shock. Did she just say //one hundred gold coins?!//

“I’m sure there isn’t a dream in this world you couldn’t buy with that kind of money,” says Astraya, knowingly. “The total will be paid on delivery of the amulet. If you choose to take the job, you will be paid ten in advance. Is that understood?”

“Yes,” you say, a bit dumbfounded.

“Now,” says Astraya, “you’ll need to get acquainted with these...”

Astraya moves the rendering of the amulet aside in favor of several more rolls of parchment.

“These are the layouts of the surrounding buildings, as well as the outside layout of the main //tower //where our informant tells us the amulet is being stored.”

You take a cursory glance over the rendering and can immediately tell why this job is worth a hundred gold coins. The building is huge and there are many areas that demand a stealthy individual.

“How many guards will they have?” you ask.

“Approximately twenty, give or take,” says Astraya, “and they’re not your run of the mill guards either. They’re Hunters, well trained and contracted to defend the tower.”

“But,” you say, interjecting as you remember hearsay you’ve picked up in conversations with the few other thieves you know, “Hunters won't pursue me beyond the tower, right?”

“You won't get caught.” Astraya smiles and nods; she really has one of those infectious smiles that makes you feel warm and fuzzy inside. You try your best to ignore the feeling in an attempt to stay objective and professional. It’s hard not to notice her coral red lipstick shining glossily on her plump lips, or the way her eyes just seem to //dazzle //on her intelligently knowing face. You feel your fur ripple and your tail start to swish to let out the desire you’re feeling to get to know Astraya better.

She points with a long, slender finger, with the tip of a long, manicured nail, to the parchment between you both. You can see the layout of the tower and all four levels of it. Beyond the high number of guards that could be on duty, it seems to be within your ability to accomplish, so long as you remain stealthy.

“When do you want this done?” you ask.

“One week from today,” says Astraya.

You give a nod. “So,” she says, “think you’re Cat enough for it?”

She extends her hand for you to shake. You hesitate. Of course you want to shake her hand and accept the job. You would even do it right now just to see her eyes dazzle again, but you told yourself before that you would be cautious. What if there is more to this job than she’s telling you? You can tell that something is wrong, that you’re not being told the whole truth, yet for some reason you’re finding it difficult to say no. Every thought that rises up in your mind to make an objection to accepting the job feels pitiful, like a kitten without claws pawing playfully. You almost feel like a spectator in your own body as you see your hand meet Astraya’s and shake it. It’s always strange touching the hand of a woman, something that doesn’t happen often for you. It confirms to you in a small way that she’s real, and firm, though her hand is slender and soft.

“Very good,” she says. “I have a contract you’ll need to sign, and then I’ll give you the layouts of the tower I have in my possession. After that, we’ll part ways. Assuming all goes well with this job, I’ve left instructions with the other documents for how you’ll be able to find me again to receive your payment in exchange for the amulet.”

[[Leave]]</tw-passagedata><tw-passagedata pid="7" name="Leave" tags="" position="">You leave the Crowned Badger first for your safe spot above the crematorium. Over the next few days, you pore over the dozen rolls of parchment that tell you the layout of the tower you’ll be breaking into. From what you can discern, the best way into the tower would be from the sewers underground. It’s not ideal, but the tower is guarded well enough that only an overlooked entry would be your ticket in. Getting out, on the other hand, would be much easier, given some preparation on your part. There are barred windows all over the tower that would be impossible for a human being to escape, but you, as a Cat, will be able to slink between the bars quickly. You’ll need to invest in several meters of rope to help you down a good deal of the tower; your feline grace will take care of the rest. The only issue with your current plan may be the weather on that day. If it rains, then it will have to be called off–not because you are against getting wet, though it wouldn’t be your preferred outcome–but because if things don’t go well and you somehow have the guards hot on your heels, you’ll need the outer tower stone to be dry to abseil down quickly and safely enough. Rain would prove to be the deciding factor in this escape scenario.

The weather seems like a silly thing to fixate on, but you’ve had several close calls due to it on previous jobs. You’ve also sadly known one thief, though human, who has fallen prey to unexpected changes in the weather.

The days leading up to the tower job are wet and miserable, which is unusual for this time of year. Perhaps fortune plans to be on your side on the fateful day, with the downpour occurring now rather than the crucial night.

The rain also proves to be a helpful aid when scoping out of the tower. For one, as you circle the tower courtyard walls, the rain provides you with a good reason to keep your face cloaked and concealed from view. You move from roof to roof in the late evenings, spying the Hunters personnel manning the outer courtyard, with men at the front gates and a man with a burly gut at the top of the tower. All of them look like strong, no-nonsense types, the kind that wouldn’t think twice about hurting you. You'll just have to never meet with them.

Two days before you intend to break into the tower, you go to the Weirmere market and purchase a saw and screwdriver. You'll take these down into the sewers from an entrance in the Weirmere market alley and remove the floor grate under the kitchen.

Thankfully Astraya had the foresight to supply you with a layout of the surrounding area, including the sewers near the tower. You had to memorise them, since the sewers are wet and unpleasant to linger once you’re down there. On your first attempt, you get lost for a bit trying to navigate your way to the correct sewage line, but after two hours of searching, you find your way using a lit lantern to guide you through the dark. It occurs to you that you //could //break into the tower a day early. You managed to climb up the sewage drain using the best of your feline prowess – no human could manage it, that’s for sure – and you came just shy of the tower’s ground floor kitchen. You have to be quiet since you can hear the cook and his staff actively working away.

You’re glad you brought your tools with you since you can see the metal bars that run across the floor of the kitchen above you. It’ll need to be quiet for you to see your way through the bars. There’s even a chance you’ll be able to screw the bars open, but you decide it isn’t worth getting any closer than a few meters away from the grate on the off chance that one of the cooks might notice you.

You finish up your scouting and head back to the crematorium.

[[Sleep and prepare for the job|Prepare]]</tw-passagedata><tw-passagedata pid="8" name="Prepare" tags="" position="">The fateful day arrives. During the morning and afternoon, you gather the last of the supplies you need. You buy an old pair of boots, gloves, and a cloak that will keep the grime off your fur.

You make your way through the maze of sewer tunnels, except this time you know where you’re going. You arrive below the vertical pipeline. Equipped with the tools you bought and a satchel that has the rope you’ll need later, you begin your ascent.

You’ve chosen the right time of day. It’s pin-drop quiet as you reach the grate. To your alarm, you discover that the grate itself isn’t even nailed down! This makes an odd kind of sense; they must have needed to access this area once before and decided it wasn’t worth the effort of screwing the bolts in place again. It would be impossible for a human being to climb up, and like most humans, they hardly ever have enough empathy to imagine someone attempting the things they can't do themselves.

You listen with your keen Cat ears for any sound that might hint at the presence of a member of tower staff, or one of the Hunters guards. There’s footsteps far away down the corridor of the kitchen outside, but not so close that you need to worry about it. This //is// going to be a job with close calls, but you’re prepared and ready for this. Before you rise up into the kitchen, you let yourself ruminate on the reason //why //you’re risking your life like this.

//A hundred gold coins.// That’s serious money that could make your daydreams actually become reality. It’s more than a //year’s// worth of expenses, maybe two. You might even be able to see if you could go to school with that, stop the criminal life, find a real job, or maybe even find an apprentice guild of magic of some kind that will accept a Cat like you? For so long, dream like these have been your guiding path during dark times, but with a job like this, your nightly thoughts have an entirely different and exciting atmosphere to them.

[[Sneak through the sewers|Arrive]]</tw-passagedata><tw-passagedata pid="9" name="Arrive" tags="" position="">You slip out of your disposable boots, cloak, and cloves, leaving you thankfully grime and sewage-water free. You have your satchel fastened close to your torso as you move quickly and soundlessly to the nearest exit from the kitchen.

You can see a Hunter guard walking away from you down the corridor. Being a thief relies on a lot of in-the-moment decisions, as the unexpected occurs all the time. Seeing this guard, you look left and, seeing that it's clear, you hastily sprint down the corridor.

Inside the tower on the ground floor, you’re already met by lavish inner ornamentation. There are portraits of presumably important men and women posed with stern looks on their faces, each face watching you like the trespasser you are as you make your way along the corridor.

So far, so good, as you turn left down an empty corridor similarly laden with fine old wood desks and chandeliers dotted at regular intervals along the ceiling. The beige carpet beneath your feet softens the already quiet thuds of your footsteps.

Your keen Cat ears prick at the sound of nearing voices up ahead. The gruffness of these voices is undoubtedly belonging to a pair of Hunters guards. You break left on instinct, going into the first available door. As anticipated, you find yourself in a large study filled with books and a huge unlit fireplace. It’s empty. You move deeper inside as you see the shadows of the Hunters team move beneath the slit of the door you just entered through.

You keep a hand over your mouth as you move behind one of the large bookshelves. After several moments, you’re sure the guards have passed, and you continue to make your way through the tower.

[[Listen]]</tw-passagedata><tw-passagedata pid="10" name="Listen" tags="" position="">After a short pause, you return to the first door you had entered from and listen for any guards. Now you’re sure they’re gone, and there aren’t others approaching, you head out of the study and back into the long hallway. You take a right when you reach the end of the hallway, then a sudden left which brings you to a narrow set of winding stairs leading upward. You race up the stairs, using your hands to paw yourself even quickly up. If you’re caught on these stairs then it’ll be very easy for one of the guards to catch you.

Your legs are burning from the effort it takes to reach the top of these stairs. You reach the first floor, finding yourself at the start of a long corridor with black stone walls. This level doesn’t have the same lavish ornamentation and welcoming chandeliers of the ground floor. Instead you feel an immediate sense of danger. Whilst nothing seems dangerous, you can see three doors on either side of the hallway, each unmarked; and there’s something about them that makes you feel it would be a bad idea to go inside.

You also notice there is a lack of guards on this floor. Perhaps even they aren’t allowed to freely roam the tower from the first floor upwards either; though you’re sure it would be a different matter if you were caught.

As you tip toe away from the stairwell you just ascended from, you notice there is what appears to be a Delilah-stone embedded to the foot of the stairwell. You step around it, thankful you didn’t tread on the magic imbued stone. You’re not sure if stepping on this Delilah stone would have activated it, or do anything at all; but to see it there makes you wonder what the stone’s purpose is on the floor. The only reasonable explanation you can think of is that it is a readied magical effect that will occur when a certain condition is met. Stepping on it could be that condition, but you’re sure a guard or two would pass through this floor on occasion, even if less frequently than the ground floor; would they know to avoid it? Would they even need to?

You decide not to think about Delilah stone anymore, for all you know it could be deactivated and merely there for ornamentation. You continue on alone the black-walled corridor, passing side tables and chairs made of stone. Again, at the far end, you reach another stairwell, this one made of black stone just like the walls. You ascend it slower than you did the first stairwell, easing slowly up; you’re pawed feet feeling the cool stone with every step. When you reach the top of the stairwell you find yourself on the second floor. Again you find there is a Delilah stone embedded at the foot of these stairs also; there are three doors on either side of this hallway also; and you’re surprised to see the walls here are crimson; giving an even greater feeling of danger. You wonder what might lay beyond these doors; but you know from the layout Astraya gave you that the amulet you’re looking for is being kept on the top floor of the tower. You continue on, passing the barren hallway which, unlike the other two passages you have passed so far, does not have any ornamentation at all.

You reach the final set of winding stairs. Like before you tip toe up the stairs being as silent and graceful as possible. As you ascend the increasingly dark and oppressive space, with light from the torches bracketed at intervals to light your way, you feel your fur stand on end. There is a strange electricity in the air. Your first instinct is to want to go back and flee this tower, to forget the amulet and the money you’ll receive for retrieving it; as you enter onto the topmost floor of the tower you are sure what you are feeling is the nexus of magical objects and the magical vibrations they give off. The topmost floor is not a corridor, but rather one large room filled with many items in glass cases; some kept on stone alters; others lined alone stone shelves. You’ve entered into an incredible treasure trove; each item you can see seems to bear great historical or magical value; scrolls, swords, shields, helmets, books, dozens of Delilah-stones, dozens more rings, and necklaces; many encrusted with Delilah-stones, or Bemlock-Stones (a magic imbued stone worth several times more than a Deliah-stone).

You look down to see if there is a Delilah stone embedded to the foot of this stairwell, there isn’t however, which gives you a small feeling of relief. Ahead you can see the window you planned to escape from. As seen before the bars are incredibly narrow, far too narrow for a human being to slip through. Were you half an inch thicker you doubt you would be able to either. You approach the window and see that, just like the stairwell, there is a Delilah stone embedded just beneath it. This can’t be a coincidence; there must be some magical connection between these things…but what?

You think on this as you continue your search. Finally you find what you are looking for: a large red amulet connected by a metal thread. It’s not on show like some of the grander objects dominating the middle portions of the room; instead the amulet is tucked away on a bottom shelf. You wonder if the owner of the amulet would even miss it being gone given the lowly place they have given it in their collection of great magical items.

[[Take amulet]]</tw-passagedata><tw-passagedata pid="11" name="Take amulet" tags="" position="">You reach out and take hold of the amulet. About the size of your closed fist, the amulet feels quite heavy for its size as you pick it up and put the metal chain round your neck.

In the next instant you hear the sound of stone grinding against stone to your left. When you look to the source of the sound you can see the window you planned to escape from is ceiling up! It happens so quickly by the time you reach the place where the window should be, there is only more stone wall. You press your hands against the stone, feeling its firmness. It’s not some kind of magical illusion as far as you can tell; by some magic the tower has sealed your easy exit!

You see the Delilah-stone that was embedded beneath where the window was before has broken, the magic spell contained within it having been used up after its one-time use. Now you realise that the spell within the Delilah-stone was to be triggered if anyone took the amulet or perhaps any item in this room, from its proper purchase. With the Delilah stone broken you know that putting the amulet back where it was before won’t return the window. You can feel the castle rumbling below; and you’re reminded of the other Delilah stones you saw embedded by the foot of the stairs; what if they sealed up too?

You won’t know for sure until you venture down. You take another glance around the room. Ahead you can see a bowl filled ten Delilah stones of various colours. You decide in your moment of haste to snatch them up. You stuff the stones into your satchel as you head down the narrow winding stairs you ascended from before.

As you descend the stairs you suddenly become aware of the ceiling and stairs closing in on you. You have no time to think as you instinctually allow yourself to tumble down the stairs, and just in time too as the heavy mass of stone heaves down where you were a half-second before. You let out a cry as you pull your tail away from the stone; one of your tail hairs just got pinched! You look back and see crimson brick where there was a stairwell before.

You turn round and look ahead only to gasp as you see the stairs leading down to the black corridor have gone! Just like the window, and the stairs behind you, the stair section up ahead has been covered over by more crimson wall. You suck in deep breaths, feeling claustrophobic as there are no windows to let in fresh air. There is some ventilation however; you can feel it coming from beneath the doors nearest you on either side. On the right hand side there are three doors, and to your left there are also three doors.

With no means to turn back, you can only hope one or more of these doors will lead the way out.

It is as you are contemplating which door you’ll pick first that you feel a sudden electricity flood in and over your body. You let out a gasp as you look down and see the amulet around your neck is glowing bright red!

[[Look at yourself]]</tw-passagedata><tw-passagedata pid="12" name="Look at yourself" tags="" position="">&lt;&lt;silently&gt;&gt;
  &lt;&lt;set $description = "a young catgirl thief"&gt;&gt;
&lt;&lt;/silently&gt;&gt;There is nothing you can to stop the amulet from what it is now doing to your body. The first of the changes starts in your hips and waist. Your hips make a sudden creaking noise as they expand outward bit by bit. You put your hands to your hips feeling the firm new width resist your touch solidly. As you stand partially bent over with your hands at your hips, you feel your hips creak wider even more, until you undoubtedly have hips that would be considered generous on a woman. That same firm touch, like an invisible hand, can be felt against around your waist line; with a sudden hard crack you feel your waistline sink in, becoming narrower and bringing an even greater feminine shape out of your changing body.

Whilst it doesn’t hurt, it’s not gentle or comfortable either. You feel the invisible hand at your back push down hard, and the next think you now your posture has changed to a feminine gait. It feels like your torso and upper body is resting on your generous hips now, where before your body was streamlined to the masculine leanness you’ve known all your life. You attempt to take off the amulet to undo, or at the very least limit the change taking hold of you. But by some magic the amulet feels far too heavy to lift, and even if you could the chain around your neck shrinks as you tug it, making it impossible to take off in this moment.

It feels like someone has slapped your right buttcheek as you let out a gasp. In the next instant your right buttcheek swells in size, filling up with fatty feminine tissue. A moment later, you feel another sting, this time on your left buttcheek, which in turn swells to match the shapely roundedness of the other. You let go of the amulet and grope your fuller and fatter behind; your new behind yields to your touch, being as full and fat as you have seen on some catgirls you have seen from time to time.

You stumble forward, reaching out to support yourself against the right corridor wall. As you pant from the heat you feel building across your body, you notice your arms and shoulders become thinner, smaller, and rounded in a feminine way. At the same time you feel as if your inner and outer thighs have been slapped. You look down to see your thighs becoming fuller and thicker, built to match your generous new hips and narrow waistline. Further below you can see your feet and ankles become smaller and daintier, and the nails on your hands and feet becoming longer in a feminine way. It feels then like an invisible hand has gripped you by the hair on the back of your head. You find yourself forced to look up at the low crimson ceiling as your face feels like it is being pulled into a new, feminine shape.

You’re scared, no doubt about it. Your heart is thumping in your chest as you breathe quickly, trying to remain calm as your head is still yanked back in place. You feel your chest beginning to expand in rhythm with the heavy beating of your heart. With each hard thump your chest grows a little heavier with soft breast tissue. Ba-dump! Ba-dump! Ba-dump! Your shoulders pull back as a pair of breasts form on your chest. You can’t look down to see it occurring thanks to the invisible hand holding your head back, but you can feel the new breast tissue jiggling more with each enlarging thump. The hand at your head finally lets you go, and you fall forwards onto your knees. Your new feminine hands slap against the corridor floor as you support yourself.

Your new breasts hang heavy and exposed on your chest. You ease yourself back in a squat position, feeling the new addition of your feminine butt and thighs squeezed under your bent legs. Looking down you cup your new breasts which are slightly more than a handful each. Your nipples are puffy and the breast tissue is sensitive, soft, and yielding to the touch, yet also firm at the base with a solid foundation. As you look down, your short white hair cascades down past your brow and ears becoming longer and slightly curled. You can feel the femininity in your face, and the difference in your hampered breathing. You don’t sound like yourself. You sound like a catgirl…

“M-my v-voice…?” You say, stammering as you use the word to test your voice for changes. A light feminine tone chimes out of your throat, making your new face scrunch up as heat radiates in your cheeks. This is so wrong, you think.// I sound just like a girl! //

The amulet continues to glow red, which builds a renewed feeling of fear of what else it might bring. With a sudden womp! You feel the world around you grow a little bit larger. Your mind hastens to understand how this could be possible, even for this strange amulet with its unknown magical properties that is clearly far beyond what a Delilah or Bemlock stone could achieve. You feel the world flip on its head inside your mind as you understand it isn’t the world that is bigger; it’s you that is smaller! All over your body is smaller to match the feminine build you have. If you had to guess, because that is all you can do in this moment, you would wager you have lost a full head of height from your stature, with the rest of your body shrinking in proportion. In turn your satchel feels a little bit bigger and heavier too.

You’re about to ease yourself to a standing position but stop suddenly as you feel a sudden invisible hand groping at your manhood. You reach down and touch your manhood, finding you can put your hands around it just fine; but the invisible hand’s grip remains firm.

“Please no!” You cry out in your new feminine voice as you feel the invisible hand begin to squeeze. For a single moment you fear the pain that is sure to follow from being squeezed so tightly, but the pain doesn’t build to more than a very uncomfortable ache. You feel your manhood and balls gradually shrinking in size under the pressure bearing down on your crotch, but every time you think the pain will arrive your cock and balls give to the pressure, bringing an oddly pleasurable sensation instead. You let out a whimper that, if anyone were around to hear it, would tell them how good you think it feels to have your manhood squeezed and ebbed away like this. Very quickly you’re no longer holding your manhood at all as a soft yielding slit opens up, parting to accept your prying fingers into the new fold. You can’t help but explore with your fingers, finding you can insert two of your fingers inside fully. You let out a stifled whimper as you turn your head away; as your fingers explore the heat down in what you are sure is a newly formed vagina also continues to build, along with a new kind of ache you’ve never felt before. The more you move around your two fingers, the more you want to insert another finger in there to increase the incredible feeling that is making your legs feel weak. Your fingers are coated in vaginal juice as you remove them, and you smell your fingers before you have enough sense to stop yourself from doing so. A tangy and slightly offensive smell greets your sensitive nose; the bitter tanginess of your vaginal juices both repulses you, but also makes you want to investigate the smell further. For a moment you find yourself wondering what it would be like to taste this juice that is slick on your fingertips.

You shake your head to regain some of your mental fortitude. You can’t let yourself get distracted over something like this! Not now whilst you’re in so much danger! You wipe your fingers other the cloak inside your satchel to get them dry, and then stand to your full, though smaller height.

It feels as if the changes have stopped beyond a strange gurgling warmth in your stomach where it feels as if your insides are changing to match your new sex.

You shake your head again, your ears making a momentary flopping sound as you try to figure out your next month.

To your right you have three blank doors. You also have three doors to your left. You can’t turn back, and you can’t go on ahead because the stairs have been sealed away by walls of hard stone. Your only option it seems are the doors; there’s a chance one or more of them could lead you to someplace else in the tower; or failing that provide some means of escaping this crimson corridor.

You have SIX doors to choose from. Which will you pick?

[[Door 1]]
[[Door 2]]
[[Door 3]]
[[Door 4]]
[[Door 5]]
[[Door 6]]</tw-passagedata><tw-passagedata pid="13" name="Door 6" tags="" position="">Your gaze lands on the sixth door to your left.

There is no particular reason you choose this door over the others.

If you want to escape fast then you know wasting time deciding on doors isn’t going to do you any good.

Your hand grips the door handle and you push the door open.

After a dizzying moment you find yourself perplexed by what happens next.

The door you opened somehow, impossibly, leads to the second floor.

The geography of this doesn’t make any sense, yet now you stand both on the second and third floors with a foot on either side of the doorway.

Your thief instincts override your curiosity. There’s no time to marvel at magic.

You hurry along the second floor.

Before you can reach the end however you can hear the footsteps of guards racing up the stairs.

Shit, shit, shit!

You become aware of your body again. The tits on your chest, your newly wide hips, the thickness of your thighs, the new narrowness of your waist, and the absence of your manhood. The odds of you successfully escaping as your normal self were slim at best even undetected the entire time. With no time to think you dash to the door to your right, trying your best to remember the blueprints of the tower.

As expected you find yourself in a barren room save for a window with iron bars ahead. The key part of your plan has arrived.

All you need do is slip through the bars and use your feline dexterity to land safely outside.

But can you do that now your body is so different? The sound of the first tower guard right on your heels stops propels you forward.

You leap, finding you still have a great deal of your agility and grace. Whilst female, it seems that your ability to bound gracefully in a way no human could hasn’t been as diminished as you first feared.

You reach the iron bars and slip your head through. The squeeze hurts, but isn’t so tight as to be impossible.

You attempt to slip your torso through next.

Your newly formed breasts wedge tightly against the cool metal.

Fear unlike anything you have ever experienced grips you. What if you can’t get free? There’s no time left. It’s get out of the room and the tower in the next few moments or else wind up at the mercy of the tower guard.

It hurts to squeeze your breasts against the iron bars – they’re incredibly sensitive – but you grit and bare the pain.

You slip through. Success!

A second snag arrives.

Your widened hips and fatter behind slow you again, wedging just like your breast just did but worse.

For the first time in a long time you let out a feline cry. It is the kind of cry that kittens give for their mothers.

The guards are flooding into the room.

It’s too late. You can feel a firm hand at your ankle.

You let out another cry and kick with both feet as hard as you can.

There is good news and bad news when you do this.

The good news is that the heel of your foot lands hard enough against the guard’s jaw that he released his grip.

The bad news is the resulting push from your kick, and the sudden guard’s released grip gives you enough momentum to slip between the iron bars which leads you to a sudden drop that would kill a regular human being.

Thankfully you’re a Cat, and not a human being. Even so it is no small feat what you must do next. Thankfully you planned for this.

Each moment as you fall from the tower counts as a dozen in your mind. You reach out, moving and angling your body perfectly.

The claws on your hands and feet dig into the tower stone.

It isn’t enough to stop you from falling, but it is enough to stop you from falling immediately to your death. Instead you fall in a controlled manner.

If you were your normal self this manoeuvre you planned ahead for, and staked the entire job on, wouldn’t be difficult at all. But in your new body, with your tits and ass jostling and throwing you off-balance, the best you can do is decide how you wish to hit the veranda beneath you.

The impact knocks the air out of your lungs. The wood beneath cracks and splinters. All you can feel for several moments is pain and disorientation.

“She’s down there!” shouts a guard.

You shake your head and do your best to come to your senses.

The claps of many boot steps racing toward you from several directions grow louder.

There’s no time to question if you’ve broken any bones. You spring to your feet, again feeling your tits jiggle and the amulet swing on the chain around your neck.

Hands grab for your feet as you leap from the veranda across to the courtyard wall.

You don’t match the jump as you intend.

You land on the ground, and again can feel the numerous guards a hair-width from pulling you back into their clutches.

You leap again, putting every ounce of your strength into it.

Your hands find the top of the wall and you climb over.

You feel a hand grab your tail that slips free by sheer luck. You ignore the pain of having several of your tail hairs pulled as you tumble over the top of the wall and then fall to the other side.

You land squat on the ground. You try to ignore the feeling of your female crotch spreading beneath you as you break into a sprint.

A bell is being rung now, and the guards are shouting. The gate entrance is being opened, but it is so heavy it’ll take a few seconds for them to get it open enough for the guards to slip through and give chase.

The pain in the small of your back is threatening to make you stop running.

You won’t. You can’t. You think back to all the hard work you put in trying to figure out your way into the tower, your way out, and what, if things didn’t go according to plan, you would do. The plan as you remember it was to run to the Beedle District.

The Beedle District is known as the number one sex tourist destination in the capital. Though you’ve never frequented the establishments yourself, many of your former clients have come from the district, and it's not unusual to see many catfolk around.

[[Enter the Beedle District|Beedle District]]</tw-passagedata><tw-passagedata pid="14" name="Beedle District" tags="" position="">You move amongst the bustle of people surveying the many crammed stalls and buildings. There is a myriad of strange perfumes in the air, and already you can see the scantily clad men and women of various brothels standing at the windows, and around the doorways hoping to entice customers.

“Stop! Thief!”

You know the guard yelling means you. You slow your speed and move at a walking pace. You glance back with as much idleness as you can muster, and you can see half a dozen tower guards filing into the district walkway.

Whilst they cause a stir and look about in every direction for where you might have gotten to, you search for a place to hide.

A certain smell catches your nose. It is a smell that is so enticing it almost makes you purr with delight. There can only be one culprit to such a smell. Katnip perfume.

And the only place that would use Katnip perfume is a Cat-brothel.

Ever since you were a child you’ve hated knowing such places exist. It seemed every other Cat you know works or has worked in a brothel at one time. Right now you decide your life is more important than your disdain for your kind being used in a brothel.

You can't help but follow the incredibly enticing scent. After two rights you find yourself before a small building with a cute Catgirl stood outside.

It’s then that you realise you recognise this Catgirl!

Her fur is snow white save for pink stripes. She’s the Catgirl from the Crowned Badger!

You can see that she recognises you too, and in your immediate shock of seeing her, you’ve forgotten to hide the amulet around your neck. In fact, you’re currently painfully under-dressed for a Catgirl, since they typically wear some kind of bra and underwear, where the male of your species is content to just be in furs.

“I need a place to hide.” You say, wincing at how feminine your voice sounds.

The Catgirl’s sharp yellow eyes look from you, to the amulet, then off as she too hears the distant sound of the tower guards approaching.

She gestures with her head for you to follow her. You waste no time doing so, letting her lead the way inside the building.

The smell of Katnip burns your nose as you pass a corridor filled with Catgirls and Catboys who pay you no attention.

The Catgirls leads beyond a beaded curtain. You find yourself in an empty lounge room. No doubt many orgasms have taken place in this room for the clients that frequent the brothel.

“Am I safe here?” you ask.

The Catgirl leans closer to you, putting a finger to her mouth.

“That change you?” says the Catgirl. She has a thick Forenzi accent; which tells you she is a Cat who has lived far from the capital. This takes you off guard, because she didn’t speak with this accent the first time you spoke with her in the Crowned Badger. The question of what brought her to the Capital to work in the Crowned Badger and a brothel plays on your mind. Of the little you know of the Forenzi, they’re the most militant band of Cats there are, always fighting the hard fights for the good of the Cat race. By the stern look in the Catgirl’s eyes you have no doubt she must have witnessed her fair share of trouble, even though she doesn’t look much older than you.

You realise she means your amulet.

“Y-yes.” You say, stammering a little.

You’ve never been an outspoken type, but now knowing that each word you say will come out as a girly squeak you find yourself preferring to stay quiet.

It also doesn’t escape your notice that the Catgirl looks and feels bigger that she was before. Whilst you’re not a huge amount shorter than you were, the difference is enough that you’re not sure who would come out on top in a fight between you and her. Before, you would have been confident you would come out on top every time.

“Who’s this?” says a gravelly old voice.

The Catgirl looks over her shoulder to a fat Cat-male with thick grey fur and a burly gut. He has a lit cigar in his mouth. He’s incredibly short, but if he feels the least bit insecure about his height he is very good at hiding it.

“She is new.” Says the Catgirl, “She would like to work here.”

You gawk at her. What is she trying to do? You gulp as the fat Cat-male approaches you, eyeing you up and down. “She does, does she?” he says. “You want to work here?”

You hesitate. He clearly thinks you're a Cat in need of help, and you're worried he might kick you out if you said no. You shakily nod your head, still embarrassed to even be playing this role. At least you can hide away here until the tower guards give up searching for you, then you can bail without a problem.

“Well you’ve got the looks for it.” Says the grey cat, “Tits are small, which is a shame. But it’s hard to find a big-titted Catgirl these days. So many are mal—eh, what’s the word, Pinky?”

“Malnourished.” Says the pink-striped, white-furred Forenzi catgirl.

“Malnourished, right, right.”

You’re taken by surprise as the grey cat suddenly pulls up your robe and puts his hand to your pussy, feeling it up.

“What do you think you’re doing?!” You exclaim, slapping the fat-cat’s hand away.

“Oh-ho!” says the fat-cat, grinning, rubbing his hand as he looks up at you. “A feisty one.”

“She is a free-spirit.” Says catgirl, “But she is eager to learn. She just prefers to be paid before she is touched.”

You look at the forenzi catgirl trying to discern if she is someone that can be trusted. Her face is inscrutable.

“Is this real?” says the fat-cat, pointing with a claw to the amulet around your neck.

You put on an act, rolling your eyes. “Yes, I have a priceless amulet hanging on a chain around my neck. How much would you like to offer for it?”

The fat-cat chuckles. “A funny one. Yes, customers pay more for that.”

*
The fat-Cat agrees to take you under his care. He leads the way as you and the Forenzi catgirl follow. You’re not sure how long you’re going to go along with this. It is too soon to leave the brothel given you have the tower guard after you. Better to wait until dark at the very least. There’s still a whole day ahead until then.

Your thoughts become less defined as you reach the top floor of the brothel. The fat-cat leaves you and the forenzi catgirl in what you discern to be a changing room.

“I feel strange.” You say, trying to ignore the way the new you sounds.

“Look in the mirror.” Says the forenzi catgirl.

She gestures to a small circular mirror on a white table fixed to the wall. You crouch and look into the mirror. You flinch. Not only can you see your newly female face for the first time, but your eyes are completely dilated. You’re not sure what to fixate on first. On the one hand the catgirl you’ve become is extremely pretty, and cute. Not exactly one that radiates sex appeal like the forenzi catgirl. There is something very innocent about the girl in the mirror. Now you can understand why the fat-cat would want a girl like you in his brothel, presumably an innocent looking catgirl virgin is something very rare to come by. You lean closer, inspecting your cuter nose, and larger eyes, and softer fur. Your eyes are like black globes glistening back at you.

“It’s the catknip.” Says the forenzi catgirl, “It will make you highly suggestable. You will get used to it over time and it will lose its effect. But you must be careful for the next few hours.”

You turn to face the catgirl. She’s so pretty it makes you feel weak in the knees. Or is that just the catknip?

“You never told me your name?” you say.

“Renneta.” Says the Catgirl. “My close companions call me Renne.”

You give a nod. “Thank you for helping me, Renneta.”

You prefer to go by formal names. You don’t think you’ve earned the right to call yourself a close companion of hers yet. What’s more, you don’t have plans to stick around the brothel.

“You must change if you are to stay here. You are expected to work.” Says Renneta.

“Change into what?” you ask.

Renneta turns to a large and worn down trunk. She flicks the latch and opens the trunk, revealing piles of skimpy brothel attire for catgirls to wear. Renneta digs around for a few moments before hanging you a pink bra and panties.

“I’m not wearing that.” You say, flatly.

“You must if you are to stay.” Says Renneta, “Do you want to be kicked out onto the street and found by Sedina’s tower guard? No? Then put this on!”

She shakes her closed fists holding the garments.

[[Accept garments]]
[[Refuse]]</tw-passagedata><tw-passagedata pid="15" name="Refuse" tags="" position="">“No!” You shout. You don’t mean to sound so angry, but this is all too much for you to handle right now. It is one thing to find yourself stuck as the female of your species, it is another altogether to agree to dressing up as one.

“If you do not then you will have to leave! I cannot help you if you do not do as you’re told!” says Renneta, pleadingly, “Do not be stupid!”

“I’m NOT being STUPID!” you say, a slight hiss reaching your throat.

The door to the room opens. It’s the fat-cat, and with him a large brute of a Catboy, being a tiger of the species; huge arms, a powerful chest, and a large head fit with sharp teeth.

“You ain’t dress yet?” says the fat-cat. “Get dressed or stop wasting my time!”

“I’m not wearing that.” You say, standing your ground.

“Renne, darling. Why are you bringing me prudes like this? Get this one out of here!”

“No!” says Renneta, pleading, “She will do as she’s told!”

“Shut it or you’ll be out on the street with her!” says the fat-cat. He snaps his fingers and the tiger-catboy grabs your arm. You have no hope or resisting his immense strength as you’re lifted off your feet. You don’t try and fight him, both out of fear that he might hurt you, and because you actually want the same thing.

The tiger catboy takes you to the back door of the brothel and sets you down. “Leave.” He says, in a deep voice. You nod and start to walk away. Looking up to the top window of the brothel you spot Renneta looking back to you. Again you find her face to be inscrutable.

At best you managed to hide away for close to forty minutes in the brothel. That still makes the surrounding area you’re in very dangerous. It’s still bright out too, so you’ll have to be very careful about which path you choose. It’s hard to think with the catknip tugging at your mind, making every thought drowsy and distant. You consider your options; do you take the to the rooftops and leap from building to building to safety? Or go through the markets on foot? Both could draw the attention of the tower guards looking for you.

[[Foot Path]]
[[Rooftops]]</tw-passagedata><tw-passagedata pid="16" name="Foot Path" tags="" position="">You decide to go on foot for the time being. A catboy, no, a catgirl leaping from rooftop to rooftop is only going to draw attention. You’re fast trailing from rooftop to rooftop, but in your current condition you can’t count on your agility to aid you getting away safely should you be pursued. Sucking in some fresh afternoon air you head away from the brothel and out into the main throng. You have a good idea of where you need to go. You’re intention is to head back to the morgue rooftop to get some rest before heading to the Crowned Badger to receive your payment and be rid of the stolen amulet. You push the question of whether or not Astraya will know how to undo the amulet’s magical effects on your body.

Like most cats you go unnoticed and overlooked as you pass among the human population in the main market. There are all manner of scantily clad humans around here thanks to the large collection of brothels in the vicinity. This bodes well, you think, because having scantily clad men and women around means less attention on you.

You come to a hard stop when you spot tower guards ahead. There are three of them talking to people in the market. An instant later you realise standing still is the worst thing you could be doing, so you make a quick turn to the right, going down an alley that is thick with people lingering about. “Hey!” says a woman whose foot you accidentally step on. “S-sorry!” you stammer back. The alley, you now realise, leads directly to the back entrance of a brothel.

“You lost?” says a burly bald headed man standing by the door.

“Sorry?” You say.

The man points to a sign above the door. “NO CATS ALLOWED: WE DO NOT WANT YOUR CUSTOM.”

“O-okay.” You stammer. You turn back, and freeze as you see the tower guard are standing at the foot of the alley and are talking to the young woman whose foot you just stepped on. She points in your direction, and the tower guards look at you. Shit.

“Grab her!” shouts one of the tower guards, who even at a distance you can see is fat and has ugly checkerboard teeth.

You can sense the bald man guarding the way into the brother behind you reaching for you. Instinctively you leap and kick off from the alley wall, bounding with all your strength from the left side to the right, then higher up to the left again. You reach the top of the alley just as your legs can’t take anymore leaping. You climb over, roll, and then climb to your feet. Now you’re on the roof there’s no choice but to continue this way.

The tower lays ahead, and that’s definitely not the way you wish to go. You veer to your left and run, picking up your pace as you leap from building to building. After several minutes, and several rooftops passed, you descend again to the ground, using a washing line to ease your fall. When you land you continue on. You’re now out of the marketplace vicinity. You look back to see if anyone has managed to follow. As far as you can tell they haven’t. You proceed on, safe for the time being.

The morgue rooftop comes as a huge relief. You were beginning to think escape from the tower, and after the tower guards, was going to be impossible. Thinking back there was so much that could have gone wrong. But you’re out in one piece, albeit changed. You climb up to the rooftop and hoist yourself into your favourite nook. The morgue fires are lit, bringing an extra comfort to you. You close your eyes, determined to rest. It’s been a long day.

[[Wake up]]</tw-passagedata><tw-passagedata pid="17" name="Wake up" tags="" position="">It takes a few minutes for you to stir awake. When you do a feeling like you are falling takes hold. Your whole body spasms as your arms reach out to hold onto something. This is quickly followed by sudden inertia. You’re not falling, but you do have reason to panic. Sitting up you find yourself faced with acknowledging that you have breasts, and a pussy. Your body is female. You grope the amulet nestled between your perky breasts. What strikes you in this moment is not that you are a girl, you already knew you that, but that it feels like the first time you changed into a girl. All of the adjustments you made in the hours after you first changed have vanished. Is this feeling in your mind? You feel like you’re wearing a costume of a female of your species. Shouldn’t this body feel like it’s yours? Even as changed as it is? Whilst you can feel the sensations of your hands cupping your breasts, and brushing against your thick nipples, a strong sense of disassociation takes hold. This is not my body, this is not my body, this is not my body. The thought occurs to you repeatedly.

You ease to a crouched position. You’re hungry, and you haven’t any food. You could go to the place where you hide what little money you have, but that’s quite a ways away and you would rather seek out Astraya at the Crowned Badger first. Perhaps this might be one of those occasions where stealing food from a stall is warranted?

It’s dark out, but might as well be clear as day for your cat eyes. A soothing warmth continues to radiating up from the morgue, warming your butt and feet. For the first time you’re left wanting more clothes to wear. A male of your species can get away with minimal clothing, if any, but the female of the species often wear tops and skirts to cover their modesty. Those that don’t are considered unusual, like the Forenzi cats.

Your stomach whines. The need for food isn’t going away. What should you do?

[[Go to the hiding place and get some money for food]]
[[Steal some food from a stall]]
[[Go directly to the Crowned Badger, ignore your hunger for now]]</tw-passagedata><tw-passagedata pid="18" name="Door 1" tags="" position="">You approach the first door to your right. There is a simple brass handle which your grip and pull down. However as soon as you have the door open by just an inch an incredibly strong gust of wind erupts from within the room. Before you can close the door again you wind causes the door to swing wide open. Then, before you have any hope of even trying to close the door, you feel the wind take hold of you like a giant hand, sucking you inside.

You find yourself hurtling into the room which is without any light save the one from the crimson floor behind you. You hear a hard slam, and the room is fully bathed in pitch blackness. You grope around in a panic, feeling smooth tile flooring against your palms and knees.

For a moment all you can do is pant afraid in the dark before torchlight erupts from several brackets on the walls all around you. You stand up, still not used to the sensation of having a pussy between your legs and heavy tits on your chest.

It’s clear to you now this room isn’t going to be your way out of the crimson floor. There are no doors or similar exits here; all you can see ahead of you is a large…bath. Since you have no interest in taking a bath right now, you turn round and go to the door you entered from…only to find there is no handle to open it. You run your fingers along the seams of the door trying to find any purchase to open it you can, but even as you do it you can tell it is a fruitless gesture on your part. Whatever magic has trapped you in here has done an excellent job making sure there’s no way out.

As you stand by the door trying to think of some means of escaping, your keen ears prick at the sound of something wet sloshing about behind you. You turn and look to the bath…there’s water in it, and it’s rippling.

You move a little closer to the bath tub. With nothing else to occupy your attention you gradually let yourself reach the edge of the tub. Up close you can see the water that fills the tub isn’t fully like water after all, instead it has a thicker, slimier consistency and a slight blue tinge.

You know you shouldn’t, but you can’t help but reach forward and dip the tip of your right index finger into the gooey substance. It feels cool and yields to your touch…

The goo ripples again and then starts to rise in the centre. The mass in the middle takes on an increasingly more defined shape until it is unmistakeably masculine in appearance. Within a matter of seconds the gooey mass stands much taller than you, looking like the silhouette of a strongly built man. It’s hard not to feel uneasy looking at the black featureless face that, despite not having any eyes, you are sure is looking down at you.

You can almost see through this near translucent goo-man. You look down, and can see its crotch area is smooth and featureless. You’ve never seen anything like this before in your life. What could be the purpose of such a thing? Why leave it in one of the rooms in the tower?

“Hello?” you say, looking up at the slime creature.

The slime cocks its head upon hearing you speak. You wish your voice didn’t sound so feminine now.

Its then you see something that makes your gasp. The slime around the goo-man’s crotch begins to lengthen and reshape itself until it is a long shaft in the unmistakable shape of a huge erect cock.

“Don’t point that thing at me!” you say, backing away even more.

The slime creature steps out of the bath with one translucent blue leg, followed by the other one. Despite being made of a gooey substance, the slime creature holds a solid shape, not leaving so much as a puddle as its large soles touch the tiled floor.

It’s now the slime creature sprouts long translucent tentacles from its back, two slithering out from the right shoulder blade, and two from the left shoulder blade. With frightening speed the tentacles set upon you, each gripping a limb tightly. You try and break away as you let out a panicked whimper; you can already feel however that your struggling is futile; whilst gooey to the touch, this slime is easily strong enough to hold you in place.

“Get off!” you shout; your newly feminine voice sounds as light as a chiming bell.

The slime creature pays your words no attention as it draws you closer, lifting you off the ground as you try in vain to get away. “Stop!” you cry, as you feel the tentacles part your legs forcefully. You use all your strength to kick out at the creature, and for a moment it seems like you might succeed, but you can’t keep the intensity of the resistance up for more than a few seconds before the tentacles part your legs as wide as they will go, putting your feet above your head!

Your arms are next as the tentacles gripping your wrist heave them up over your head, putting them in place as if your hands were bound by wet rope.

“Stop!” You cry out now completely fixed in this new position.

There’s nothing you can do as the slime creature eases the head of its huge cock into your new pussy. You gasp from the feeling of being filled by the slimy phallus that sinks slowly deeper inside you, far deeper than you realised was possible for a vagina to accept. Your let out another cry, this one unintelligible as a mind-numbing feeling takes hold of you. The slime creature’s cock begins to ease slowly out, then slowly back into your pussy, causing your fur to ripple from the mix of pain and pleasure spreading across your body, originating in your increasingly wet and throbbing pussy.

For several minutes you find yourself the unwitting plaything of this slime-man. You are left crying out with pleasure as its tentacles grope your breasts and thighs. Your eyes have stopped seeing anything in front of them, but instead have rolled up to look at the low ceiling.

You feel his slimey tentacle whirl around your right tit. It starts to play with your sensitive nipple that becomes erect under its touch. You find yourself breathing hampered breasts, your face contorting into one that is desperately trying to now show the pleasure you’re feeling. You shake your body, feeling your groped breasts trapped under the grip of the tentacles. You keep moving trying to break free but you can already tell it’s futile. But you’re determined not to give in, if only in your own mind.

You feel a tentacle find your clit and it starts to play with it, rubbing and teasing your clit as the slime creature’s huge shaft continues to enter and exit you. You let out a cry of pleasure before forcing yourself to be quiet. You’re not going to let this thing make you cry out in pleasure again! You feel the slime creature’s tentacle continue to rub your pussy. Your whole body, already hot and growing hotter from the rhythmic fucking of your now wet pussy, begins to tense up and ache. It’s exhausting trying to fight how good it feels to be handled like this.

You wish you could bring your legs down, it’s so humiliating having them above your head like this! You can hear the sound of the slime creature’s cock entering you, making a distracting wet fucking noise. You can smell your own pussy juices mixing with the unusual smell of the slime creature. It’s then you let out a cry of fright as the slime creature turns you over with ease. You find yourself forced onto all fours on the tiled floor. You try to get up but the slime creature holds you firmly in place. Even as it turned you round its huge cock didn’t slip from your pussy in the slightest, perhaps due to the way the creature can redistribute its mass.

You feel the tentacles take hold of your wrists and ankles with a firmer grip. Your arms and legs are pulled away from you, leaving your laying on your chest with your new tits pressed against the tiled floor. Given the angle and the way the slime creature is holding you, there is very little hope for you to get out from its grip. Your arms and legs are already aching from the effort you’ve made to escape. The slime creature’s cock eases out of you until just the head is inside your wet pussy. You are thankful for this momentary respite, but find yourself letting out another cry of pleasure mixed with discomfort as you feel a tentacle insert itself into your ass.

You let out a grunt as the tentacle slithers up your ass, going deeper and deeper as you pound the tiled floor with your fists. A fresh wave of tingles and shivers rush through your body. You can feel your asshole expand to accept the tentacle moving around inside you. Drool is escaping your mouth as you struggle to remain fully lucid of what is occurring to you.

The slime creature inserts its cock again until it is in all the way to the base. At the same time, you feel the slippery tentacle fill your asshole to an equal degree. Your eyes roll into the back of your head as your right cheek presses against the tiled floor. As you lay there the cock and the tentacle inside your ass continues to pump in and out of you. You’re not even aware that your right leg is shaking from the orgasm you’re experiencing. Your perky little butt is being ravaged by the slimey tentacle and slimey erect cock that isn’t tiring in the slightest.

Whilst the creature doesn’t tire, it does let you go to settle your exhausted body into the bath. You lay with your pussy and body aching from such a rigorous fucking in your pussy and ass.

However, just as lucidity returns to you the slime creature inserts one of its tentacles into your mouth. Your eyes bulge as you try to get the tentacle out, but your hands are too weak to yank the slimy blue tentacle away. It feels like an erect cock in your mouth as you kick and flail in the bath unable to get away from it. You see the slime creature convulse, and you can see a mass of some darker liquid move from the slime creature down its tentacle, where the dark substance is pumped into your mouth and down your throat. You can’t stop it, even as your eyes begin to water. You have two options in this moment: choke to death, or swallow the dark substance. You choose the latter in your panic, gulping down the steady torrent of the slime creature’s seed.

[[Gulp…gulp…gulp…]]</tw-passagedata><tw-passagedata pid="19" name="Gulp…gulp…gulp…" tags="" position="">&lt;&lt;silently&gt;&gt;
  &lt;&lt;set $name = "nameless"&gt;&gt;
  &lt;&lt;set $description = "the feminine half of a slime"&gt;&gt;
&lt;&lt;/silently&gt;&gt;You can feel your body struggling to accommodate the slimy new mass entering it. Your stomach expands bit by bit, getting fuller and rounder with each gulp of the slime creature’s liquid swallowed. Within a matter of minutes your stomach looks as if your new female body were pregnant. You simply can’t take in any more of this substance! You want to beg the slime creature to stop but you can’t even speak with the tentacle in your mouth!

The swelling continues even as you were sure you were at your limit. Your breasts begin to expand larger, filling up with the same dark seed. You swallow more of it as your breasts become fuller and heavier. You can feel your breasts hanging heavily on your chest, growing steadily bigger in rhythm to your large gulps. You take your hands away from the slimy tentacle attached to your mouth and take hold of your breasts; each sits atop your palm each like a large melon, and still growing heavier with each passing moment. For a horrible instant you imagine the slime creature’s seed filling you up until you explode!

This concern stays with you until you notice something peculiar about your new breasts…they feel slimey. You look down and see they have started to become tinted pink and slightly translucent! You realise with horrible lucidity that the slime creature must be turning you into its mate of some kind!

The slime entering your mouth and pushing its way down your throat has started to taste so good too. Even if it weren’t being forced down your throat you don’t think you would have the presence of mind to stop yourself from drinking it. As more minutes mount your body becomes increasingly pink and translucent until you are fully a pink catgirl slime! Your stomach is no longer bulging. It has since become flat and translucent like the rest of you. It feels oddly nice being a slime creature. You can feel your humanity slipping away in favour of a simpler way of thinking.

The slime creature steps into the bathtub and runs its hands over your now huge tits. You let out an otherworldly slime girl moan as the creature then puts its erect cock inside your pussy again. This time you accept his cock enthusiastically. You ride the cock and force your pussy down on the huge shaft as best you can. In turn you receive even greater waves of pleasure that cause your body to ripple and shift. You can feel yourself losing your catgirl shape and you don’t care. Looking down you can see your lower body is merging with the other slime. This continues until are both fully merging into one another, becoming one. The bath overflows with your combined mass, some of you both spilling out like a flower petal onto the tiled floor.

You can feel the amulet around your neck sink through you and away. It’s taken by the gooey tide and left on the tiled floor. You don’t care. You don’t care about anything now beyond being a content slime in the bath. Slowly the new mass of slime that you are becomes still, unmoving, becoming a blue-and-pink mass as calm and unmoving as jelly in a cup.

END</tw-passagedata><tw-passagedata pid="20" name="Door 2" tags="" position="">Your gaze settles on the second door. With no way to know if this door is better or worse than the others, all you have to go on is instinct. The handle of the door feels cool against your palm as you push it down. As soon as the door is open an inch there is a sudden hard gust of wind. It’s too strong for you to push the door back in place. The door swings open wide, causing you to let go of the door to avoid being flung to the side. The same gust of wind that pushed the door open before now seems to be pulling you in. You make a leap for further along the hallway to escape the sucking wind, but it’s too late. As you leap into the air the wind catches you, pulling you deep into the room and into the darkness within. You land hard on your back, but you manage to backwards roll and find your feet by instinct alone. By the time you look up however you are just in time to see the door you entered from close. You’re bathed in pitch black darkness for several moments before several torches light up ahead of you. The room your in is small with a low ceiling. There’s no furniture or ornamentation of any kind. The air is still here, and it’s unnervingly quiet. Not liking it one bit, you turn and hurry back to the door you entered from. It’s locked. You hit your shoulder against the door and wish that you were your normal male self, because maybe then you would have the strength to break down the door enough to get through. But with this weak female body you have no chance of doing so.

The door doesn’t give to your repeated shoulder slams. You kick the door out of frustration, earning pain in your big toe for a few moments before the pain subsides.

“Dammit!” You say.

Your voice sounds muffled inside the confined room. You nod to yourself as you decide that now is not the time to panic. You turn and face the only other exit from the room. You see half a dozen lit torches fitted along the top of the wall. The light illuminates a small hole in the wall that you think you might just be able to fit through. Though you would likely have to stand on your tip toes, given you’re shorter in this form. And it won’t be fun trying to stuff your new chest through that whole either…you tug the amulet around your neck again, and in response the metal chain tightens, reminding you of its reluctance to being taken off.

You cautiously move toward the hole in the wall, taking several wary glances over your shoulder and around the room just to make sure there aren’t any traps that could spring out at you. You make it to the hole without trouble. It is cool and smooth stone that feels nice to run your hand along. Looking through the hole you can see there is a door several paces beyond. You can feel your body wanting to move into the hole, but you resist the temptation. After examining the hole you can’t understand why the hole is in this wall in the first place, or why the wall is where it is at all. What purpose could there possibly be for a hole in the wall in a tower like this? You look through the hole again and try looking elsewhere, on the ground by the wall you can see a large wooden bucket with a handle, and you can see a large trunk. There is a faint smell of milk lingering in the room which you can only detect due to your keen nose.

Is this some kind of milking room? That might seem reasonable if not for the fact this floor is on the third floor of the tower. What sense would there be in bringing a cow or goat up to this room when milk can be purchased in abundance in the nearby market?

A chill ripples up the fur on your back as you realise that perhaps this is some kind of execution room. Maybe this is where prisoners or trespassers are brought. Their heads are put through the hole in the wall, and then chopped off! Then the bucket is set out to place the head and the blood in, and inside the trunk is a bunch of cleaning supplies for any leftover mess!

Yes. That must be it. There’s no doubt in your mind now. You’re in an execution room! You turn back and go to the door you were flung in from and try desperately to open it again. Like before it doesn’t budge. You keep trying until your shoulders are so sore you can’t bring yourself to strike the door again. With each hit you have also taken the chance of creating noise that will attract guards. With each passing moment you feel more like a cornered animal that doesn’t realise its already trapped. It was a stupid idea to take this job. You weren’t prepared enough for it. Shouldn’t Astraya have warned you about magical traps? There was no sign of strange rooms like these on the blueprints of the tower.

Each second that passes brings out an even greater need to get out of the room. The sorry truth is that hole is the only way out of the room you’re currently in. After taking in a deep breath you decide to just hurry through the hole before one of the tower guards finds you.

Stepping forward, you push your satchel through the hole and watch it drop to the floor on the other side. You then move towards the hole in the wall and slip your inside. Your shoulders follow and, whilst cramped, you make easy work slipping inside. However when you’re head, torso, and arms are through the hole; the hole in the wall suddenly shrinks around your waist. You hear a cracking sound and look up to see a Delilah stone crumbling from where it was embedded in the wall just above your head.

[[It’s a trap!|Trap]]</tw-passagedata><tw-passagedata pid="21" name="Trap" tags="" position="">You try and wrangle out of the hole as blind panic takes hold of you. You flail with your arms and legs, but it’s no use. You’re good and stuck and there’s no way you’re going to be able to get out of this hole on your own. You can feel your toes barely touching the floor on the other side, leaving your newly short and female legs dangling just a bit. You can feel most of the pressure of being stuck in the hole on your stomach; whilst it doesn’t hurt, you can imagine being stuck in the hole for more than an hour might cause your stomach to bruise.

Now you’re trapped in the hole you’re also keenly aware of your breasts that hang down on your chest. They’re both about the size of a handful, and their weight can’t be ignored. Even if the hole hadn’t tightened by use of magic, you’re sure it would have been difficult to ease back out of the hole given how obtrusive your new breasts are.

Without meaning to you let out a girlish whine of discomfort. It makes blood rush to your face from embarrassment. You sound so much like a girl now it’s humiliating. Even your hampered breaths sound too much like a girl’s.

You remain stuck in the hole unable to get out of it for approximately ten minutes, though you aren’t able to accurately know how much time has actually passed. After this wait footsteps draw near from beyond the door ahead of you. A moment later the door opens and a tall young man with short cut blonde hair and blue eyes, dressed in the tower guard’s uniform, enters inside. His boyishly handsome face breaks out into a surprised grin at the sight of you.

“Well look at you!” he says.

And he examines how stuck you are in the wall.

“You know you’re the first catgirl that’s been stuck in this wall. What was it you tried to steal from the sorceress’s collection?” says the guard.

For a moment you remain quiet. It seems silly to deny that you were trying to steal something from the tower. It’s obvious that’s what you were doing. How could you possibly explain being several floors up a heavily guarded tower?

“Was it this?” says the guard. He puts his hand to the amulet hanging heavy from your neck. The steel chain tightens as he tugs on it. Being wary of magic, the guard yanks his hand back and lets go of the amulet as if he just touched something hot.

“Yeah, that looks like something she would keep.”

“’Sorceress’?” you say, “What do you mean?”

The guard looks at you as if you have just said something very peculiar.

“Sorceress Sedina? You don’t even know who you’re stealing from?” says the guard.

“Never heard of her.” You say, “And I’m not a catgirl, the amulet transformed me to become one.”

“Oh, so you were human before?” says the guard.

It strikes you as incredibly suspect how talkative the guard is being with you. Shouldn’t he be angry with you for trying to sneak, steal, and flee from the tower? As far as you can tell he’s talking to you as if he were talking to a friend.

“No.” You say, “I’m a Cat, just not a Cat-Girl. Understand?” you say.

“Oh.” says the guard, “That makes sense. Either way you are the first Cat, male or female, that has tried breaking into Sedina’s tower. Bet you weren’t expecting a whole host of magical traps to trip you up?”

You find yourself scowling at him, but not because you dislike him. Your gut instinct tells you this guard is actually a friendly enough individual, or at the very least he gives off the impression of being a nice person. From your life on the streets you know all too well people can pretend to be nice, but become cruel and malicious in a heartbeat.

“What is this?” you say, gesturing with your outstretched arms to the wall and the hole you’re stuck in.

“It’s for executions.” says the guard.

Your eyes open wide. You were right! He’s going to lop your head off!

The guard holds his stomach as he breaks out into a chuckle. “I’m sorry. It’s not really for executions. It was just a bad joke on my part. My apologies, couldn’t help myself.”

“It wasn’t funny.” You say.

“Right.” says the guard, “Well, this hole here is for trespassers like you. We get an awful lot trying to break into the tower; and many like yourself get to the top, steal something, but boy oh boy do they have a tough time of it when they try to get out. I’m sorry to tell you, but only one of those doors in the crimson hall would have led to your successful escape. You’re good and trapped, and lucky me I get to carry out my own particular punishment.”

Your ears prick at the word ‘punishment’.

“So you’re not going to kill me?” you say.

“Oh no.” says the guard, “You’ll be kept in the tower until Sedina gets back from he travels. Then she’ll decide what to do with you. Until then, because you entered through the door I’m in charge of, you are under my care.”

“Please just let me go.” You say, “I’ll give the amulet back. I just can’t figure out how to get it off my neck.”

“It’s probably some magical enchantment.” Says the guard, “It’s not going to come off unless you know how. Sorry, but I’m not very knowledgeable about these things. Even if I did know how to take it off, I wouldn’t. I’ve got a job to do you know.”

“What’s the punishment?” you ask.

“Ah.” says the guard, grinning broadly again, “Now that’s a good question. But telling you outright wouldn’t be as fun. I only get to carry out my punishment about once six months, so you’ll have to indulge me a little bit.”

“This is ridiculous.” You say, “Just let me go!”

The guard sighs. “Look if you’re going to shout I’ll put a gag in your mouth. Do you want that? It’s one of those uncomfortable ball gags that’ll have you drooling all over this nice floor.”

The guard gives you a look that is an invitation for you to shout or speak up in some way. However you heed his warning and become very quiet. His stern look softens back to his jovial demeanour.

“You know you are definitely the prettiest trespasser to come into my room.” says the guard, “We don’t get a lot of female thieves. At least with you I’ll be able to collect some milk.”

“Excuse me?” You say, unable to keep the shock and indignation out of your voice. “What do you mean by collecting milk?”

The guard scratches the back of his head, clearly a little shy about his particular line of work.

“Well.” He says, “You’ll just have to wait and see.”

Before you wished to simply be back to your normal catboy self. But now you desperately wish you no longer had a pair of tits on your chest. This guard intends to milk you! You try and struggle in the hole, but it’s all for nothing. The guard doesn’t even pay your struggles any attention as he turns his back to you and bends down to pick up the wooden bucket you saw before. He sets it down in front of you, resting one side of it against the wall.

“You’re not seriously going to milk me are you?!” You say.

“What did I say about keeping your voice down?” says the guard. “One more time and you’re getting gagged, I won’t tell you again.”

Your throat seizes up. But you’re angry now. You’re not going to let yourself be milked! “Please don’t.” You say, unable to say the full phrase you intended to say of ‘please don’t milk me’, which isn’t something you ever thought you would want or need to say.

“Nobody made you trespass.” says the guard, “You’re doing your job, and I’m doing mine. But don’t worry; I’m not going to milk you as you are.”

“W-what does that mean?” you stammer.

“You’ll see.” says the guard.

[[Watch the guard]]</tw-passagedata><tw-passagedata pid="22" name="Watch the guard" tags="" position="">&lt;&lt;silently&gt;&gt;
  &lt;&lt;set $description = "a young cowgirl heifer"&gt;&gt;
&lt;&lt;/silently&gt;&gt;The guard moves over to the trunk and kneels down in front of it. He opens the trunk and takes out what is clearly a large bemlock stone.

He retrieves a huge stone, clearly a Bemlock stone, from the trunk. He brings the dark emerald stone up to your face.

“When I applied to have a room of my own in the tower Sedina very much liked my idea. Do you know what this is?” says the guard.

“It’s a Bemlock stone.” You say.

“Very good.” says the guard, “Sorceress Sedina imbued the stone with a powerful spell. It will only last three days before another stone is required. Thankfully Sedina was kind enough to make dozens of Bemlock stones. We already have a bull, so you’ll be his heifer.”

“No!” you shout, raising your voice again.

The guard places the bemlock stone against your forehead. It begins to glow, and then for a moment all you can see is green as the stone becomes painfully bright for an instant. You hear a cracking sound, and you open your eyes to see the stone crumbling into useless pieces in the guard’s palm.

“Always forget about the mess…” says the guard, casually. He grabs a pan and brush from the trunk and sees to sweeping the bits of Bemlock stone from the floor in front of you.

As you watch him do this you can feel the effects of the stone’s magic taking hold of you. Your fur across your body begins to tingle, and although you wouldn’t consider your fur to be long, you feel it recede in length until you feel almost naked. The fur visible on your arms and hands takes on a snow-white colour. You notice your fingers, each digit up to the knuckles, turn light brown. Your pointed nails changed to become simple rounded fingertips with only tiny black rectangular nails instead. A brown splotch, like a birthmark, appears on your left shoulder, and then at the elbow crease of your right arm.

Panic sets in. An image of transforming fully into a cow fills your mind and gives you a similar state of terror that an animal soon to be slaughtered would have. You try desperately to escape the hole in the wall, to pull yourself through or out; you try both as you thrash, hoping for something to give. The wall remains firmly around your waist however as you feel your ears tingle. It feels like someone is dragging them down from atop your head and pulling them back so they reside at either side of your head, like human ears. But the shape of your ears changes too, your triangular ears become even more pointed, the tips pointing away from your head. Despite the weight of your ears they remain at an unfaltering horizontal angle.

The guard moves over to the trunk, closes the lid, and sits on it. He puts one leg over the other in a manly way (ankle on top of his knee), and proceeds to eat from a bag of what appear to be raisins.

“Enjoying the show?!” You shout in an angry tone.

The guard sighs and stands up. You can still feel your body changing, and you look at the guard with renewed concern as he opens up the trunk again, and takes out a ball-gag.

“No! No!” You shout, “I’m sorry I’ll be quiet!”

But it’s too late. Although you try and fight the addition of the ball gag being forced it your mouth, the guard’s grip is assured enough that he makes quick work of fitting it in, and then strapping the leather around the back of your head. Unable to talk now, you watch as the guard steps back. He’s grinning, clearly admiring his handiwork.

You let out a “Mmph!” sound out of desperation. The gag feels slippery, and already your jaw aches from accommodating it. Your tongue runs along the inner side of the ball, finding it to be a little coarse; hinting at being used on many others in the past; their teeth most likely having made indents in the wood.

A sudden jolt of pain spikes on either side of your head two finger widths above your new cow-like ears. It hurts, reminding you vaguely of when you had a bad tooth ache last year. Just when the pain begins to get bad enough to make your eyes water, it relents, instead becoming pleasurable as a horn sprouts out from either side of your head.

You hear a gulping sound as the guard eats a handful of raisins from where he’s sat atop the trunk, back with in his casual manner. His back is against the wall now, and by the smug look on his face he’s very much enjoying the show.

Drool drips from your ball gag onto the floor. You can also feel your face changing, particularly your nose, which changes from the typical cat V-shape, to a more cow-ish O-shape, whilst still small and feminine in size.

“I’ll get you a nose ring and a tag once we’re out of here.” Says the guard, “But that stuff can wait.”

//Oh thanks!// You think, sarcastically. Although the guard is being firm, and in a way friendly, you decide that if you ever get out of this insane situation then you’ll get some much needed retribution for what he’s doing to you.

Next you feel your feet changing from pawed to hooved. Although you can’t be sure without seeing it for yourself, it feels as if your toes have merged into just two hooves, which still leaves you standing on your tip toes.

“Well don’t you look every bit the proper cowgirl?” says the guard, jovially. His handsome face beams with a charming grin.

“Now for my favourite part!” he says.

[[Wait for his favourite part]]</tw-passagedata><tw-passagedata pid="23" name="Wait for his favourite part" tags="" position="">You wonder what he means for a moment. He must have done this to enough poor women that he can predict the sequence of the transformation. As you look at him grinning at you it becomes clear to you that he might in fact be a little bit crazy. No sane man would delight in changing a helpless captive like this.

To your sudden dismay the guard takes hold of your exposed tits. His fingers grope them, his palms against your nipples that become erect under his warm touch. You were aware of the weight of your breasts hanging heavy before. How could you not? The sensation of the titty-meat weighing you down, and partially preventing you from getting out of the hole, continues to act as a constant reminder of your new sex.

A sensation like filling up a waterskin takes hold of your chest.

You let out another “Mmm!” as you try to somehow shake the guard’s hands off your exposed tits.

“Bigger! Bigger! Bigger!” says the guard.

Your tits swell slowly, filling up, growing heavier, and heavier. Upon initially changing into a female of your kind your breasts formed as roughly the size and weight of oranges. But now your breasts have become much larger than that. They hang thick, full, and heavy atop the guard’s palm.

“Not bad.” says the guard, whose holding of your tits comes as a small relief.

He lets go of your tits, and your upper body jerks down from the weight of them. The weight of your new breasts is such that you have to make an effort not to dip your head lower. A fresh ache forms at the small of your back in response.

“Mmph!” You grunt, letting out some of your building frustration.

“Yeah they’re pretty big, aren’t they?” says the guard, as if he’s talking to his favourite pet. You feel his hands cup your tits again, and you stifle a sigh from the relief of having their tender weight supported.

“Mmm, yeah.” says the guard, “I can see you like that. Good girl.”

I’m not a girl! You want to shout. But now you’re trying to hide the pleasure you’re feeling from his touch on your tits. It feels so good to have your erect nipples touched by his palm. You feel a strange hot ache in your crotch. Blood rushes to your pussy, and in turn your pussy lips open up, widening to accept a cock.

“You’re still small for a cowgirl.” Says the guard, “But that should—oh here we go.”

The guard is interrupted as your breasts grow even heavier, and heaver larger. They’re huge now, each tit easily bigger than your head, and so full of some warm sloshing liquid that you have no hope of supporting them in your current trapped position.

“Ah.” says the guard, “My bad. Won’t be a minute. Don’t go changing too fast whilst I’m gone.”

The guard leaves the room from the door ahead of you. For a moment you can see a narrow corridor lit by torchlight, before the heavy wood door swings shut. For the next two minutes you let out whimpers and whines from the stress the tits are causing to your back. It hurts, and aches, and for some reason all of this is making you incredibly horny. You’re trying to ignore how much you’re enjoying it on some level. Being trapped, the huge tits, the pussy now wet and waiting to be filled; as scary and new and strange as this all this; some part of you is excited by all of it. Looking down, you can see your nipples have changed too, before, when you were merely changed into the female sex of your cat kind, your nipples were small and perky; but now they’re larger, and much more erect.

When the guard returns he has a metal frame with him. He opens it up and sets it out in front of you. You’re too tired from trying to remain upright to fight him off. He takes your arms and puts them into metal rings that close like shackles around your wrists. He then takes your huge swollen tits and puts them through rings of their own. It’s not an easy fit, as he has to stuff them inside the rings until they’re all the way through. This however comes as a major relief despite the discomfort of having these new metal braces around your tits. The weight is eased from your aching back.

“There you go.” Says the guard, “I didn’t think I would need the frame, but you’re tits really are massive, aren’t they?”

You scowl at the guard, but it’s hard to feel like your scowl has any effect anymore given how drool is pooling from your bottom lip onto the floor.

“It should be about time for the other side.” says the guard.

You wonder what he means before he goes to the wall and presses his palm against it. A section of the wall gives, and presses in, and in the next instant a door opens up. He steps through, and you can no longer see him or what he’s doing. His hands hold your hips and you quickly understand why; your hips, your thighs, and your behind begin to swell in size. The swelling continues until you’re sure that, if you weren’t trapped as you are and were able to stand upright; your body would be in a major hourglass shape, and padded all over with thick, cowgirl fat.

You let out a gasp which is stifled by the ballgag in your mouth as you feel the guard roughly slap your right buttcheek. You can feel your buttcheek sting, and jostle with its new thick weight. For a moment you feel his fingers find your wet pussy, and he massages that area, causing you to press your thighs together. Your eyes almost roll into the back of your head from the flood of want that fills your mind and body. You want him to touch you there more; you shake your head, your new ears flapping humiliatingly as you try to maintain some of your previous angry resolve.

The guard returns to your side of the wall. “You’re looking good back there.” He says.

He goes to the trunk again.

You let out a cow-ish moan as you see the guard take out two milking bumps connected to a bucket container. The guard chuckles a little bit at the look of shock on your face.

“Oh don’t act so surprised.” says the guard. “Trust me you’ll love it.”

With your hands strapped in place and your tits contained in the rings inside the metal frame, there’s nothing you can do to stop the guard from placing the milking cups around your nipples. The guard takes a minute to figure out how to get your huge tits firmly in place.

“I wasn’t expecting your tits to get this big. These pumps will have to do today, next time I’ll bring the big ones.”

You try shaking your tits to get the pumps off before the guard starts to use them. It’s no use; your tits are simply too fat, and the pumps fitted too tightly for you shake them off.

“Here we go…” says the guard.

He squats down and puts his hand to the pump handle. He starts pumping it and immediately you can feel the suction at your nipples.

“This’ll take some time.” says the guard. “Luckily everything’s prepared.”

You watch as the guard pulls a tube out from the right wall and connects it to the box that unifies all the pumps. As soon as the tube, presumably full of air being pumped from somewhere in the tower, enters is connected to the box the pumps start to vigorously suck at your tits. You let out a hard moan as you can feel your nipples teased and sucked.

“Like I said, it’ll take some time.” says the guard as he makes his way to the door in front of you. “I’ll check in on you in thirty minutes. Have fun!”

You let out another cow-ish moan of defiance as the guard leaves you to be milked by the pumps.

Within an hour the pump has extracted half a bucket’s worth of milk from your fat tits. The worst of the humiliation isn’t having your breasts pumped. Instead you’re ashamed by how good it feels, and how much you’ve enjoyed being milked despite your objections to it.

After the guard packed away the milk you made (after complementing you on how good it tasted), he turned a clear glass bottle upside down and put the liquid onto a clean white cloth. He then placed the cloth over your mouth, and then you must have fallen asleep, because the next thing you’re aware of is waking up in a new room.

[[Wake up|Wake up milk]]</tw-passagedata><tw-passagedata pid="24" name="Wake up milk" tags="" position="">You have a strong suspicion you’re no longer in the tower, because now you can feel a cool breeze running along your body. There’s a barred window above you, and you can see a clear blue sky. Your mind spins as you slowly climb to your feet.

The weight of your newly huge tits reminds you of what you’ve become. As you stand feeling a little woozy, memories of what happened in the tower return to you. Looking down, you can see you’re still wearing the amulet you were hired to steal; since you’re completely naked now it is likely the guard tried to take it off, but couldn’t.

Looking around some more, you can see that you’re in what looks to be a mix between a stable, and a living space. It’s sparse, like a prison cell, but made of wood. There’s a toilet hole in the right corner of the space; and there’s a bed with straw on it on the right side of the room.

A chill runs across your body, and you brace yourself. The heifer-girl you’ve become doesn’t have the fur you’re used to having. You move to the barred window, and you’re relieved to find there are window shutters on either side. You draw them, bringing a stop to the worst of the breeze wafting in.

Now you have the ability to move unhindered, you can’t help but take this moment to examine your changed body. Your hands cup your huge tits, feeling their heavy, milk-laden heft. Blood rushes to your face. If these weren’t currently on your chest, boy would you love to play with them!

There comes a sudden knocking sound ahead of you. You drop your hands from your tits, resorting instead to folding your arms in front of your nipples; in turn propping your tits up, deepening your already substantial cleavage-line.

The door ahead of you opens, and you see something that makes you pull your head back in surprise. A bull-man enters the room, ducking beneath the doorway. He’s not wearing any clothes, which means there’s nothing to hide his huge pair of balls, and the biggest cock you’ve ever seen in your life. It’s far too big to be considered anything a catboy, or human might have.

There are other species in the world. Being a heifer-girl, or a bull-man, is something others from other far away lands are born into and take as standard; at least so you’ve been told through hearsay. Humans are the dominant species in the capital, and Cats the lesser, sub-human class. In other places; other kingdoms, and lands, a human and a Cat would be considered strange. As you look at the hulking mass of this bull-man, you wonder several things; does he intend to do you harm? Was he always a bull? Or was he made into one the same way you were turned into a heifer?

“Welcome to The Ranch.” says the bull, his deep voice matching his size.

“Are you a prisoner?” you ask, your voice hitting a humiliating sing-song tone without you meaning to.

“I guess you could say that.” says the bull. He closes the door behind him.

“I volunteered to be made this way; it was either that or face a lifetime in a dungeon cell for trying to steal from Sedina’s tower.” says the bull.

“You’re also a thief?” you ask.

“Not quite.” says the bull, “I was a mercenary paid to storm the tower by force three years ago. We fought our way to the top of the tower with minimal casualties, but like yourself we fell prey to Sedina’s magical rooms.”

“So they turned you in the tower into this?” you say, gesturing to the muscle and towering stature of the bull-man before you.

“Yes. Though if I’m being honest I’m glad I was caught. I’m the prized bull. I spend my time making sure you heifers do as you’re told. And I get all the sex I want, when I want.” says the bull.

You wince when he includes you as a heifer. “I wasn’t always a girl, you know.” You say, “I’m really a catboy.”

You notice his eyes searching your body as you say this, a smile forming on his bullish face.

“And why?” You say, “Why keep us here like this?”

“The milk you produce tastes good, but it also is a key ingredient in alchemical potions.” says the bull, “It’s the same as my semen. Used in the right way it can be used to hundreds of different potent effects. If you behave you’ll be treated better, and you’ll be given privileges to make your stay here more comfortable.  You won’t be on show the first time we fuck, don’t worry.”

[[What?!]]</tw-passagedata><tw-passagedata pid="25" name="What?!" tags="" position="">&lt;&lt;silently&gt;&gt;
  &lt;&lt;set $description = "a young heifer slut"&gt;&gt;
&lt;&lt;/silently&gt;&gt;“On s-show?” you say, stammering a little.

“Of course.” says the bull, “Customers from all over the capital and beyond travel to see me fuck you heifers. It’s a spectacle to them. They pay big time to see this cock punish your tight heifer pussy.”

You can see bull-man is working himself up. His huge cock is no longer hanging between his legs, but at half-mast, essentially pointing at you. You feel arousal spring across your body, making you feel short of breath as your crotch begins to ache and feel very hot.

“P-please d-don’t.” You say, whimpering and moving back until your back touches the rear wall.

“Would you rather your first time be here, in private, or would you like me to fuck you in front of the customers when I have my fun with you instead? Trust me, you’re going to want to use this opportunity to get used to this big meaty dick.” says the bull-man.

“No!” you say, “Stop pointing that thing at me!”

“Oh I can tell you want it. I can smell how turned on you are. Don’t try to deny it.” says the bull-man.

He moves forward suddenly. He’s fast for his size, not that he needs to be to have you cowering before him. You feel his huge hands take hold of your wrists, putting them above your head. You can feel your tits rise up in response, pressing against his muscled torso.

You can’t see anything save for his broad body. He’s so strong you’re sure he could tear a grown man’s arms clean off with ease. He holds both your hands together with his left hand, and brings his right hand to your left tit. Despite your breast being larger than your head, it still feels small under his grip. You let out a whimper, but can’t find the words to tell him to stop. His huge meaty cock is hot against your tummy now, the head of his cock easing up between your fat tits.

The bull lets go of your hands and grabs both your tits, pressing them around his cock.

It’s a sight to behold as your tits are fucked by the bull’s enormous cock. Whilst you stand frozen with indecision, you can’t help but look in awe at your tits, and the way the large fleshy mounds are able to have such a deep cleavage-line, and the way they look like huge tear drops pressing together.

“That’s right you little slut, I can see you looking.” Says the bull.

You flinch in embarrassment, feeling caught out. The bull exhales and you can feel his warm breath on your face.

You feel your bottom lip trembling as he continues to fuck your tits. It’s then he gives a bullish ‘hmph!’ and you feel his right hand leave the side of your left breast.

For a second you think he is going to relent this humiliation he is dealing upon you, but the next thing you feel are his fingers at your left breast nipple.

He squeezes the nipple hard enough to have you crying out from the tender pain of it, that in turn brings a rush of unfamiliar sexual wants and feelings throughout your body.

“That’s right!” says the bull, “Let’s hear that again, bitch.”

The bull squeezes your nipple again, and this time you’re ready for it. Despite this, you can’t hold back the girlish cry that follows.

“Please stop!” you beg.

“Oh no.” says the bull, “You’re mine now. You do as I say and that’s all you need to know.”

He gives your nipple another squeeze, even harder this time. You cry out again, and you can feel tears stab at your eyes, threatening to leak down your cheeks.

Before you can think to do anything else the bull grabs your tits again and starts to aggressively thrust his cock between them again, but this time he is gripping your breasts firmly enough for you to wince from the discomfort.

The bull’s hot cock, previously making the inner side of your tits slick with precum, suddenly lets out several thick ropes of cum all over your tits, neck, and the underside of your chin.

The smell of semen hits your nostrils, and you feel the bull ease slowly back.

He’s laughing now. “Ha! Ha! Don’t you look a pretty picture?”

You swipe large globs of semen from your chin, wanting to get that stuff away from your mouth first and foremost.

“Shut up!” you shout, your face hot with rage.

You charge at him. You know there’s no sense in it, that he’s just going to overpower you, but what manly pride you have left won’t stand for what he just did. When you get within touching distance of the bull-man he casually presses his palm against your torso.

In the next instant you stumble back onto your fat behind, your tits, belly, and thick thighs jostling and jiggling from the impact with the floor.

“Calm down, bitch.” says the bull-man, “That was just the warm up. I always cum early the first time.”

You see the bull-man grope his large black balls, “Luckily I’m all pent up and good to go for much more.”

You remain sat where you are.

Looking up at the bull-man there is a slight hint of remorse in his eyes for what he’s doing to you. It’s a look that makes you wonder if he really is choosing to do this as much as he is letting on. Right now you don’t particularly care. You’re in this mess now, sat as a cowgirl with cum all over her chest and neck. Oh, you should never have taken the job! You clearly weren’t cut out for it!

You look down at the cum-covered amulet, wishing you could take it off. A mental image of you taking the amulet off, and the magic that makes you a heifer somehow changing to turn you into a bull-man just like him; oh, you would beat the crap out of him if you had his strength.

It’s as you’re thinking about how you would lay out your revenge against this bull-man that you see him approaching you again, his heavy footfalls drawing near.

He reaches down, and at first you think he’s going to reach for your tits again, instead you feel his hands at your horns that you had almost forgotten were there.

It doesn’t take a genius to think out what he intends to do next. You press your lips together and try to look away from his cock which is quickly easing in front of your face.

“Open up.” He says, though there’s a good amount of humour in his voice.

He pokes your lips and then your left cheek with the head of his huge cock, you can’t move your head at all thanks to the grip he has on your horns.

“No?” he says, wryly. “Okay, then I’ll have to teach you why you should do as you’re told.”

You feel the bull-man release his grip from your left horn, and you can see his hand moving close to your face. For a second you think he’s going to hit you, instead, you feel two of his fingers insert themselves into your nostrils.

“Ah!” you cry out as his fingers tug upward inside your nostrils, causing you to gasp from the discomfort this brings you.

“S-stop!” you shout, and you sound a little ridiculous with your nose being blocked by his fingers.

“Say ‘ah’” says the bull-man. You wince, and instinctively decide not to give him what he wants. In return this earns you his fingers pulling harder at your nostrils, and you can’t help but say ‘ah!’ due to the pain this causes you.

As soon as your mouth is open the head of his hot cum-lathered cock enters your mouth. His fingers remain at your nostrils, and your eyes bulge from the effort it takes for you not to gag.

Tears streak down your cheeks.

You make a series of gagging sounds as his cock hits the back of your throat.

The bull delights in fucking your throat in a way that feels casual to him, but brutal to you.

With his fingers at your nostrils, and his cock at your throat, you have no means with which to breathe. He didn’t seem to take this into account as he says, “Oh, my bad.”  And he removes his fingers from your nostrils, and his cock from your mouth and throat.

A line of cum drools from the tip of his cock, the cum holding on to your plump bottom lip.

You take in a big lungful of air and sit forward on your knees. You cough up some more of his cum, and you can feel your throat tensing and flexing from gagging so much.

The bull chuckles deeply again. “You’re holes are so tight.” He says, “I’m going to have to enjoy that whilst it lasts.”

“Alright.” He says, sighing happily, “Let’s get on with it.”

Before you can ask “With what?” the bull-man gets to his knees in front of you. His hands find your shoulders, and with surprising ease, despite your considerable weight of your fatter body, he turns you over onto your stomach. Your naked ass and pussy are facing him now. You sniffle back tears as he slaps your right buttcheek very hard. You let out a cry, feeling the stinging that follows along with a new numb sensation. Your asscheek wobbles like jelly before settling.

“Damn that is a fat ass.” says the bull-man. You decide to just look ahead at the wooden wall in front of you. There’s no stopping what he’s going to do to you, but at the very least you won’t make yourself watch as he enters inside your new, and humiliatingly wet pussy. His hands grip at your fat behind, playing with the jostling cheeks; pressing them together, then spreading them apart so he can get a good look at your tight little asshole and pussy.

It’s then you hear him move about, and you can feel the warm of his muscled body descending on you. The head of his cock enters your pussy, and his firm grip on your asscheeks becomes even firmer as he slides his cock until it is halfway inside. This already is far too much for a virgin pussy to handle; and you cry out with pleasure and pain from accommodating half of his incredible shaft; the equivalent of three erect human sized cocks.

As his cock pounds your tight pussy you give thanks for the first time that your transformation into a heifer has allowed you to be able to accept cocks of his size. Within seconds he has his hand at your throat. He pulls your head back, making you look at the ceiling as he roughly fucks you. Your asscheeks jostle with each pump of his cock, and your tits bounce on your stuck out chest, swinging in unison with each thrust.

Your body tenses up from this rough fucking. You’ve never felt so hot before. The bull-man quickly fucks your tight pussy to a point you can’t handle any more. However it isn’t up to you when this punishment of your new pussy stops. The bull lifts you up with ease; you’re in a dazed state so you don’t resist as he brings your knees to your breasts, and he puts his under your legs, bringing them up so your feet are almost higher than your head. He continues to fuck your pussy, now with your back against his muscled chest.

“Fuck! Fuck! Fuck!~” You shout. He’s fucking the sense out of your mind. There’s no room for you to be the least bit introspective now. The mental state you’re in is no better than a heifer being fucked animalistically by the dominant bull.

As much as the bull might want to, his cock is simply too big, and your tight pussy still too tight, to accommodate more than three quarters of his cock. Your stomach bulging from the depth of his cock inside you, and you can feel his teeth at your long right ear, chewing on it like it belongs to him.

The fingers of his left hand tug at the left side of your mouth like a fishhook, making you pull a funny face as he lets out a great big laugh.

“Say moo, bitch.” He says.

You shake your head, it’s the only means you have right now to tell him no. He continues to pound your heifer pussy; your legs, and your back, and your pussy aching from the pounding he’s given you.

His fingers tug on your mouth harder.

“If you don’t say ‘moo’ I’ll fuck you in the ass next!” says the bull-man.

You give up.

“M-moo!” you cry out, not quite able to say it right thanks to his fingers in your mouth. His dick continues to punish your pussy, and his saliva coated fingers leave your mouth.

“Louder!” he says.

“MOO! MOO!” You cry out, “MOO! MOO! MOO-OOO-OOO!~”

“Haha!” the bull-man shouts, clearly elated to see he’s broken your spirit down so easily that you’ll humiliate yourself like this.

“Now say, ‘I’m a heifer slut who likes to have her pussy fucked!’” says the bull-man.

“I-I’M A H-HEIFER S-SLUT-” you begin, trying to speak despite your body feeling seconds away from orgasm.

“-AND?” says the bull-man.

“A-AND!” You shout, “I LIKE TO HAVE MY PUSSY FUCKED!~”

“That’s right you do!” says the bull-man.

He cums inside you, his hot sticky semen filling you up and making your stomach bulge. He then lets ease you down. You came, and now you’re exhausted.

“Welcome to your new life.” says the bull-man as he moves to the door. “The fun’s only just begun.”

- - -

The following day, late in the evening, you are out in the open air. Where you are in particular you’re not sure, not that it matters now. You have a gold ring in your nose, and a cowbell at your neck, and you’re being led out with the other heifer girls to the party of humans that have come to see you be fucked by the bull-man.

This is your life now.

END.</tw-passagedata><tw-passagedata pid="26" name="Door 3" tags="" position="">You decide to choose the third door on the right. Your pad over to the door quickly, trying to ignore the new sensations of your pert breasts bouncing on your chest, and the feeling of extra padding in your thighs and behind. After taking a deep breath to steady your nerves you have a feeling that you’re being watched, but from where and by whom you’re not sure. The metal handle to the door you’ve chosen feels cool against your palm. It takes several seconds for you to steel up your courage to open the door. As soon as it is opened you feel as if the entire corridor you’re in has been turned on its side. Your feet are unable to find purchase on the ground beneath you, and you find yourself falling forwards into the room.

The room spins again as you’re in mid-fall. It’s a hard landing as your face and chest smack against the floor. The door behind you slams shut by its own accord, and you turn and look up to see above the doorway there is a Delilah stone that has just broken into pieces after being activated.

As a female you notice it’s harder for you to pick yourself up off the floor with your weaker arms. You stand upright and dust yourself off, and you regret doing so as you feel your small and perky tits jiggle a little bit. You instinctively tug at the amulet around your neck, and feel the steel chain tighten, again reminding you that it won’t come off easily. Something tells you a blacksmith’s tool isn’t going to break the steel either; but that will be the first thing you intend to try if and when you escape from the tower.

The room you’re in now is large, with a low ceiling. It’s very warm, and you can see exotic plant fauna along the edges of the room in long stone containers. These plants don’t look very friendly, your first thought looking at the rich blues, yellows, orange, and green colours is that these plants will be poisonous to the touch. There’s also a very fragrant smell in the room that is easily the best smell you’ve ever smelt in your life. Without meaning to you suck in a deep lungful of the sweet smell. Only after you exhale do you have the sense of mind to put your hands over your mouth. You stifle your breathing, but leave just a tiny gap so that you can still breathe. Your keen cat nose can smell the many layers of fragrance to the scent being given off by the dozens of plants surrounding you.

You turn back to the door you entered from and try opening it. It doesn’t budge, and your repeated attempts to open it over the following minute only give rise to a soreness in your shoulder. You take another deep breath and rub your aching muscle. On the other side of the room you can see there is another door. This one looks identical to the one you entered in from. You cross the room and try the door handle, finding it too is locked.

It’s then you notice a placard to the right of the door nailed to the wall above one of the exotic plants. The placard reads: As per protocol the key to the door is kept in the Gecko-Plant.

If you’re supposed to know what a gecko-plant is, you don’t. You look around and you figure there must be some tag on the plants used by whoever put them there to sort them. You approach the nearest plant, this one pink, and you search all around the stone base, and among the bottom of the stem, and over the face of the plant for any kind of distinguishing tag. You don’t find anything of the sort. You side step to the next plant, and search all the same places, again finding nothing of use to identify which is the correct plant. With each passing moment you feel a nasty feeling of butterflies building in your gut. You’ve been in this room so long a team of tower guards could come rushing in any second.

You give up trying to look for any kind of tag to discern which plant is the gecko-plant. It’s not that you have the luxury of giving up on escaping the room however. Of all the plants in the room you notice there are four which look like they might contain a key. They have large mouth-like heads which look quite dangerous. It seems odd that these plants have their mouth-like heads closed rather than open. As far as you can tell there are no insects in this room. So what reason might there be for the heads of these four plants to be closed?

As you deliberate this, the sweet fragrance in the room only grows stronger, and you can tell it is having an effect on you. You feel increasingly stifled, finding your body feeling hotter all over. It’s only after you absently feel your new vagina that you notice it is wet, with some of the vaginal juices now coating your fingers. You drop your satchel, and you wipe your hand on the satchel to dry them. As you squat down you can feel your pussy widen, hot blood rushing to it; your pussy now ready to be entered by a cock. You shake your head in an effort to shake the sexual thoughts from your head. But now you’ve taken notice of your pussy juices drooling down your inner thigh it’s not something you can completely ignore.

It’s obvious the fragrance is making your hornier. You’ve only been inside the room for a matter of minutes, so you decide you have to act fast if you’re to get out without before the horniness overwhelms you. You approach one of the four closed-mouth plants. Not having a clue what the correct way to pry it open might be, you settle for a good old punch. On impact, your punch causes the mouth of the plant to open up. You peer forward and see that there is a key inside! You snatch up the key and go to the locked door. You’re smiling excitedly as you jam the key inside the door and the lock gives! You pull on the door handle and the door opens a tiny thumb width! You did it! You’re going to get out of this room!

Or at least you were, until you feel something firmly grip your right ankle. You give a cry of fright as the door you open is pushed shut by something long and green. You hit your head on the ground hard as you’re yanked up into the air.

[[Lose consciousness]]</tw-passagedata><tw-passagedata pid="27" name="Lose consciousness" tags="" position="">&lt;&lt;silently&gt;&gt;
  &lt;&lt;set $description = "a tentacle's mindbroken sex toy"&gt;&gt;
&lt;&lt;/silently&gt;&gt;You’re not sure how long it has been as you slowly stir awake. For a second you think that you’re on some kind of comfortable bed, but then you notice the bed is wriggling and green. You try to get up, but find you can’t move your arms or legs; something is holding them tight! You struggle against the tight grip futility, and you look about frantically to see where you are, and what is holding you.

You’re surrounded by green plant vines that move about like tentacles. How many there are exactly you’re not sure. You recognise the ceiling you’re now facing as the same as the room you were trapped in before you lost consciousness. Looking beyond your captive feet you can see the topmost part of the door you opened with the key. There must be so many vines in this room that there wouldn’t even be enough room for you to sit upright.

It’s incredibly frustrating not being able to move freely, and with so little room in the chamber you’re in you feel horribly closed in. You take in large lungful’s of fragrant smelling air that renews the horniness your body is feeling. You’ve never felt so horny in your entire life. The lust you’re feeling, married with the frustration you’re experiencing, is making it very difficult to think of anything except the promise of sexual release.

The vines, like large green cocks, snake up your thighs, approaching your wet pussy that is still open as much as it can be.

“Get off!” you cry out, as if the vines could even understand you. Whether these vines were always going to do this to you or if they are merely acting this way due to some enchantment is unclear.

You cry out again, and again.  And it seems the vines become sick of your shouting because one of the vines inserts itself into your mouth, the thick green stem easing to the back of your throat. Your eyes water and you struggle even harder to be free. It’s clearly useless however. The tentacles at your lower waist rub your pelvis, and your inner thighs, and one quickly and roughly inserts itself into your aching pussy. The aching sensation is replaced with being filled. The muscles in your pussy tighten around the vine. The vines in your mouth and pussy ease in and out, teasing you, making you squirm. Your whole body is radiating heat.

The vines don’t give you much time to adjust to the new insertions in your mouth and pussy, two more vines grope a breast each, twirling round the new fatty breast tissue that still feels alien to you. As you learn what it’s like to have your tits almost painfully groped you feel another vine enter into your behind. This hurts, but the pain subsides just a little thanks to a special liquid secreted from the vines that soothes the pain of your newly entered behind, but keeps all of the pleasure. You can’t move an inch as the vines excitedly tighten all around you, pinning you firmly in place. Even your hands and feet are bound tightly by smaller vines, causing you to be as still as a statue saving for the hampered rising and falling of your chest.

There is very little you can do as you the tentacles ease in and out of your pussy, and asshole, and down your throat.

Tears streak down your eyes thanks to your gag reflex forcing them out of you. Every few moments there comes a sensation that this might not even be your body experiencing this pain and pleasure of being fucked vigorously.

When you imagined the worst case scenario when being caught in the tower, you didn’t think you would be raped by a seemingly endless amount of plant tentacles. You can feel the plant tentacle inside your vagina roughly inserting itself up and down.

Despite your panicked state you are still able to feel amazement, because as the tentacle explores your pussy, you are able to form a mental image of just how deep, and how tight, and how the inside of your new womanhood is shaped.

Your pussy lips are wet and gripping the slick plant tentacle shaft and your stomach is bulging ever so slightly from how deep it is inside you. The tentacle inside your pussy releases a cool sticky load. Your stomach bulges a little more to accommodate this secreted liquid.

The humiliation drives you to try harder to escape, but the fight has gone out of you. Every one of your muscles aches. All you want to do is be released so you can lay down undisturbed.

Whether the plant tentacles have minds of their own or not is unclear, it hardly matters since they show no sign of easing up their rough treatment of your body. The plant tentacle inside your pussy eases itself out, only to be replaced by another one that begins the process of teasing your wet pussy all over again.

The tentacle inside your throat secrets the same cool sticky liquid, which you can now taste. To your surprise it has a unique flavour that you’ve only ever tasted one other time.

It’s mint. Your throat and your nostrils feel a cool burning sensation that, whilst it doesn’t hurt, also draws attention to itself.

You haven’t tasted mint-flavoured things enough to know whether or not you like it, but now you can taste this particular liquid, there is no doubt in your mind that you want more. It’s incredible. Your throat tenses and gulps down the cool liquid, and your whole body feels less tired all of a sudden. The aches and tiredness all over your body sink away to be replaced with immediate vitality. It feels amazing. Excitement builds in you because you want more of this cool sticky substance.

The tentacle in your mouth wriggles before pulling itself out; a line of green goo trails from the head of the tentacle to your bottom lip. You let out a gasp, breathing in the humid air, tasting more of the minty substance that is now coating the insides of your throat. Every breath you take is tinged with the minty flavour.

The mass of writhing plant tentacles give way beneath you. Your head eases down first, until your feet are in the air above you, and your head is closer toward the ground. The tentacles have hold of your angles, and waist, and your arms which are placed at your sides. Blood begins to rush to your head. The tentacle inside your ass secrets its liquid then eases out of you, and like the others that tentacle wriggles out and is replaced by another that inserts itself.

Your eyes become half-lidded and all the tentacles inside you pump in and out of you as thoroughly as they can. This continues for over an hour but your body doesn’t tire. There is something within the cool minty liquid that keeps you always awake and ready for more cock. Your tight pussy and asshole however have begun to loosen from the constant tentacle ravaging.

Eventually the tentacles stop, and you are allowed to lay wide awake atop the green mass. Now the intense fucking has stopped, you wish for more. There is no tomorrow, and yesterday is a distant memory. All you want is to be fucked right now. Your mind is in such a sluggish state you can’t even speak. The best you can do is let out a gurgling noise. Your need to be fucked by the tentacles, to receive more of their sticky cool seed, will soon be satiated by them again, and again, and again…

END</tw-passagedata><tw-passagedata pid="28" name="Door 4" tags="" position="">You decide to choose the first door on the left side. After taking a wary glance around the rest of the corridor, you slowly approach the door and place your hand upon the handle; it gives, and you ease the door open ever so slightly. A sudden gust of incredibly strong wind begins to pull at your body. For a half second you think you might be able to resist the pull of this powerful gust, but the door swings wider, and the gust it was holding back pulls you in with even greater strength. You let out a cry of fright as you are sucked into the room.

The sound of the door slamming shut behind you fills your ears. In a daze, you climb to your feet to find yourself in a small square room with a low ceiling. There is nothing particularly special about this room that is barren of furnishings, save for what appear to be complicated glowing green runes all along the floor like the intricate pattern of a web. And, sat lazily on a bed bolted to the wall on the far right corner of the room, you can see a human adult.

Your mind isn’t able to discern much more than that about this new stranger, since you find yourself trying to figure out if this person is either male, or female. Their face is slender and feminine, but not so much that you would assume they are a woman, because there is enough of a masculine edge to this person’s features that leaves you unsure. They’re outfit provides little help as to their actual sex, since they are wearing a long flowing gown, that is neither overtly feminine or masculine in its design. If this person were a female, their body would be considered on the masculine side of things, since you can see this person has no breast tissue beneath the garment, and narrow hips that would be uncommon on a woman.

The person sits up, having a devil-may-care smile on their face.

“Oh hello.” says the voice, which again provides little in the way of an answer as to their sex; it is the voice of either a feminine male, or a masculine female.

You turn away from this individual lazily smiling at you and you try to open the door you just entered from. As expected, the door doesn’t budge in the slightest.

“I wouldn’t bother.” says the individual behind you, “Sorceress Sedina herself put the binding spell on that door. Nothing short of her will, or the magic of a greater sorcerer will open it. Not even the delightful little guards in this tower can open that particular door.”

You keep trying for a few extra seconds anyway, since you have no reason to trust this androgynous stranger. You give up and turn to face them again.

“Tell me.” says the stranger, “Were you always a Cat? There is something peculiar about your aura.”

“You can see my aura?” you say, noticing the yellow in the stranger’s eyes.
“Oh yes.” Says the stranger, “Is my hunch correct?”

“No.” you say, “I’ve always been a Cat. This…”

You gesture to the amulet stuck around your neck. “Changed me into a…girl of my species.”

“Oh!” says the yellow-eyed stranger. “How fun.”

“Look.” You say, your eyes half-lidded from being tired of this individual’s company already, “How do I get out of here?”

“Oh, there’s no way out.” says the stranger, “Not until we’re let out.”

“Are you a prisoner?” you ask.

The stranger sits up, moving slowly and gracefully.

“Yes.” says the stranger, “I have been locked up in this dreadful room for three months now.”

“Did you try and steal something?” you ask.

The stranger hand-waves your question away like a bad smell.

“Oh no.” the stranger says, “I was summoned here.”

“Summoned?” you ask.

The stranger’s yellow eyes dazzle. “Of course, child. Do you not know what I am?”

You look at the stranger as intently as you can, trying to see if there’s something you’ve missed. Your silence answers the stranger’s question.

“I am an incubus.” says the stranger.

Again you look quietly clueless. The Incubus rolls their eyes and stands up. They begin to pace slowly, each swing of their foot leading with the tip of their toes before pressing onto the floor, an action which reminds you of your own species, and their manner of walking.

“An Incubus.” Says the stranger, “As I’m sure you’re well aware, is a demon forced into the likeness of a mortal body through the act of summoning.”

Even this explanation from the Incubus leaves you confused, but also fascinated. But you don’t have time to chat. You need to find a way out of this room!

“Can you help me escape?” you ask.

The Incubus outstretches their arms, facing their palms toward the ceiling. “My dear if escaping were a trivial matter I would not be here myself.”

“But you’re a demon.” You say, “Don’t demons have potent magic?”

“Of course.” says the demon, “But Sorceress Sedina specialises in sex sorcery. It is no surprise that she could bind a demon as powerful as I am.”

“I don’t mean to be rude.” You say, “But aren’t demons…evil?”

The Incubus shrugs, “From a mortal point of view, perhaps. But as ‘evil’ as we may be, us demons are summoned here, forced out of the ether of existence. We have no say about this being done to us, so mortals shouldn’t complain when we demons act in accordance to our nature.”

The Incubus rolls their eyes again. “You have nothing to fear from me. Even if I wished to cause your mortal harm, the binding on the floor prevents me from doing so.”

The Incubus gestures to the floor, and the glowing web-like runes placed there by some powerful magical means. As soon as you were told that this stranger was in fact a demon, you took a stance ready for trouble, whilst the demon continued to pace about completely at ease.

“We’re going to be stuck together in here for a few days at the very least, I imagine.” Says the Incubus, “I can’t sense Sedina’s presence, and she often leaves the tower for days, and sometimes weeks at a time.”

[[Try to leave anyway]]</tw-passagedata><tw-passagedata pid="29" name="Try to leave anyway" tags="" position="">Against the Incubus’s advice, you move over and place your hand on the wall to your left. You spend the next few minutes trying to find any way out of this small room, but there isn’t any way out that you can see. In truth, you decided to take a more attractive approach to finding a way out of the room, if only to look way from the Incubus’s penetrating eyes. Its eyes gave the feeling it were reading your very soul and mind, learning all of your deepest secrets and desires.

“You know.” Says the Incubus, who had moved back to the bed on the right corner of the room, “I’m very happy you’re here. Alone, an Incubus can do very little with their powers. But with a mortal around,  I’ll have no shortage of entertainment.”

“What does that mean?” you ask.

“Would you like me to show you?” says the incubus.

“No.” you say, “I don’t want you to do any of your demonic tricks whilst I’m in here.”
“Well.” Says the incubus, “I’m afraid I was merely offering as a formality. In fact, I rather like it when my toys play hard to get. Where would you like to go?”

“What do you mean?” You ask, getting ready for trouble by raising your small and dainty female hands into fists.

“Would you like to go to the beach? No-no. You’re not into that I can tell.” says the Incubus, “Perhaps a bathhouse? Hmm, no-no. I can tell you wouldn’t enjoy that one much right now. You are a tricky one.”

It’s now you can feel a strange kind of pressure inside your head. “What are you doing?!” You say, putting your hands to your head. The room around you begins to melt like a painting caught in the rain.

“Ah, found it.” says the Incubus, and the room around you swirls as if down a drain.

[[Wake up?]]</tw-passagedata><tw-passagedata pid="30" name="Wake up?" tags="" position="">&lt;&lt;silently&gt;&gt;
  &lt;&lt;set $description = "a young catboy thief"&gt;&gt;
&lt;&lt;/silently&gt;&gt;It’s not clear how long it has been since you were last fully aware of your surroundings. But now as you look around you find you’re no longer in the stuffy little room you were trapped in with the Incubus. Now you’re in a large ballroom, with a great big chandelier, and a superbly polished floor, and from somewhere unseen you can hear violins playing a light and playful tune.

You look down at yourself. And to your surprise you’re male again! You pat your chest, feeling relieved to have it be firm without any fatty breast tissue. You put your hand to your behind, and again it feels like your regular male behind; not enlarged with feminine padding.

You notice you’re wearing a nice ballroom outfit that seems to be perfectly fitted. There is even a hole in the back of your trousers for your tail.

“Hello?” you say. Your voice carries throughout the ballroom. You take several tentative steps forward, feeling the polished floor against your pawed feet.

“Welcome!” says a loud voice, and you turn to see the Incubus is standing in the middle of the ballroom, where he wasn’t a moment before.

“Where are we?” You ask. It feels good to have your male voice returned to you.

“We’re in one of my illusions.” says the Incubus, “I control everything that occurs in this illusion, it is the great power of my kind.”

You look down at your chest as you realise that you’re not actually returned back into a male. Somewhere in the real world you are still female.

“So this is like a dream?” you ask.

“Yes.” Says the Incubus, “But so, so much better, I assure you.”

“But we’re still in that room?” you ask.

“Yes.” Says the Incubus, “In actuality you’re lying on the floor. I could wake you up any time I feel like.”

“Then wake me up.” You say.

“Not before we’ve had our fun.” says the Incubus. “I am very hungry, and it has been so very long since I had a mortal to feed from.”

“Feed?” You say.

“Incubi feed off the sexual essence of mortals. Not merely sex, but the mana created from your lust and desires. Incubi feed off the fantasies of mortals.” says the Incubus.

“Okay.” You say, “But I’ve never had a fantasy about being in a ballroom.”

“Oh.” says the Incubus, “I can see the true desires of your mind. I know more about what turns you on than you do. And it will be my pleasure to see your fantasy come to life. At the price of your sexual essence of course.”

“Is that dangerous?” You ask.

“In small doses it is merely exhausting for a mortal to be within my illusion.” says the Incubus, “But alas Incubi such as myself have come to have a bad reputation on account of you mortals never wanting to leave the fantasy, and our kind being all too happy to drain your sexual essence to the point your body has no life in it at all.”

“So you are evil you fowl piece of kittylitter!” You yell.

You blink, and suddenly the Incubus is standing before you. “Let’s not resort to name calling.” It says, and the Incubus snaps their fingers.

Suddenly you find yourself transformed back into the female version of yourself that came when you put the amulet around your neck.

“Stop it!” You say, your voice female again. You’ve lost inches off your height, and you can feel your new breasts and the extra wideness in your hips, now contained in the ballroom suit.

“I’m only giving you what you want.” says the Incubus, “This is your fantasy.”

[[Continue]]</tw-passagedata><tw-passagedata pid="31" name="Continue" tags="" position="">&lt;&lt;silently&gt;&gt;
  &lt;&lt;set $description = "a young catgirl thief"&gt;&gt;
&lt;&lt;/silently&gt;&gt;The Incubus snaps their fingers, and in the blink of an eye you are no longer wearing a ballroom suit, instead you’re now wearing a tight fitting blue ballroom dress. Your breasts are propped up, since you can now feel a corset gripping your torso beneath the already heavy dress.

You can feel the dress sway this way and that in elegant fashion as you paw at the garment. As you look down you can feel an additional weight upon your head, reaching up you discover your hair has been changed; now it is longer and styled into an over the top mass of elegant curls.

“Ah, you are such a pretty picture!” says the Incubus.

“S-stop this!” you shout, balling your hands into fists. It doesn’t help you can also feel your feet propped up in sparkly blue high heels!

“But this is your fantasy, my dear!” says the Incubus, theatrically. As the Incubus extends an arm, you watch as two small horns sprout on its forehead, and a devilish tail snakes out. Flame embers fall away like leaves as the Incubus reveals its demonic horns and tail, and yellow eyes which now glow as bright as the torchlights alight in the ballroom.

“It’s not!” You say, “I would never want this!”

The Incubus disappears suddenly in a burst of flames, and you can feel heat on the nape of your neck as the Incubus is now standing behind you.

“You’re right.” says the Incubus, “I haven’t yet given you the full experience!”

You turn and face the Incubus just in time to see the demon snap their fingers. A second later your breasts start to swell in size, until they are both the same size, if not a little larger, than your head each. Your sparkling blue ballroom dress strains to accommodate their incredible heft. Your hands instinctively go to your newly huge breasts, feeling their yielding mass against your fingers.

“There.” says the Incubus, “Now we’re another step closer to your fantasy! So elegant, so endowed!”

In your rage you decide it’s worth the attempt to throw a punch. You ball your hand into a fist and swing for the demon. However before your fist can connect the demon takes your hand as easily as if you were offering him a dance, and the demon leads you in a dance against your will. Your feet move by a will of their own, and the ballroom whirls around you. Your newly huge tits jostle and threaten to escape the confines of your dress as the demon toys with you as easily as they would a puppet with strings.

The violins swell and as you look ahead all you can see is the Incubus’s androgynous face looking devilishly back at you. In addition to the horns and tail, you can see the demon has a mouth filled with pointed teeth.

The Incubus stops, and you find yourself twirling round, before you come to an abrupt stop, your arms open wide, your right hand holding his left to signal the end of the dance. Although you weren’t in control of your body, your chest heaves as you take in big gulps of air. Your body is hot all over, both from the sudden exertion you’ve had to endure, and because of the layers of dress you’re trapped in.

There is pressure on your right hand as the Incubus pulls you in roughly. You let out a high pitched gasp as your chest presses against the demon’s torso.

“I-I c-can’t b-breathe!” You say. Your breasts are so big now, but the dress hasn’t grown to accommodate them.

“Oh,” says the Incubus, “Allow me to fix that.”

The Demon snaps their fingers, and you feel the pressure build on your chest as your already huge breasts swell even larger. For a horrible moment you can’t breathe at all, even worse, it feels like the dress and corset might squeeze the life out of you. Your dress shifts and grows at the front to accommodate your new breast size. You breathe panting breaths, using a fan that has appeared in your right hand to fan yourself a little.

You drop the fan as if it is red hot to the touch.

“Enough!” you shout, your voice femininely shrill.

As you shout however the world around you melts and swirls. When the world comes into shape again, your find you’re no longer in the lavish ballroom, but instead you’re in a very unfamiliar space. Looking around, you can see you’re in some kind of dark wood. The trees are thin and sickly, and barren without a single leaf. It’s night, and there is a great bonfire in front of you, the flames and embers emerald green.

You look down, and find your tits haven’t become any smaller. Now however instead of being constrained in a tight fitting ballroom dress, they are stuffed just enough to obscure your nipples, and not much more of the upper half of your tits, within a black corset.

“What is this?” you mutter to yourself.

There are the bones of mice dangling from a string necklace you’re wearing, and your feet are clad in steep black heels. You reach to the top of your head, finding you are now wearing a wide-brimmed black hat that is very pointed at the top.

“I’m a--” you mutter, but the Incubus cuts you off, though the demon is still unseen somewhere among the dark trees.

“—you are a witch! A magic user! Isn’t that what you’ve always wanted?!” says the incubus.

The snapping of a twig behind you causes you to turn and see the Incubus approaching. Now the Incubus has fully red skin, with no clothes, looking very devilish. Between the demon’s legs is a huge fat cock and balls, but on its chest is a pert and modest pair of breasts. The demon’s hips sway as it saunters confidently toward you.

“But this isn’t real.” You say, “This is all make-believe.”

“Yes.” Says the Incubus, “But don’t let a trivial thing like that get in the way of what you desire.”

It’s then the demon cocks its head to one side.

“But you know…” it says, “If you really wanted to escape the tower, there is one way…”

“What?” you say. In your eagerness to know how it might be possible, you take one step toward the Incubus, your fat tittle wobbling in your skimpy witch’s dress as you do. Your feet feel strange arched and strutting in the new black high heels. You keep your intent gaze fixed on the Incubus as you try to ignore the plethora of strange bodily sensations.

“I have a means of freeing both of us.” says the Incubus, “I wouldn’t make this offer to any old prisoner.”

The Incubus is now within reaching distance of you. Without meaning to you take in a whiff of the Incubus’s scent. Your body feels suddenly full of lust, your pussy becoming hot and wet in a matter of seconds. Again, you try your best to ignore this. You have to at least hear out what the demon has in mind.

“You see.” says the Incubus, “Sedina’s magic is strong enough to bind a single Incubus like myself. My kind are a very selfish race; we loathe creating offspring, because we do not care for things like love, and family, or any of the trivial virtues your foolish mortals claim to live for. Sedina knows this, and counts on my greed and selfishness; but…”

The Incubus places their index finger on the underside of your chin, “I have seen your dreams; you wish for magical power. You wish to escape the hardship of your mortal coil to become something greater. I can offer this to you, if you are willing to become like me.”

“Like you?” you say, shocked. “You’re offering to turn me into a demon?”

“Not as powerful as I am in the beginning. But powerful enough to help me escape Sedina’s binding ritual. It’s either you join me as a demon, or end up Sedina’s pet for the remainder of your days, your mind and spirit broken and bent to her will. I at least offer you freedom to live as my kind does.”

You can’t believe the words coming out of your mouth as you say, “…so what would I have to do?”

“I will transform you. Doing so comes at great risk to myself. You will understand soon enough.” says the Incubus.

It’s then the world melts again, and you find yourself back in the small room with the binding ritual. You look down, and see that your chest has a pair of modest size breasts, but not the gargantuan ones the Incubus forced upon you before.

The Incubus is stood in front of you, and is still fully red, with their large cock and balls, and pert pair of breasts, and the small pair of horns on their forehead, and the devilish tail snaking out from the demon’s spine.

“Ready?” says the Incubus.

[[Ready]]</tw-passagedata><tw-passagedata pid="32" name="Ready" tags="" position="">&lt;&lt;silently&gt;&gt;
  &lt;&lt;set $description = "a young catgirl succubus"&gt;&gt;
&lt;&lt;/silently&gt;&gt;You give a timid nod, then say ‘yes’ in a quiet voice.

Before your very eyes the Incubus melts away into a red mist. A moment later the mist moves towards you, and then enters your mouth and nose. For several seconds your eyes bulge as you think the Incubus must have played some trick on you before suffocating the life out of your body. But then the red mist is fully inside you, and you can breathe again. You knees buckle, and your body crumples down onto all fours as you pant ragged breaths. Your pussy is still hot, and wet, and you can smell the scent of your own sex filling the claustrophobic space.

Silence follows. It’s quiet in the room. Slowly, you rise to your feet. At first you think nothing might happen after all, but then you notice the fur on your body is starting to fall away. At first just a little, but then as you rub your arms to check your fur, large clumps fall to the floor. In under a minute your entire body is without fur, which brings out more of your feminine shape; now a light shade of pink. You feel the amulet at your neck, and find it still has no intention of being taken off as the chain tightens just a little.

An unfamiliar sensation begins to take hold of you as you stand in the middle of the room. Your skin feels tight, like fabric that doesn’t fit.  You can hear your skin stretching; particularly around your behind, around your crotch, beneath your neck, and under your armpits. In a way, it feels like you’re growing in size, whilst your mortal skin is struggling to contain your burgeoning size.

It’s then, to your horror, your skin tears in several places. Like a snake-skin, your outer layer of skin falls away. Like a costume however the new you is beneath. Your skin is crimson coloured, and you can feel your tail is no longer furred, but hairless with a devilish forked tip. Your hands and feet look more human in shape, but with a slight Cat-tish look to them. Reaching up to your forehead, you can feel a small pair of horns has sprouted there. Reaching up higher, you can feel your ears are still where they should be, but now without fur.

Looking down, you can see you still have a pair of breasts, these ones twice the size of the modest pair you started with. You grope their hefty weight, noticing how the areola is a slightly darker shade of red. Below you feel your hairless pussy is warm and wet.

Whilst most of your body is now hairless, you now have long flowing shoulder length black hair. You hold a fistful of your hair with each hand, feeling how silky smooth it is.

It’s then you breathe out the red mist that entered you before. This red mist solidifies into the Incubus, who returns to their fully red-skinned form.

“Wonderful.” says the Incubus as they suddenly embrace you in a tight hug before drawing back.

“Now, there will be two mortals entering this room in a moment. I will take one, you will deal with the other.” says the Incubus.

“Deal with them?” you say.

“We will need their essence to break the binding ritual. It will be a trivial matter.” says the Incubus.

As if on cue the door to the room opens suddenly, with two studly looking guards hurrying inside. Both are holding sabres that they point in the direction of you and the Incubus.

“There’s two of them?!” says one of the guards.

“They can’t hurt us.” says the other guard, “Not with that binding ritual on the ground. Sedina said so.”

“Ah yes.” Says the Incubus, “But does Sedina know all the secrets of my kind?”

It’s now the Incubus transforms before your eyes. Their androgyny slips away, the body shifting quickly before your eyes until a beautiful red-skinned succubus like yourself, only with larger horns, a longer tail, and eyes that glow bright green. Her breasts are even bigger than yours, her waistline narrower, and her hips even wider. Her proportions are so exaggerated no mortal woman could ever hope to achieve it without the use of potent magic.

The garments she was wearing before vanish, revealing her shiny-red skin in all its naked glory.

For a moment you forget what you’ve become, since you now look a good deal like the succubus before you. You look to the guards who are wide-eyed in a state of awe at the succubus before them. Clearly they’ve never seen anything like her before either.

“Now.” says the succubus, “Whilst we can’t hurt you, we can still use you.”

It’s then the succubus snaps her fingers, and the sabres the men are holding vanish in a puff of red smoke. Then with another snap of her fingers, you can see the guard’s trousers become tented, as their cocks have been instantly brought to their full mast.

The guards grunt, and look down at the bulges in their trousers, and to the two succubi before them.

The succubus vanishes, and appears behind the two guards in another puff of red smoke. “You can have this one.” says the succubus, and she pushes one of the guards. Her strength must be considerable because the guard is lifted off his feet. He lands before you, looking up.

“Sedina will punish you!” says the guard, clearly afraid.

You don’t know what to say. You look to the succubus who has her breasts pressed against the other guard’s back with her arms draped over him.

“What are you waiting for?” she says to you, “Pleasure him, and you will drain his essence, and we will have the power we need to break the binding ritual.”

[[Drain his essence]]</tw-passagedata><tw-passagedata pid="33" name="Drain his essence" tags="" position="">How can you explain to the succubus that you’ve been a mortal catboy male for all your life until this very day? However as you look down at the guard you find you’re able to perceive more than the concern and awe with which he is looking up at you with. You can see into his thoughts, his deepest kinks and desires as easily as if you were reading a book. This guard likes to be in control, he likes it when a woman is submissive under him, taking his big fat cock and his hot sticky load. Could you be a girl like that? You find your body moving as if it already knows which is the best action to take.

“It’s okay.” You say to the guard, and you help him to his feet. Now however the words leaving your mouth have a girlish sing-song lightness, because that’s what the guard likes his girls to sound like. The mysteries of the succubus become clearer to you as you can see what no mortal eyes can see. Your scent is drawing the guard deeper under your control. His will to fight, or to flee is being smothered by the scent leaving the pores of your supple shiny-red skin. You press your huge tits against his torso and look up into his eyes. You can see he’s still trying to fight the increasing influence your scent is having over him, but then his willpower gives in. His hands rise to your breasts, and you whimper as he gropes them roughly.

You look into his mind and you can see what he wants from you. And for some reason, you’re all too happy to oblige. It feels so right to lower yourself down onto your knees. You unbutton the front of his trousers and his huge cock flops out, standing rigidly erect.

There’s still a good deal of the former you inside your mind. There’s still a part of you that is repulsed by the sight of a man’s cock. But looking at the head of the guard’s huge cock, you find yourself swallowing a mouthful of saliva. It looks delicious. It’s as if you were starving a great succulent slab of perfectly cooked meat were placed before you. Your body gives you little say in the matter. You become aware of your mouth accepting his cock. It tastes amazing, but something tells you his cum is going to taste even better. The guard grips your head, taking control, and you let him because that is what he desires and likes most.

Sucking and gagging sounds fill the small room as the guard aggressively face-fucks you. There’s no kindness in what he’s doing. He’s being rough, and borderline cruel. His huge cock is punching the back of your throat, and your eyes are watering from gagging so much.

He takes his cock from your mouth and you take in a deep breath. He slaps your hard across the face and it feels amazing. He slaps you again, and a big genuine smile reaches your face.

“You like that?” says the guard, cruelly.

“Yes!” you say, happily. And you mean it.

The guard puts his cock back into your mouth and fucks your head with every ounce of strength he has. After nearly thirty seconds of this his cock stiffens even more, and then a great hot stream of sticky cum floods your mouth, and is forced down your throat. You eagerly swallow. Never before have you tasted something so satisfying. It’s better than any food or drink, it’s the very essence of joy for you.

The guard pulls out, a rope of cum sticking from your lips to the head of his cock. You stick your long tongue out like a dog, looking up at him happily, wanting more. You perceive his thoughts again, and you know what he wants. You turn over, lowering yourself onto all fours and showing him your new red pussy that’s gorged with blood and ready to accept his cock. The guard has been worked up into a frenzied state of mind. With no control over his lust anymore, the guard gets to his knees and brings himself right up behind you. A moment later you feel the head of his cock enter you, and you make a happy cooing sound in response.

He fucks you with everything he has. He has his hand on your newly fat ass and his cock pounds your pussy so hard if it were a mortal woman’s pussy it would surely stretch it out and ruin it. Your succubus pussy however remains moist, and tight. You could take much, much bigger cocks from this, since succubi can drain more than just mortal men of their magic. As your pussy is getting fucked you can feel your power growing, and it shows in the length of your horns which sprout longer the more essence you drain from the guard. You look back to him, your mouth agape, your tongue out, and your eyes facing inward making a silly expression that you know will drive up his lust for you even for.

He cums inside your hot pussy filling up your succubus womb with his seed. You feel even more alive, and awake, and aware of everything happening around you. The succubus is busily sucking the cock of the other guard who has cummed twice already. You know what your guard wants from you next. You turn over and lay on your back. You put your feet in the air and you spread your legs apart, offering up your body and your pussy to him again.

You can see now however that the guard has begun to tire. Although he has only cummed twice, you have been vicariously draining him of his essence the whole time. He looks reluctant to continue. On some level he knows he shouldn’t. But you are gorgeous, and sexy, your body driving him wild along with your incredible scent. And now you’re ready to accept his cock again.

“I-I c-can’t.” he mutters, some of the aggression leaving him now.

“Fine!” you say happily.

You usher him forward, and he obeys your command. When his head is within your reach you grip the back of his hair and push his face against your wet pussy. He starts to eat you out, his tongue working your crimson clit. This drives you wild. You lay back and let out a series of moans as his tongue brings you closer to orgasm. When you finally cum you let out a cry of pleasure. However you don’t feel you have drained the guard of any more of his essence. It appears there are some things which are too orientated towards you to draw out the essence you need.

It’s not clear what you should do next for him to get more of his essence. You perceive into his mind again and see more of what will sustain his lust for you. You finally see the truth behind why he was so rough with you before. You smile devilishly and rise to your feet. He remains on the ground before you, and you place your foot, which now has long black pointed nails on each toe, on his right shoulder. The look on his face tells you your perception was correct. He is tough with girls because, on some deeper level, he wishes they would do the same to him.

“Get on your back now!” You command.

And to your surprise the guard does as he’s told. He reclines onto his back, with his huge cock erect before you. You saunter closer, and you straddle his cock. You ease it in, taking it all until your pussy lips are pressing against the base of his cock. Now squat over him, you begin to pump your tight pussy on his cock. The guard’s eyes roll into the back of his head as he tries to keep you with you. He has little chance of this however as you pump his cock with inhuman speed. You become an excited red blur bobbing up and down atop his waist, your pussy punishing his cock. He cums inside you, and you let out another cry of pleasure as you can feel his essence empowering you even more. You continue to pump his cock, you want every last drop from him. This is when you get an idea. You snap your fingers just like the succubus who created the new, and you feel the guard’s cock become rigid again. He starts to ejaculate cum he didn’t have stored up before. Rather, what essence he has left is converted into cum for you to accept inside your pussy. Your stomach bulges from all the cum inside you, making you appear to be five months pregnant.

It’s now you notice you may have gone too far draining the guard’s essence, because now he has begun to turn a shade of red. Not only that, his form has begun to shrink beneath you, becoming smaller, and smaller, until he looks like a little red-skinned imp!

“What have you done to me?!” squeaks the red imp in a panic.

“She’s turned you into an underling. You must serve her as your new master.” says the succubus.

You can see now the other guard looks grey-faced and appears to be sleeping. Knowing how much essence to drain without turning a mortal into an imp takes some practice it seems.

“No, I won’t!” the imp squeaks, and it’s then you feel the control you have over it.

“Be quiet.” You say, and the imp’s mouth closes, try as he might to make a sound. You smile devilishly and look to the succubus that made you.

“Good.” she says, “Let’s break this pitiful binding ritual.”

The succubus takes hold of your hand and you feel your inner essence combine with hers. Magic, true magic, like you’ve always wanted to wield, surges up inside you and then flows into the succubus. She aims her free hand at the binding ritual, and then a sudden burst of red lightning shoots from her fingertips. The binding ritual runes on the floor break apart and fade away as if they were never there.

“And now we are free to leave.” says the succubus, “I have such delights to show you! Let’s be off!”

The succubus snaps her fingers, and you feel your physical form begin to disappear from the material realm as you, the succubus, and your new imp slave are whisked far, far away. Your new life as a succubus has begun!

END.</tw-passagedata><tw-passagedata pid="34" name="Door 5" tags="" position="">You choose the second door on your left and approach the door slowly. The handle feels cool against your palm as you gently open the door. As soon as you do however you feel a strong gust of which take hold of you, and the next thing you know this wind is sucking you inside. For a moment it seems like you might be able to prevent yourself from being sucked into the room thanks to holding onto the door handle, but the wind is too strong, and it hurts too much to hold onto the handle for more than a few seconds. You enter free fall for a second before your body hits the floor with a thud. The room around you spins, and you can hear the sound of a door ahead of you slamming shut.

“What the heck?” says a man’s voice from behind.

You can smell smoke, and a hint of booze, and several men muttering. You climb to your feet quickly and turn on the spot to see a small room filled with five guards; all full grown men. They’re sat at a table playing a game of cards whilst snacking on what is presumably their lunch.

There is a momentary silence as you take in them, and they observe you. Then chaos breaks loose as they get up from their seats in a hurry and come after you. For a few moments you are able to dodge and weave their attempts to grab you. They’re humans, so it isn’t too difficult to use your Cat agility to evade them. However after bounding about inside the room you find there is nowhere to run. The door you entered from is the only way in or out as far as you call tell. With no windows, your only chance is the door you entered in from. You try the handle, and find it won’t give at all to your touch.

It is as your hand is on the handle at the door that two guards take hold of you and hoist you into the air. You fight their grip, but it’s no use. Within seconds the men have you pinned on the table by your arms and legs. Even if you weren’t currently stuck in a newly female variation of your body you wouldn’t have the strength to find them off.

“What do we have here?” says one of the guards, grinning and licking his lips.

The guard grips the amulet around your neck, and you can feel the chain tighten. He tries to take it off, but all he manages to do is cause you pain from choking. He releases his grip and you gasp for air now you can breathe again.

“A thief by the looks of it.” says another one of the guards, “That amulet belongs to Sedina.”

“Are you sure about that?” said the first guard.

“Certain.” says the other, “She had me do an itinerary last month. That thing is her property.”

As the men hold you down you aware how of exposed your new body is. Your pert breasts rise and fall, and your legs are held apart, showing off your new pussy to them. The guards aren’t making any attempt to hide the obvious lust they have for you. The hands which hold you down are also massaging you a little, one hand at your thigh in particular is reaching closer to your pussy with each passing moment.

“Let me go!” you shout. You know this is futile to say, but having a man’s fingers kneading closer to a pussy you haven’t even had for an hour is enough to make you speak up.

The guards cuff your hands and feet with heavy iron shackles. They then lift you from the table and put you on your feet. You’re commanded to walk, and you feel a hand slap your ass. You walk briskly, if only not to be slapped like that again. The door you couldn’t open before is openly easily by one of the guards, which tells you the doors in the tower might only allow certain individuals to pass through them. You’re let out of the room, and down crimson floor. The stairwell which disappeared before has returned, and two of the guards lead you down the stairs all the way down to the ground floor of the tower. Your breasts jiggle humiliatingly as you walk down the steps. You hug your chest, but one of the guards his your elbow, and threatens to hit you worse next time, so you have no choice but to keep your arms down in front of your stomach.

You’re taken to a small prison cell and locked inside. You’re alone, with nothing in the cell with you except a bed of straw to lay on. A guard sits outside the cell and has the key on a chain around his neck. Even if you weren’t shackled, and behind the cell bars, you doubt you would be able to take the key from a full grown human male like him.

[[Wait for someone]]</tw-passagedata><tw-passagedata pid="35" name="Wait for someone" tags="" position="">Hours pass and all you have to occupy your time with are the strange new sensations which come with your newly female body. You don’t want to take notice of your new breasts rising and falling on your chest as you breathe, but you do. You don’t want to take notice of your thighs pressing together, and the absence of your cock and balls, but you do. You don’t want to notice the guard looking at you, clearly thinking of ways he could fuck you into submission, be you do.

It feels close to midnight, though you can’t be sure, when a guard arrives outside the cell. He opens the cell door, and leads you through the tower on the ground floor. After going down to long hallways, you and the guard with a hand at your arm approach a set of large red double doors. He pushes the door open, and you both enter inside. You’re taken aback by the space you’re now in: a vast low-ceiling chamber. The walls and ceiling appear to be made of an unusual black glass-like substance. Ahead you can see a large throne, and sitting in it a woman who is by far the tallest woman you have ever seen.

If you had to guess the woman before you looks to be around six and a half feet tall. A lot of that size is in her long, slender legs. You can see she has long flowing black hair, and is wearing a revealing ivy-green dress. She has one leg cross over the other, and you can see she isn’t wearing shoes. By far the most impressive aspect of this woman besides her commanding height is her pair of huge breasts, each twice the size of her head at least.

The guard brings you closer to this woman, until you and the guard are standing several paces from her throne.

“Speak.” says the woman, smiling with slight amusement.

“We caught this thief this morning.” says the guard beside you, “She managed to reach the relic room and stole this.”

The guard gestures to the amulet around your neck.

“It appears to be enchanted so we did not try to remove it until you were notified.” says the guard.

“Yes…” says the woman, “You wouldn’t have been able to remove it. Not without a sound knowledge of magic, or removing her head.”

The woman leans forward in her throne, you can see her emerald eyes fixed on you.

“That amulet bares a curse. This thief is in fact male. Isn’t that right, pet?” says the woman.

You don’t like being called ‘pet’, so you resolve to remain silent.

“What is the matter?” says the woman, “Are you shy?”

Again you remain silent. You’re caught, and there’s little way out for you that you can see.

“Do you know who I am, pet?” says the woman.

“Sorceress Sedina.” You say stiffly.

“Correct.” Says the Sorceress, “Which makes me wonder why you would be so foolish as to think you could come to my tower and steal from my relic room. Who is it that has paid for your services?”

“I did it of my own accord.” You say, lying, “I figured valuable things would be kept in this tower. And I was right.”

The sorceress wags her finger, “Ah-ah-ah.” She says, “It is useless lying to me. I can always tell when someone is lying. It matters very little who has contracted you to steal from me. I have many enemies envious of the magic and things I possess. I will find out who contracted sooner or later. Whoever sent you here must have thought you capable of the job, but did not have the foresight to know it would take more than an agile Cat to escape the tower’s magical defences. What a shame you did not wind up in one of the other rooms… alas I am sure there will be more thieves that will find themselves faced with the same choice you were.”

“What will become of me?” you ask.

The sorceress cocks her head to one side and appraises you. “Well, as it so happens I do have something in mind for you, but I will keep that to myself for the time being. For now I will see that you are put to good use.”

The sorceress snaps her fingers, and a magical plume of green smoke emerges around your throat. The green smoke disappears; you feel a thick collar pinching at your throat. You tug at it, finding it is solid all the way round, with no give in it to pry it loose.

“W-what is this?” you ask.

“An obedience collar.” Says the sorceress, “You won’t be needing those.”

The sorceress waves her hand, and the shackles binding your hands and feet feels hot all of a sudden before bursts into painless flames.

“Kneel.” says the sorceress.

You refuse. However as you look at the sorceress you can feel another part of your mind wanting to accept the request. You ignore the growing compulsion in your mind, but the more you ignore it, the greater the want to kneel becomes. Within a matter of microseconds you feel terrible, like your whole body might explode if you didn’t simply do the easy thing and lower yourself down to your knee. The pressure builds inside your head until there is no part of you on the inside left that can refuse the command. Outwardly it looks as if you immediately did as you were told.

“Massage your breasts.” says the sorceress, grinning mischievously.

You gasp. You have no intention of doing any such thing. But again that feeling returns. It was exhausting in those microseconds refusing the order the first time round. You don’t want to resist the compulsion in your mind at all. You can’t imagine anything worse. You try with all your willpower not to obey the order, but again your hands go to your breasts as if you had immediately obeyed her command, your new dainty feminine fingers massaging your new tits. You let out a whimper. You had done your best to ignore your breasts throughtout the day, pretending they didn’t exist. But now how could you ignore the feeling of your incredibly sensitive nipples, and the tender tit-flesh?

“S-stop t-this!” you say, breathlessly.

The Sorceress puts her head in her hand and continues to watch you as your hands massage your tits. “No.” says the sorceress, “You need to learn that I am in control. I am always in control. The sooner you learn this, the more pleasant our time together will be, pet.”

“Stop calling me that! Let me go!” you shout, your new voice reaching an octave it has never reached before.

“Another demand?” says the sorceress with mock-surprise. “Very well, a punishment then.”

She points her finger at you and a bolt of green energy zaps from her fingertip. The magical energy hits your chest, which suddenly grows in size, at first doubling, them tripling in size until you have a huge pair of tits jostling on your chest. You continue to massage them, feeling their incredible weight yielding to your touch.

Your body begins to feel hot, particularly down in your crotch. You’ve never felt anything like it before. Is this was female arousal feels like? Your womanhood feels engorged with blood, your pussy lips widening as if expecting to be filled. Your fur ripples as you begin to pant.

“Enough.” Says Sedina, and your hands are freed from massaging your newly fat tits. “Go with the guards and do as you’re told.”

[[Reluctantly follow the guards]]</tw-passagedata><tw-passagedata pid="36" name="Reluctantly follow the guards" tags="" position="">&lt;&lt;silently&gt;&gt;
  &lt;&lt;set $description = "a young catgirl maid"&gt;&gt;
&lt;&lt;/silently&gt;&gt;You rise to your feet and follow the guards which lead the way out of Sedina’s chamber. If having tits before was new and strange to you, the pair you now have are a constant new distraction, the hefty tit-flesh jostling with every step you take.

“Can I please have some clothes?” You ask the guard walking beside you.

“We’ll see.” says the guard, which takes you by surprise. You were expecting to be told to shut up.

The guard takes you back to your cell. Once you’re inside you sit in the dark not knowing what to do with yourself.

“Sleep.” Says the guard, and everything goes black.

You wake in the cell shortly before the first light of dawn. You sit up, noticing the huge tits on your chest haven’t gone away. Looking around, you can see the guard is no longer around. You sigh. This is so humiliating. Some thief you are. Even if you were able to escape the tower somehow your reputation as a thief is ruined. You feel the amulet resting between your tits and remember that this was what it was all for. Maybe, just maybe if you could escape with the amulet then you could still get paid, and you could still make the money you need to fulfil your dreams. You try to look on the bright side; being collared is better than being brutally beaten, tortured, or killed, right?

The iron gate outside your cell opens, and the same guard from the previous day enters. He slips something through the bars that lands at your feet.

“Put it on.” says the guard.

The same magical compulsion you felt before springs up and takes control of your actions, or rather overtakes your willpower in such a small amount of time it makes no difference. You bend down, feeling your huge tits weighing you down and causing tension in your lower back. The fabric you pick up from the floor makes you flinch, but only for a moment as your body continues to be under the magical collar’s sway.

The guard dropped a maid outfit at your feet, which you now wear. Whilst it might have been a good fit before your increase in bust size, now it is very tight all over, and the hem of the dress barely covers your crotch. The slightest breeze or sway of the dress would surely reveal your naked crotch beneath.

The guard unlocks the cell door. “Follow me.” He says, and you follow him against your will out of the prison cell and down the tower hallways. He brings you to the kitchen area you entered in when you first broke into the tower. You can see the food grate on the floor which you climbed up from as you enter the kitchen. There are two male cooks busily working on breakfast for everyone working in the tower, and there are three other maids dressed like yourself, each with collars on, busily taking the prepared food on trays and leaving the kitchen one at a time, presumably to deliver the food to the intended person in the tower.

You’re thankful that you have a furry face since you can feel yourself blushing from being exposed like this to everyone in the kitchen. Not only at you a Catgirl now, but you’re a Catgirl with huge tits, and you’re dressed in a high quality as well as skimpy maid outfit.

“She’s all yours.” says the guard.

He leaves, and for a moment you are just left standing in the kitchen doorway not sure what to do with yourself. A big beefy man with a tall cook’s hat turns to you and narrows his eyes.

“Another one?” he says, “Can you cook, girl?”

“Not really.” You say in a small voice.

“Figures.” Says the cook, “Well come here and chop these carrots, and when you’re done with the carrots you can start on the onions.”

You do as you’re told, joining the cook’s side. He hands you a knife, and you begin chopping carrots. Your huge tits jostle with each chop you make. You quickly get lost in the repetition of what you’re doing. Once you have all the carrots chopped, just like the cook asked you start chopping the onions lined up in front of your chopping board. Tears sting your eyes as you chop them, and you become aware of how hungry you are, since you ate light the previous evening, and haven’t eaten since.

The work you are given in the kitchen continues until late morning. You find yourself rushed off your feet helping with food preparation. Luckily it seems everyone in the kitchen is too busy with their work to pay much attention to you. It is the cusp of afternoon when you, the cooks, and the other maids join together in the quarters adjacent to the kitchen. You are given an eye-wateringly delicious meal; soup, with lots of steaming vegetables, and half a loaf of freshly baked bread. You eat greedily whilst the others around you take their time. During your work in the kitchen your body wouldn’t let you slow down; you had to keep up the pace of everyone else; which only make the exhaustion and hunger you felt even worse.

After you’ve eaten and had some time to excuse yourself for the lavatory (a daunting experience given your new body), you are put back to work in the kitchen. This time however instead of chopping the vegetables you are instead tasked with joining one of the maids, a tall, black-skinned woman with thick curly hair. Together you ease a trolley laden with food and non-alcoholic drinks around the base floor of the tower. She pulls the trolley, you push.

You already had a good idea of the layout of the tower, since you were given the blueprints for it before. You’re sure if this maid, who goes by name Dayla, wasn’t with you, you would have little difficulty navigating the tower. Dayla stops the trolley outside the ground floor guard break quarters. She knocks on the door as a courtesy before entering a moment later. Together you bring the trolley laden with food inside, and you can see there are a half dozen off-duty guards sat around a large table playing a game of cards.

They take immediate notice of the both of you.

“Afternoon girls.” says one of the guards who has a patch over one eye, and is missing some teeth.

“Good afternoon, Gunther.” Says Dayla, happily.

“Let’s put a pause on this game and get back to it after lunch, boys.” says Gunther. The other guards concur, and put their cards down for later. You spot the copper coins they’re using for bets in the middle of the table which wouldn’t be enough for more than a single loaf of bread at a typical market stall.

[[Serve their meals]]</tw-passagedata><tw-passagedata pid="37" name="Serve their meals" tags="" position="">You help Dayla with serving the meals to the men; and the men, like you did earlier, eat greedily, slurping at the meat stew the cook prepared. There isn’t much you can do except wait off to the side of the room. As the men eat however there is no denying all have taken notice of you; each man’s gaze lingers on your fat tits, and the skimpy maid outfit you’re wearing.

“What’s your name, girl?” says Gunther, having finished his meal. The other men are close to finishing theirs.

“Arcanis.” You say.

“That’s a boy’s name, ain’t it?” says Gunther.

You give a hesitant, slow nod.

“What do you have a boy’s name for?” says Gunther.

The guard beside Gunther, the one who was in charge of keeping watch over your prison cell all of last night, speaks up.

“She used to be a boy. See that amulet on her neck? Turned her into a girl. She’s the one who tried to steal from Sedina’s collection yesterday.”

“Oh!” says Gunther, “I see. I wasn’t working yesterday. Of course I heard about another thief trying to break into this place. Sedina’s magical defences are so good I hardly see the point of us being here. But it beats a life in the army, don’t it boys?”

The other guards nod in agreement. Each, though no older than thirty, have their share of scars, and a slight tiredness in their eyes that no sleep could fix.

“Why don’t you come sit on my lap?” says Gunther.

At first you think he’s asking Dayla to do this. However it is your body that is compelled to move thanks to the magic collar around your neck. You sit on Gunther’s right leg, your behind pressing down on his broad thigh.

“You know every maid that works here is a slave?” says Gunther.

You nod.

“And,” he says, his hands resting on your waist, “They used to be sex slaves?”

Your eyes widen. You didn’t know that part.

“You see.” says Gunther, “Sedina’s a sex sorceress. Because of that she likes to make sure everyone who works for her in this tower is sexually satisfied, or put to good use. The essence of sexual lust and depravity fuels her power; and seeps into the very foundation of this tower as a result. Which means, to put it plainly, the more we fuck the stronger Sedina’s magic is when she is within the tower.”

“But I don’t want to.” You say in a small voice.

“Oh that doesn’t matter.” Says Gunther, “Because you’re a good for nothing thief that got caught, and you’re now Sedina’s property. And she says we can do whatever we like to you and the other maids.”

“No!” You say, and you stand away from Gunther. You feel the collar urging you to sit back on his lap, but you’re able to resist the desire to.

“Oh ho!” says Gunther, “I like you. You’re lively. But I think you need an attitude adjustment. From now on, whenever you’re in my company you’re going to behave like a happy-go-lucky slut, a true girly-girl whore.”

“No!” You say again, feeling instinctual revulsion. However the guards laugh because they can see your eyes fluttering, and your jaw tightening as you try to resist the compulsion to behave just as the guard described.

[[Struggle]]</tw-passagedata><tw-passagedata pid="38" name="Struggle" tags="" position="">&lt;&lt;silently&gt;&gt;
  &lt;&lt;set $description = "a young catgirl slut"&gt;&gt;
&lt;&lt;/silently&gt;&gt;Behave like a girly-girl whore, says the voice in your head. It’s your voice. It feels like you’re having an internal dialogue with yourself. Your true self, your true thoughts, now feel like the outside influence trying to creep in. The real you feels increasingly like the fake outsider trying to manipulate your actions.

“I love watching them struggle.” says Gunther.

“Shut up!” you yell, balling your hands into fists and standing on your tip toes. Your voice as you say this however comes out at a higher, girly-girl pitch. The guards laugh, and so does Dayla, though the laughter doesn’t reach her eyes the way it does the men.

Be a happy-go-lucky slut, your thoughts say. You shake your head, your tits jostling heavily on your chest as you do. You bring your hands to your head and close your eyes. It’s no use, the more you try to fight the compulsion, the stronger it gets. The piece of your mind that is resisting the urge to behave like a slutty whore is diminishing like the dying flame of a wax candle.

A smile reaches your face, your eyes becoming half-lidded. Your thighs begin to rub together, and you start to play with your hair.

“Like this?” you say. The words that come out of your mouth sound much more effeminate.

“That’s better.” says Gunther, “Doesn’t that feel better?”

You bob your head excitedly, smiling. “Yes!” you say, chirpily, “So much better!” You tail wags in waves behind you.

“Why don’t you clear this mess up, Dayla?” says Gunther. Dayla does as she is told and starts to clean away the plates. “You on the other hand.” Says Gunther, “Me and the boys have something else in mind. Don’t we lads?”

The other guards grin and look around at the others at the table.

“Great!” you say, excitedly, “What would you like to do?”

“First you can get on your knees and play with my cock.” says Gunther.

“Okay!” you say, happily, and although you know you shouldn’t, that you really, really don’t want to, you get on your knees and do as you’re told. Gunther gets out of his seat. He’s a tall man, with a bit of a gut, presumably from lots of drinking during the evening hours each night. All you can do is watch with a happy-go-lucky smile on your face as Gunther takes out his cock. It’s on the small side, which makes you feel a little sorry for him. It’s hairy, and the cock of a middle-aged human man. It’s not something you’ve ever wanted to see.

Play with it, says a voice inside your head. You don’t want to obey the voice, but you do. You reach out and take Gunther’s flaccid cock in your right palm and start to tug on it. You’re not really sure what you’re doing, since you’ve only ever had your own cock to practice with; and even then you never made a frequent habit of masturbation.

“You’re not too good at this, are you?” says Gunther.

You feel a little insulted, but on some level you’re glad you’re not good at playing with his cock; you might be a female of your species now, with big fat tits, wearing a maid outfit and a magic collar that strips you of your free will, but on the inside you’re still you; you’re still Arcanis!

“Use your mouth then.” Says Gunther, as if providing an obvious solution to a problem.

“No!” you shout, temporarily breaking the collar’s on-going influence.

“You’ll like it and give it your best.” says Gunther.

The magical energies within the collar weigh down on your mind, pushing out your ability to deny what Gunther wants from you. Your head jerks forward, and your mouth accepts his now erect cock. Gunther remains still as you take his cock to the back of your throat. A wet sucking sound fills the room as Gunther holds the tips of your ears firmly. He starts to buck his hips, pushing his cock down your throat, and occasionally causing your cheek on the right side to bulge out as he moves his cock around your mouth.

You taste something strange, besides the slight saltiness of his slippery wet cock, and you realise it must be cum. Gunther’s grip on your ears becomes so firm it starts to hurt a little, he stops bucking his hips and cums into your mouth; his cum soaking the back of your throat as well as your tongue. When he takes his cock out a long rope of his cum connects from the tip of his cock to your bottom lip. He rubs you on the head like some pet.

“Good girl.” He says, and for a moment you think your humiliation is over. You feel an urge to either spit out the cum, or to swallow it. Just as you’re about to spit it out however Gunther says, “Make sure you swallow that. Don’t make a mess.”

Before you can even think to disobey his command, your throat flexes, and the cum is swallowed with an audible gulp.

You motion to get up from your knees which have begun to ache a little from being against the hard floor. But Gunther’s hand rests on your delicate feminine shoulder.

“Where do you think you’re going?” says Gunther. He’s buttoned up the front of his trousers now. Looking to your left, you can see the other guards, all five of them, are lined up with their hands at their trouser buttons ready to make use of you just as Gunther just did.

The first guard after Gunther unbuttons his trousers and pulls out his cock. This one is a good deal larger than Gunther’s, and is already semi-erect.

“Get to it.” says the new guard, and you are forced to obey. You bring your head forward and take this new cock into your mouth. Like Gunther, this guard holds your ears, but unlike Gunther he massages them instead as he works his cock around your mouth.

“Use your tongue more slut.” Says the new guard, and you do as you’re told. You slide your tongue over the head of his cock, tasting the precum leaking from it. You then run your tongue along the thick shaft, feeling the hot throbbing tension of his cock.

“Come on.” says the new guard, “You can act more like a slut than this. You need to be the biggest slut you can be.”

[[Obey]]</tw-passagedata><tw-passagedata pid="39" name="Obey" tags="" position="">&lt;&lt;silently&gt;&gt;
  &lt;&lt;set $name = "==Arcanis== ''Kitty''"&gt;&gt;
  &lt;&lt;set $description = "the //best// catgirl slut!"&gt;&gt;
&lt;&lt;/silently&gt;&gt;This command scares you, because what follows is a weight in your mind that presses down so hard it almost makes you go cross-eyed. What identity you have; that of Arcanis, the Catboy thief, is diminished and shoved away to the back of your mind. The slut that replaces him rises to the fore of your mind, becoming the new you, as if she were merely lying in wait this whole time. Now you’re more than just obeying commands, you’re actively being the slut they want you to be for their amusement.

“Okay!” you say in a high pitched sing-song tone, after taking his cock from your mouth. You decide that a real slut would use more than just her mouth to please these men.

“Come on I can take all of you!” you say happily, you then giggle as the other guards, with the exception of Gunther who has had his fun, bring themselves around you. Within seconds they all have their cocks out, pointed at you. You’re surrounded by cocks, and balls, and you couldn’t be more excited to play with all of them.

You take a cock in each hand, and then you accept another cock into your mouth. Another guard pulls down your maid outfit at the front, making your huge tits flop out. He slips his cock between your tits and starts to fuck your cleavage. Whilst you have your hands, mouth, and tits put to use by the guards, another guard reaches around from behind you, his hand finds your pussy and starts to passage the topmost part of your pussy that is extremely sensitive. It feels incredible, but also deeply shameful. But now your body is engaged in an orgy with these men it is easier to let your body lead the way.

It isn’t long before the guards start to cum. However, unlike Gunther who was content to cum in your mouth, all the other guards, with the exception of the one playing with your pussy, take their erect cocks and cum all over you. Hot sticky jizz coats your face; a rope of cum coating your right eye, then another rope coating the other. Cum lands on your nose, and your lips, and your neck, and all over your breasts. The guards must be used to treating women this way, because they laugh and talk among themselves.

“You like that?” says one of the guards.

“Thank you so much!” you say, happily. On the inside you want to gag, and take a hot bath, but on the outside you look like the happiest cum-drenched Catgirl in the world.

Your gaze shifts to the cum all over your chest and maid outfit. What a hassle this will be to clean. You ease up to a standing position before Gunther’s hands rest on your shoulder. Given your female body is significantly weaker than your male one, his hand feels a good deal heavier.

“Where do you think you’re going?” he says.

“Oh!” you say, happily, “I thought we were done?”

The guards laugh. Gunther give a broad checkerboard toothed smile. “Very funny.” He says, “We’ve only just started you dumb slut.”

You feel your stomach tighten. This isn’t good. You’re caked in cum and they’ve only just started?!

[[More]]</tw-passagedata><tw-passagedata pid="40" name="More" tags="" position="">“Alright who wants to go first?” says Gunther.

The guards mutter among themselves. Finally, the largest of the guards, barely fitting inside his leather armour, is decided to be the one to go first. The fat guard breathes heavily, already sweating from cumming on you before.

“Pog’s eager today.” says one of the guards.

“There’s something about this slut being a boy before that makes it way hotter.” Says Pog,

“Look at those fat tits. Look at that dumb cross-eyed face. Seeing her so pathetic and so utterly defeated like this…unf…yeah that’s what Pog likes.”

If the collar weren’t magically making you submissive you would leap onto Pog and claw his eyes out. Instead you stand before the obese guard with a happy-go-lucky smile on your cum-coated face.

“On the table, fat-titty-cat.” Says Pog.

You do as he commands. You move past him and climb onto the table, messing up the game of cards and the small pool of coins the men were playing for.

The guards don’t seem to care very much however as you sit on the table with your knees close to your chest.

“Sit on the edge, I can’t reach you if you’re sat in the middle.” Says Pog.

“You fat bastard.” Says Gunther.

Pog and the other men laugh.

You do as you’re told, moving to the edge of the table.

“Spread your legs.” Says Pog.

You spread your legs, your thicker thighs parting to reveal your pussy. Pog takes you by surprise as he puts his right hand to your pussy. You both notice at the same time that your pussy is hot and wet. Has this all been turning you on, or is your wet pussy side effects of the collar making you behave like a slut? You fear it is the former, since the strange heat and tingling sensations you were experiencing before make more sense to you now. That hot ache down below caused your pussy to lubricate itself in preparation for a human cock.

Pog notices the wetness down there, but doesn’t say anything. Instead his blotchy red face looks down at you knowingly, sharing a strangely intimate moment. He gives a slight smirk before letting his trousers fall to his ankles.

“OH!” the other guards yell like children play fighting. They mock-pretend to shield their eyes.

It occurs to you now that you had a secret suspicion that Pog, despite his large size, would have a comically small penis. The opposite is true however. Seemingly in defiance of the huge gut above it, Pog’s cock is downright huge. It is a big meaty member that you struggle to believe hasn’t been enlarged by magic.

You want to tell him to stop. To wait. To do anything except stick that huge thing into your pussy. Just by judging the size of his cock alone there’s no way it can fit into your tight pussy.

Outwardly you smile and put a finger to your lip as if you’re curiously waiting for him to stick his cock into you.

He puts the head of his cock into your pussy. The sensation of being filled even by just the head of his cock makes your eyes widen and your whole body tense up. Your pussy is tightly wrapped around the head of his cock. There’s no more room, you think. No more. There’s no more room!

None of this internal dismay reaches your face however. Pog, undeterred, and grunting from the pleasure he’s receiving from your pussy gripping his cock so tightly, presses his cock deeper into you.

A moan escapes you lips, it would be a scream of both pain and pleasure if you were in control of your outward behaviour. Your mouth opens, and you begin to pant like an animal as his cock continues to go deeper and deeper inside you.

“Damn I think she’s a virgin.” says one of the guards.

“Of course she’s a virgin, idiot.” Says Gunther, “She used to be a boy, that pussy must be tighter than a debt collector’s coin purse.”

Looking down Pog brings his cock fully into you. Your stomach is bulging now, the mass of his cock clearly pressing upward inside your stomach. Your legs spread out, your toes flexing, you look up at the ceiling from the intense feeling of both pain and fullness gripping your entire body.

“Boys you gotta try this.” Says Pog, “Never felt a pussy this tight.”

Pog thrusts his cock back and forth, stretching out your tight pussy.

You feel Pog’s hot sticky load fill up your insides, right where your new womb is. You let out a long whining sound as your mouth hangs agape and your tongue extends beyond your bottom lip.

Pog eases out of you. “That’s me.” He says. He puts his hand to your gut and starts to push down gently.

“Wait.” Says Gunther, “Let’s see how big we can get her.”

The other guys agree with Gunther. Pog takes his hand off your gut that’s slightly engorged with his cum. Gunther follows after Pog. His cock is not nearly as big, and you can feel the difference Pog has made to your pussy that has loosened up a good deal from the girth of his member. Gunther takes hold of your fat tits and squeezes them hard, making you whimper as he fucks you vigorously.

“Tell me what you like more.” Says Gunther as his cock pounds your cunt, “Being a cumfilled slut or the pathetic male you were before?”

Under the collar’s influence you cry out, “Cum—filled—slut!”

“That’s right!” says Gunther.

He cums inside you, his cum joining Pog’s immense load. Gunther is followed by another guard who fucks your pussy like it’s the last fuck he’s ever going to have.

This guard cums inside you, and then the next, and the last one after that. By the time all the guards are finished with you, your stomach is bulging from all the cum inside it.

You’re panting, your fur damp from the sweat that has broken out across your body. As is usual with your species once you reach a certain level of hot, you can’t help but pant to cool your body down from dizzying levels heat.

“Do you want to fuck me some more?” You ask, the collar influencing you to say this. On the inside you want nothing more than to wash yourself clean. You stink of their cum now that has started to dry all over your face, and maid uniform, and their semen is leaking out of your pussy that’s sore from being fucked so hard by several men.

Gunther, Pog, and the other guards laugh at this question.

“You really are new.” Says Gunther. “We ain’t no regular men. We work for Sedina. You think we’d be finished after cumming on your face and pussy? Inside this tower we’re made much more virile. Haven’t you notice the size of our cum loads? When men are in the tower we can cum, and cum, and cum without end. You think Sedina’s going to let a little thing like fatigue get in the way of a good fuck? We’re not going to stop fucking you until you’re as glazed as a cake. Now lay down, slut.” Says Gunther.

[[Obey...]]</tw-passagedata><tw-passagedata pid="41" name="Obey..." tags="" position="">You do as you’re told.

“Alright, Pog. Everybody gets a turn on her asshole next. Pog you go last, we don’t want you stretching her out until the end.”

“Alright fair enough.” Says Pog, “Only fair since I fucked her pussy first.”

“Davis you fuck her throat.” Says Gunther.

Another guard, presumably the ‘Davis’ in question, who has already fucked your mouth and your pussy, makes his way to the other end of the table.

“Bring your head back.” He says to you, and you do as you’re told.

Davis puts his cock into your mouth, taking it deep into your throat which you can feel bulging.

“What a slutty mouth.” Says Davis, running his hand across your cum-soaked face.

You can feel Gunther entering your asshole. The sensation of being full increases as an incredible flushed feeling takes hold of your entire body. You moan, but your moan is stifled by Davis’s cock.

Both men set to work fucking you hard. They make no effort to be gentle at all. There was a slight feeling of gentleness when they first started fucking your face, and cumming all over you, but their standard and general opinion of your worth has degraded quickly. Now you’re little more than something to be fucked. Barely even a person. No better than an object.

More cum is released inside you; deep inside your asshole, down your throat, which you are forced to swallow due to the collar’s influence on your mind and body. One after the other the guards let their loads fill you up until you’re practically gargling on their cum, and leaking it out of your pussy and asshole.

Pog is the last one to have his fun with your asshole. As expected the huge girth of his cock is like a fist penetrating your asshole, going deeper and deeper, this time bringing with it some genuine pain along with the rush of orgasmic sensation. You cum so hard your eyes roll upwards, your whole body shaking and convulsing from the continual edging, climax, post-climax afterglow, repeated over and over until your every muscle aches.

The guards, even with Sedina’s magical enhancement of their sexual prowess, have to rest after fucking you so hard for so long. They all sit, panting and red-faced. All the while Dayla has stood patiently to the side showing no emotion either way as to how she feels about your body being used by the guards.

You meet her gaze, and it shocks you to see there isn’t the slightest bit of concern in her eyes. You wonder how many times the guards have used her like this. Surely you’ll one day have the same emotionless gaze after taking several cocks in every orifice on a daily basis.

You ease yourself upright as Dayla sets to work cleaning the cum stains on the table and the floor. She hands drinks to the men, as well as extra snacks (raisin-bread) to help replenish their stamina.

You meet Gunther’s gaze, still having the girly-girl slut look of constant wonder on your face. Oh how you wish you could scowl at him right now. Fantasies of beating each man to a pulp fill your mind, exciting you. You take in several deep breaths, the amulet feeling hard and cool between your cum lathered tits.

“Alright, go clean yourself up you dirty slut.” Says one of the guards.

“Okay!” you say, and you get up and go to an adjacent washroom that guards use to wash themselves on occasion between shifts.

[[Clean yourself]]</tw-passagedata><tw-passagedata pid="42" name="Clean yourself" tags="" position="">&lt;&lt;silently&gt;&gt;
  &lt;&lt;set $name = "Arcanis"&gt;&gt;
  &lt;&lt;set $description = "a young catgirl maid"&gt;&gt;
&lt;&lt;/silently&gt;&gt;You take your cum-caked maid outfit off, and you find something quite unusual about the washroom; pipes attached to the walls. It takes you a minute to figure out how to use the pipes the way they are intended. By some strange magic hot steamy water erupts from the pipes, and looking down the water goes into a little drain by your feet. Never have you seen such a clever invention; cold water pipes, sure. But never hot water from a pipe like this.

You also find that you can tolerate the heat much better as a Catgirl than you could a Catboy. You stay under the hot pipe water for several minutes, eager to finally be getting all the clumps of cum out of your fur. When you’re done you turn the pipes off by turning a little red wheel, and then you shake your fur to get the worst of the water off you.

You’re thankful nobody is watching you at this moment, because your fur puffs up as it tends to do after you wash it, giving you a slightly kitten-ish look. Once dry, you have little option but to put the same cum-stained maid outfit back on. You do your best to scrub it, but by this time Dayla is waiting for you to come out.

“You took too long.” says Dayla as you take the trolley laden with dirty plates and bowls out of the guard’s break room. Together you make your way back to the kitchen. Whilst it wasn’t exhausting being used by the guards as their cum-rag, you don’t want to experience anything like that again. To your relief it seems your work day is over, and Gunther’s demand that you act like a girly-girl slut seems to have worn off now you’re no longer in his presence. Dayla leads you and the other maids to the maid living quarters, which is little more than a tiny room with bunk beds. You are given a bottom bunk by the door. Before you can rest you’re told to go wash your uniform properly in the adjacent washroom.

Come late evening, you’re sat on the bunk bed resting. The other maids talk quietly among themselves. They’re noticeably more at ease now. You’re not sure whether it is a good thing that they’re not paying you much attention. You lay back in bed, again taking notice of your huge tits that are a constant distraction encumbering you. Given how tiring the day was it doesn’t take long for you to drift off to sleep.

[[Time passes...]]</tw-passagedata><tw-passagedata pid="43" name="Time passes..." tags="" position="">Each day is the same, but a little different. Each morning you help prepare breakfast in the kitchen, then you leave with one of the maids to deliver the food. Every single time you return with the taste of cum on your mouth, and a new chore of washing your uniform later in the evening. You’ve gotten used to not having any control over your actions; having huge tits is a constant annoyance, but they’ve also started to feel like //your// tits. The guards no longer have to tell you to behave like a girly-girl slut in their company, instead as soon as you walk into their break room you actively play the part with frightening ease.

It's exactly two weeks to the day of your failed attempt at stealing the amulet from the tower. You’re now resting in bed when a guard arrives at the door and enters.

“Come with me, Cat.” Says the guard, ‘Cat’ being the name everyone calls you by now. You do as you’re told. You get up and leave the room with the guard, and he leads the way across the tower. This isn’t an unusual occurrence, since you’re used to being taken in the late hours of the night and sent to a guard’s sleeping quarters to be used and fucked and then dismissed.

The guard leads you across the tower, and you immediately figure out where he is leading you.

Your heart begins to thump in your chest and your breathing becomes tempered as you see the double doors that lead to Sedina’s throne-room chamber looming before you.

The guard stops at the entrance, then gestures for you to enter. You look at him, wondering if he intends to follow you.

“Move.” He says, and you can feel the collar compelling you to do as you’re told. You press your body tits-first against one of the doors, and you slowly ease it open.

You enter Sedina’s throne-room chamber. Like before it is darkly lit, but unlike before you can’t see Sedina sat in her throne. As far as you can tell you’re the only one in the chamber.

The door you entered in from swishes quietly shut behind you before giving a hard click that makes you flinch.

It’s now you feel a large pair of feminine hands resting on your shoulders. The pale skin is unmistakably Sedina’s. You can feel the huge weight and warmth of her incredible body pressing against your back now as she towers over you from behind.

“Hello, Cat.” Says Sedina, her voice deep and soft as velvet, “Have you enjoyed your stay in my tower?”

“No.” you say, discovering that you are not at this moment being compelled to behave differently in Sedina’s presence.

“That’s a shame.” Says Sedina, casually. All you can see are her arms reaching down, and her hands finding your tits.

“You used to be such a cute little Catboy, but now you’re an even more delightful Catgirl. Tell me, do you like having breasts like these? Do they please you?”

“No.” You say, feeling your face scrunch up with loathing for the sorceress that has made you little more than a food-preparing cum-rag for the guards in her tower.

Her hands grope your fat tits, and you can’t help but let out a small whimper.

“Good.” Says Sedina. You can’t be certain, but it feels like her pelvis is pressing against the back of your head. It feels oddly comforting; your fur ripples from the pleasant sensation of being close to someone like this.

You feel Sedina’s hand at the top of your head. She runs her fingers through your fur, massaging you there. For the first time for a very, very long time you find yourself purring.

You slap a hand over your mouth as you hear Sedina lightly chuckle.

“What do you want.” You say, cross.

“Company.” Says Sedina, “It can be awfully lonely in this chamber sometimes.”

You spin round, turning to face Sedina. Her full six and a half feet mass looms before you, her incredible body on show in the flowing ivy-green dress she is wearing. For a moment it is hard to think of anything at all as you are in awe of her.

“Look I’m sorry I tried to steal from you.” You say, “Haven’t I suffered enough at the hands of your guards?”

Sedina cocks her head to one side.

“Perhaps.” She says, “In truth I’ve always had other plans for you. But I have been busy these past two weeks with important matters that demand a sex sorceress’s attention. I thought you would appreciate having something useful to do instead of being stuck in a drab prison cell.”

“I would have preferred the prison cell.” You say bluntly. It’s as you’re looking up at Sedina, feeling the huge weight of your tits on your chest that you remember that she was the one who increased their size with her magic.

“I don’t want these breasts anymore.” You say, “I’m sick of them.”

“Oh darling.” Says Sedina, “Haven’t you learnt yet that what you want is not a concern of mine? The moment you entered the tower to attempt to steal from me, what you want became forfeit. From now on you are my property, and I will do with my property however I so choose.”

It’s then Sedina snaps her fingers. You feel a sudden tingling sensation across your body that then builds in your waist, hips, and thighs in particular. With a sudden magical whomp! Your waistline recedes inward, becoming almost half its original width. Your hips widen considerably, the bones creaking.

In union with the increased width of your now hips, which gives you an hourglass figure, your buttcheeks swell to become a large rounded bubble-butt. There is still more to the changes however, as your thighs thicken to match your new waistline, hips, and butt.

“There.” Says Sedina, “Now don’t think this is the limit of how much I will change you if you speak to be so impudently again. By all means you are allowed to disagree with me, but you must always speak to be in a calm and respectful manner.”

Your eyes are wide and your ears are pricked up. You have never felt so full of rage as you are right now. If it were possible, you would leap on Sedina and claw her eyes out, however it is the fear of what more she will do to you if you attempt such a thing that keeps you from doing anything at all except standing still.

“Have something more to say?” says Sedina, looking at you devilishly.

You let out a tiny grunt from the effort it takes to bite your tongue.

“Good.” Says Sedina, “Your devotion to your male sex is admirable, but it is clear you make a much better female. From what I have been told by my guards you are a rapacious slut.”

“The collar forced me to behave like that.” You say as calmly as you can.

Sedina shakes her head like you are a mere child unable to understand basic concepts. “At first, yes.” She says, “But the collar's magic has weakened the past few days. When you acted like a good slut you did so of your own accord. When you looked like you were enjoying drinking the cum of my guards, it was because you were. You are a slut, and you have greatly enjoyed having an excuse to behave like one. Here.”

Sedina waves her hand. The collar around your neck disappears.

“There is no need for that anymore. I have already broken your male spirit. Now I can enjoy taking on a hands on approach.”

“Please,” You say adamantly, “I’m sick of being changed. I don’t want any of this.”

Sedina makes a tut-tut sound and waves her hand. In the next instant you feel your throat seize up. You try to ask her what she has done to you, but instead all that comes out is a cute sounding ‘meow’.

Sedina giggles into her palm. “Delightful.” She says, “Frankly I don’t want to hear another word from you. Pets don’t need to have the ability of speech after all.”

“Meow!” you say, the only word you are able to utter it seems.

“Yes, my kitty-cat?” says Sedina.

She lowers herself down, squatting in front of you, bringing herself eye-level with you.

“Is there…” she says, trailing off for a moment as the tip of her right index finger begins to sparkle with emerald magic, “…anything you wish to say?”

You can see this is a thinly veiled threat. Again you hold your tongue, deciding it better to be frustrated and furious than to be at the mercy of her magic. But this, you realize, is an incredible opportunity to see magic up close. You still have your mind, and you no longer have the collar around your neck. What if you played along to see her cast her magic? Could you learn it in secret and possibly use it to escape? This idea leaps into your mind, and you find yourself holding onto it, if only to have some sliver of hope in this desperately humiliating situation.

“Come, Cat.” Says Sedina, and she turns on her barefooted heel and leaves the throne-room chamber.

[[Follow her]]</tw-passagedata><tw-passagedata pid="44" name="Follow her" tags="" position="">You follow her out, passing the guard who ogles your incredible new figure. It feels as if your upper body is resting atop your hugely expanded hips and ass, rather than following the conventional S-shape common to all humanoid beings.

It’s impossible not to rub your thighs together as you walk now, and you can feel the fat-blubber-weight of your new behind moving rhythmically with each step.

It’s not immediately clear where Sedina is leading you until you reach a large emerald green door on the first floor of the tower. It’s now you understand where she’s taking you; her private sleeping chamber. With the wave of her hand the door glows brightly, the runes worked across it lighting up. The door opens, and you follow Sedina inside.

It feels as if your long wish to learn more about magic has in a small way come true.

Sedina’s private chamber is both a private study, the shelves on the right and left side lined with books, and scrolls, and charts.

There is a huge double-bed dominating the far back of the room. There must be some magic used here to make the room larger on the inside than it should have been.

“You.” Says Sedina, “Go lay down on the bed.”

You hesitate. Sedina looks over her shoulder at you, and you can see she is not going to ask twice. For fear of being changed further by her magic, another ‘Meow’ escapes your lips and you hurry over to the bed. You climb up and sit with your knees up against your huge tits. It’s strange sitting on such a soft bed after being stuck on the thin mattress in the maid living quarters, and before that your life on the streets resting atop a moratorium roof.

Now Sedina begins to undress. She lets her ivy-green dress fall to her feet; that’s all it takes for her tall pale body, with the best figure you’ve ever seen on a woman displayed before you. She can see a tuft of black pubic hair covering her crotch. Her skin is pale, and flawless too. Sedina meets your gaze; you flinch, and blush. You look away toward your own cleavage, and the amulet resting atop your tits.

Sedina pads slowly across the room then climbs onto the bed. She pulls aside the lusciously soft bedsheet and lays down. With the wave of her hand the torchlight burning on brackets all around fades down until they’re just small embers smouldering in the dark.

“Rest, Cat.” Says Sedina, her eyes closed now.

You remain quiet. Minutes pass. Your keen Cat eyes can see clearly in the dark. For a while you are able to focus your attention on the books on the shelves, the names fascinate you: Health of the Mage, Strategies of Spellcraft, Enchantments and Energies. On and on the interesting book titles go, each title leaving you salivating to read the contents.

An hour passes. By this time you are certain Sedina is fast asleep. She must be confident in her powers to leave you at the foot of her bed. Your nails are sharp enough to cut a human throat if need be; you wouldn’t want to do it, but for all the things Sedina has done to you, and made you do already, you figure you could make an exception. You don’t attempt to hurt her however; assuming you could, then you would still be stuck in her tower, stuck with huge tits, a fat ass, and a narrow waist, as a female of your species in a human dominated town. How far could you really get?

You lay on your back looking up at the chamber ceiling. There isn’t any hope of you falling asleep right now. All you can think about is playing with your pussy and getting yourself off. Just the thought of your own transformed body, your huge tits, your wide ass, your narrow waist…these things are making it impossible to just go to sleep and ignore. Constantly being the sexual plaything of those guards has had its price. Somehow your once prudish mind has become utterly filthy. Your body wants sexual release. All you can do as you lay in the dark is squirm, your hands rubbing the insides of your thighs. It takes all your mental concentration not to touch your pussy. You daren’t glance over at Sedina in bed. Just the look of her incredible body, her beautiful face, will surely send you over the edge and having you aggressively pleasuring yourself.

Your thoughts drift to a time when you had a cock, just as your fingers slip inside your wet pussy. You flinch, your thighs clamping down around your hand. You had just begun to daydream, and that momentary lapse of concentration was all you needed to absentmindedly play with your pussy. Now you were pleasuring yourself it was too late to stop. You eased your legs apart a little more, and as quietly as you can you continue to tease the sensitive part of your pussy, the little nub near the top opening. You let out a whimper, and put your hand over your mouth to stifle your moans.

“Go to sleep, kitty.”

You look to Sedina. She hasn’t moved, but you’re sure it was her that just spoke.

“Meow?”

You forgot she took away your ability to speak.

“If you can’t control yourself, then I’ll do it for you.”

Sedina, still laying with her head against the pillow, and her hair obscuring her face, lazily waves a hand. You feel something tight and cool clamp down around your crotch. You look down, and can see you’re now wearing what looks like a metal brace with a lock at the front. You reach down and try to take it off, but it won’t budge. To your shock you realise it is some kind of chastity device.

Your fur ripples and your whole body feels flush with heat. Doesn’t she understand how stifled you are in this body? How could she be so cruel to just leave you unable to find sexual release?

“Meow?”

“No. Go to sleep. I won’t tell you again.”

You look at Sedina in the dark, your keen Cat eyes seeing her as clear as day. For a few moments you weigh up the risk of asking her to remove the chastity device from your crotch, and you decide it would be better if you just stay quiet. You lay on your back again, feeling your huge tits shift and jostle as you do.

It is a long night. You toss and turn and your fingers run along the chastity cage over and over trying to find a way around it. There isn’t any. Come the early hours of the morning you finally stop prying the cage and fall asleep.

[[Get some sleep]]</tw-passagedata><tw-passagedata pid="45" name="Get some sleep" tags="" position="">Sedina is out of bed by the time you wake up. It doesn’t feel like you have slept for very long. You open your eyes and can see Sedina standing naked several paces away from you. Her incredible tall body, her pale skin, her generous hips and long slender legs are right there for you to see. Again arousal rises across your body and a burgeoning heat forms in your crotch. You reach down, feeling the chastity belt Sedina placed on your with her magic last night.

“From a respectable Catboy thief to a meow-ing kitty-cat. How amusing.”

Sedina looks over her shoulder at you and smiles. She’s so beautiful and sexy, you’re not sure if you want to press your body against her forever, or fall in love.

“Meow.”

“It’s becoming a verbal tic I see. Interesting. I don’t think I will correct that. It’s cute.”

“Meow!”

“Yes, yes. You’re upset. But you are serving me a purpose. You are more than just my pet.”

Sedina, still fully naked, comes and sits on the bed. She towers over you, her incredible bust and flawless body so close to you now. You look up at her with wide, searching eyes. It’s hard not to feel like a dumb animal in her presence.

“You, my Cat. Are now what is known as a familiar.”

You vaguely remembering hearing of witches having such things, but no more than a vague memory.

Sedina places her hand on your head and strokes you behind the ear. This sends your body into sexual overdrive yet again. You let out a loud purring noise as you need your head against her fingers.

“A familiar is a being that aids a sorcerer in her magic. As I am a sex sorceress, much of my power is gathered from the sexual frustration of others. You don’t think my body is an accident, do you? I have crafted it to please the eyes of men to draw from their lust. You, who were once male, still have a male’s mind, despite the improvements I have made to your body, and what the amulet has made you. I tell you this so you understand that you will not have sexual release unless I allow it.”

You let out a hiss that takes you by surprise. This is not the first time your race has been treated this way by humans. Humans over the many millennia have attempted to create pets out of the Cat-People, something your species has resisted successfully. If it were not for the millennia of effort exhibited by your race, then you would not even be given a rank of a lesser rank in society’s caste. One day your race collectively hopes to rise to the same standing as humans, and other sentient species. But now, in this moment, Sedina clearly have no issue stripping you down to the level of a beast.

“Ah yes. Your kind have always had a wild streak.”

Sedina stands and stretches, her perfect heart shaped behind in full view before you now.

“As sorceress I hope to make sure your kind is reduced to the level of beast where they belong. Humans are the grandest and best of all the species. Any fool can see that. I will enjoy making sure you learn your place.”

You hiss again. You don’t care how afraid of her magic you are. You climb to your feet on her bed and bare your claws, your lips peel back to show your sharp teeth.

“Oh please.”

Sedina snaps her fingers, and you feel an incredible pressure all over your body. Just as you think this invisible pressure might crush you, your body gives to it. All around you the world grows, the ceiling becoming taller, the bed becoming much larger. Sedina, whose pale body looms flawlessly before you, also grows exponentially.

“There. Now you’re the size of a mere alley cat. It should help you know your place better.”

You give another hiss. Looking down you can see the chastity belt has shrunk with your size, but not the amulet, which hangs heavy like a watermelon on your chest, which is already weighed down by the huge tits Sedina has cursed you with. You aren't even half her height anymore.

“Your sexual frustration is the very thing which allows me to have such easy control over your form.”

“Meow!”

Sedina cocks her head to one side, then looks away from you. She flourishes her arm and a flowing emerald green dress appears out of thin air and drapes itself her body, leaving very little to the imagination.

“I do not have time to play, kitty. I too must work my trade. You will do as you’re told and accompany me. I will need you to fuel my magic throughout the day.”

You shake your head, refusing to go with her.

“I wasn’t asking.”

Sedina snaps her fingers, and the next thing you know the same chain that holds the amulet to your neck, making it immovable, sprouts another chain that connects a meter away to Sedina’s right ankle.

She begins to strut away from the bed. After two full strides the chain won’t extend any further. You feel a sudden tension at your neck and you’re pulled from the bed onto the floor. You land nimbly, but not nimbly enough as you are again dragged across the floor. The full weight of your smaller body is inconsequential to Sedina’s powerful strides. You slide across the floor as she takes another stride. Whilst the chain isn’t choking you, it is certainly not a pleasant feeling. You quickly get to your feet and hurry behind her. It is easy to keep pace with Sedina, even as she walks at full stride, but you are now very careful not to fall behind.

Sedina leads the way out of the chamber out to the hallway. Guards on their rounds put their backs to the wall and bow their heads respectfully to the sex sorceress. And when they see you they either smile mockingly down at you and what you’ve become, or they simply keep their stoic gaze.

[[Continue walking]]</tw-passagedata><tw-passagedata pid="46" name="Continue walking" tags="" position="">After several minutes of walking Sedina beyond a sliding door and out to a pleasant garden area. The weather is warm, and pleasant, and ahead you can see a beautiful woman with tan skin and a petite body. She is sat is dressed scantily in a similar dress to Sedina, instead of emerald green however her dress is a shade of pink lined with many silver sparkles.

“Sister!” says the young woman. She stands kisses Sedina’s cheek. Sedina, much taller than this woman, has to bend down for the kiss.

“You’re looking well, Tess.”

“Oh yes.” Says Tess, touching the underside of her short curly black hair with her palm, “The de-aging ritual I cast worked a charm. Not bad for two hundred, am I right?”

Tess giggled, whilst Sedina merely smiled warmly.

Both women sat across from one another at a large round table in the garden. A maid approaches the table and puts down two tall glasses filled with a peculiar green liquid. She then leaves, seemingly invisible to both Sedina and Tess.

“I see you have a new pet.” Says Tess.

“Hmph? Oh yes. She’s new. Still need to make sure she learns her place.”

You look up and see Tess is gazing at you as if looking at your very soul. Her eyes shine a shade of deep pink.

“Oh no!” she says with mock-concern, with an amused smirk on her face.

“It used to be a male! Look what you’ve reduced him to! Oh you are have always been the mean one, haven’t you?”

Sedina put one of her long pale legs over the other, seemingly unconcerned.

“Whatever works, I suppose.”

“Quite.” Says Tess.

“Do you mind if I hold it?”

“Meow!”

“Oh I see what you mean now.” Says Tess, “Males are always the feisty ones.”

“After we’ve talked business we could play with him a little if you like?” says Sedina.

“Yes! Lets!” says Tess.

Naturally you’re left looking up at both beautiful women wondering exactly what they mean by ‘playing with you’. You clench your fists and look to the chain connecting that binds you to Sedina’s ankle-chain. There is a sudden noise like the tightening of a cord, and to your embarrassment it is coming from your stomach. You’re hungry. Very hungry. But up until now all the madness that comes with trying and failing to steal from a sex sorceress has prevented you from noticing.

Sedina snaps her fingers, and the same maid emerges from the shade several paces away to Sedina’s side. “Go to the kitchen and fetch a bowl of milk and whatever scraps are left for our little kitty here.”

The maid gives a quick nod and hurries to her task.

A bowl of creamy milk is brought to you by the maid. At first you try to ignore the hunger pangs in your stomach, but after Sedina’s rests her foot on the back of your head, forcing your head down into the bowl, you lap up the milk if only to make her take her foot away.

“You’re too cruel.” Says Tess in a mockingly-concerned tone.

“Oh please.” Says Sedina, “Rich men pay me small fortunes to do this to them. This little former Catboy is loving every second of it. He just doesn’t want to accept his new station in life. She’ll learn soon enough.”

[[Wait for Sedina]]</tw-passagedata><tw-passagedata pid="47" name="Wait for Sedina" tags="" position="">Sedina and Tess finish their drinks, and you’re forced to follow in Sedina’s wake like before thanks to the chain around your neck. You’re led across the tower and you find yourself back in Sedina’s private chamber. With the snap of her fingers the chain connecting you to her foot vanishes, leaving you with just amulet hanging from your neck.

Tess hurries over to the bed and sits down. Sedina looks down at you and gestures with her head for you to go over toward the bed. Your neck hurts a little from craning up to look at the sex sorceress.

“Go now or I’ll have to punish you again.”

You consider being defiant despite this threat, but the fear of what she might do to you prompts you to walk slowly toward the King-sized bed. When you reach the edge, before you can muster yourself to leap up with your cat-agility, Tess grabs you by your right arm and yanks you up onto the bed in one big motion.

“Have fun you two.” Says Sedina, “I’ll check in later. How long do you think it will take you?”

“Oh, about an hour I would guess. She looks like she’ll break rather easily.”

“Meow?” you say, worried.

“Oh yes.” Says Tess, “My little cutsie-cat. I’m going to break what little stubbornness you have left! Yes I am! Yes I am!” She’s talking down at you as if you were just a dumb animal, her hand pinching your cheek. It takes all your willpower not to bite her.

“Oh you are a delight, sister.” Says Sedina. She makes her leave, the door to chamber closing with a heavy thud in her wake.

Now you’re alone with Tess things feel suddenly intimate. Here you are, a catboy-turned-catgirl reduced to a feral Cat’s size, albeit with your body still in the same shape as you were before Sedina used her magic to shrink you down. Your body is still of undeniably feminine proportions. Not to mention you can’t even say anything more than ‘Meow’.

Tess looks gorgeous as she is knelt before you. Her tan skin looks a shade darker in the dim chamber torchlight. Up close you can see her skin is flawless, and her face is just as beautiful as Sedina’s, although much more reminiscent of a pixie, which you have seen before captured in jars on the black market some time ago.

“Now.” Says Tess, “First I’ll explain to you what you will become.”

You look up at her. She’s taking up most of your view. Despite her petite build at your current size you would have no home of overpowering physically.

“You will become my familiar. A familiar is a pet a witch has which aids her in using her magic. Perhaps Sedina has told you as much already?”

“Meow.”

“Well, Sedina hasn’t said she will give you to me as an early birthday present, but just between you and me I think she will.”

Tess lays on her stomach, bringing her huge face much closer to your own. You can see her dazzling amber eyes, and the many freckles dotted around her button nose.

“I can’t make much progress if all you can do is meow. So let’s fix that.”

Tess snaps her fingers. Your throat tingles.

“Better?”

“…y-yes.” You say, testing your voice.

“You see.” Says Tess, “I could control your mind and make you obedient, but really that would be a sub-par method for a sorceress. Instead, I want you to agree to be my willing and eternal servant for as long as you live. In return you get to be my one and only familiar, and to have all the duties and privileges hitherto.”

“I can't. I want to be a male again.” You say, predictably. “I want to be normal sized. And I want to leave this tower so I can go back to my old life.”

Tess cocks her head, looking at you as if you were a child that didn’t understand the basic realities of life.

“Your old life does not matter anymore. Honestly, you’re lucky you’re not ribbetting as a toad in her garden. Since I asked nicely, and you declined my offer, then I will have to do my best to be more convincing.”

You wonder what Tess means by this, surely it mustn’t be anything good.

“My sister said she’ll be back in an hour. This means we need more time. Luckily, I am a Time Sorceress, so we’ll not be shorthanded on that front.”

[[Time sorceress...?]]</tw-passagedata><tw-passagedata pid="48" name="Time sorceress...?" tags="" position="">Tess snaps her fingers and a large hourglass appears beside her on the bed. You can see the grains of sand within falling. Tess points to the hourglass with her index finger and says, “Stop!”

The grains stop falling, mid-air.

“Now, we have all the time in the world.” Says Tess, “Whether it will take days, weeks, months, or years to break you to my will, it doesn’t matter. You will experience every moment here until you choose to serve me. I want you to extend your hand to me when I saw paw.” Says Tess. “Paw.”

“No...” You say. Standing fully upright on the bed, keeping your hands to your sides.

“Fine.” Says Tess, “I’ll wait until you’re ready to give me your paw.”

You wait for some magical trouble to commence thanks to your disobedience, but nothing of the sort happens. Tess looks at you, smiling cutely and raising her eyebrows for a moment.

Slowly you ease yourself off the bed and then hurry over to the door which leads out of the chamber. Your fat behind jostles along with your heavy tits as you cross the chamber and reach the door. When you press your body against the door however you find it isn’t budging in the slightest.

“It won’t open until I want it to.” Says Tess. “You’re going to be stuck in here with me until you’re ready to do as you’re told.”

Tess reclines on the bed, her bare feet rubbing against the covers as she reclines back.

You spend the next five minutes trying to get the door open. As expected you make no progress. During this time Tess simply watches you. The hourglass on the bed hasn’t budged a single grain.

Perhaps, you think, there might be some other means of escape inside the room. You explore the edges of the room, opening drawers, and looking through chests. You find a myriad of interesting things, from sexy outfits Sedina presumably wears, to old artifacts and spell books that won’t open for you. It feels like an hour has passed by the time you have fully scoured the chamber for a means of escape, finding none.

“Ready to submit?” says Tess, now with one leg crossed over the other, her foot bobbing from side to side.

You make a half-hearted attempt to search the chamber a second time, if only to have something to do. Half an hour later you give up, your mind feeling dull from the continual fruitless effort.

You sit on the floor, crossing your arms and legs. Time continues to pass. After another thirty minutes you look to Tess who seems completely at ease, unmoving. You wonder how it is she isn’t bored. She’s fully awake, and you’ve noticed her occasionally looking your way, but beyond this she hasn’t done much of anything.

Another hour passes. By this time you’re seriously bored. Your butt, as thick as it is, has started to feel numb from sitting down for so long. You stand up.

“Aren’t you bored?” You ask from across the room.

“I’m a Time Sorceress.” Says Tess, “I can’t feel boredom, because my mind isn’t affected by the passing of time like your average mortal’s. For you it has been… two and a half hours. For me, only a matter of moments. Why, feeling restless?”

“Please.” You say, “I just want to be let free.”

“And I told you that is no longer an option for you.”

You sigh. More time passes. You wander about the chamber for another half hour before you begin thumping your forehead against the dresser drawer, if only to invite a new sensation to break the monotony of chamber.

“Is that really more fun that obeying me?” says Tess.

“Yes.” You say, thumping your head again. It’s starting to ache.

“Well, if you’re not going to obey me yet. Why don’t we at least play a game to kill some time?”

Were you not currently bored out of your mind you would reject the offer immediately. However you stop thumping your head and look over at her.

“Come on…” she says, gesturing for you to come over to the bed.

“Fine.” You say, “But only to play a game.”

You suspect there’s a trick going to be played on you, but you’re willing to take that risk to cease the boredom.

Climbing up onto the bed is not easy given your huge tits and fat ass. Tess doesn’t help you however as you make you way onto the top of the bed. She’s laying one her side now, looking at you as if she were a girl in your harem awaiting instruction.

With the snap of her fingers a board with pieces emerges on the bed between you both.

“What is this?” you ask.

“It is a game the royals play called Chess.” Says Tess.

“What is the trick?” you ask.

“There is no trick. I will teach you how to play, until you no longer with to play with me.”

You don’t trust her. But you decide to go along with the game anyway.

Several hours pass as Tess teaches you how to play Chess. What the pawns do. What the knight does. The bishop. The rooks. The Queen and King.

You play a game. She wins. Then another. She wins again. Over the course of several hours you play over a hundred games of chess.

Throughout all this Tess’s concentration doesn’t dip in the slightest. She is as fresh and perked up as when you first saw her in the tower garden. You also notice you’re not the least bit tired, or hungry. But you are becoming bored of the game. At first it was easy to get lost in the rhythm of each game, and the excitement of getting a little better. But after several hours and many games you can’t bring yourself to move another piece on the board.

“No more.”

“Really?” says Tess, “You’ve had enough?”

“Yes.”

“Now what will you do?”

There is silence as you don’t have an answer. You don’t want to scour the room again, and you don’t want to play any more chess.

“What is there to do?” you ask.

“Submit to me by giving me your paw.” Says Tess. She holds out her hand again.

You shake your head. “No.”

“Then we’ll continue to wait until you change your mind.” Says Tess. She waves a hand and all the pieces on the board go back to their original positions.

“We can play whenever you wish to play.” Says Tess.

She reclines back again, putting one ankle over the other.

Minutes pass. Each second that passes feels like someone is poking your mind, the boredom become a kind of soreness.

You lay down and try to sleep. For a hour you are able to get by trying to sleep, drifting into a numb state of meditation. Your mind is too sharp, and your thoughts too active for you to have much of a reprieve from the boredom however. This boredom is made even worse because it makes you even more aware of how beautiful and sexy Tess is. Looking at her eases the boredom, but comes with the price of feeling incredibly turned on. What’s more, your own huge tits, and your thick thighs and rump, are becoming a new distraction for you. The horniness you feel is authentic, and is becoming stronger the more you try to ignore it.

“You know.” says Tess, snapping your thoughts back to the present. Every new word she says is bliss, something new means a small break from the monotony. “If you want something to do, you could always give me a footrub.”

“No.” You say, your gut-instinct defiance kicking in.

“Suit yourself.” says Tess, and she keeps looking at you. There isn’t an ounce of crossness or boredom on her face. By the look on her face she is exactly where she wants to be.

After ten minutes you give in. You let your hands touch her feet, and Tess gives a little giggle. “Careful. That tickles.”

Her feet are comparatively huge to you, and your hands, like when you moved the pieces of the chess board, feel very small compared to the task before you.

With minutes the shame of what you are doing gives way to the pleasant distraction it provides. You fixate on her feet, making sure to caress and do the best job you can massaging her soles.

“Wonderful. You’re really good at this.” Says Tess.

Begrudgingly you feel a sense of accomplishment from doing such a good job. This continues for an hour, each time you finish massaging one foot, you move onto the other, then start the process of massaging every inch of her sole all over again.

By the end of the second hour however this too becomes a chore.

“Is there something else I can do?” You ask, taking your hands away from her feet.

“You can obey me by giving me your paw in subservience. Then we will leave here and go off and do many wonderful things, and have many exciting adventures. Until then here we’ll stay.”

“…is there anywhere else I can massage you?” you ask.

“No.” says Tess, “Not whilst you’re not subservient to me.”

You gulp a mouthful of saliva. Is that all it would take to put your hands on her breasts and…elsewhere? Simply giving her your paw? It seems a frightfully easy thing to do now. You shake your head. No. You will remain defiant. You will not do as she asks. You must stay firm in your mind on your goal, and that is…what? Staying in this frozen state of time until…you inevitably give up? With Tess’s feet before you, and the chess set ready to be played on your right, there is always evidence that your willpower is crumbling. What’s worse, you’re finding you actually quite like Tess and her approach to taking control of you. She isn’t twisting your form with magic like Sedina. She is merely trapping you… and waiting patiently.

“Can you really not feel time passing? Do you not feel bored at all?” You ask.

“Not at all. It is the first thing a Time Sorceress must learn to mitigate if she is to meddle with Time Magic.”

The weight of inevitability falls heavily on your shoulders. It is already a forgone conclusion that your willpower will break. She knows it, and you know it.

More games of chess are played. She continues to win every game with ease. More hours have passed. You’re finding it hard to keep track. Without fatigue you have little ability to judge how much time is passing. All this time has given you time to think about what life as a familiar would be like. You would be protected, and around a powerful magic user. You would be trapped in this body doing who knows what... but would that be worse than spending nights alone atop morgue buildings?

Finally after finishing another game of chess you say, “Okay. I submit.”

“That was fast.” Says Tess, teasingly. “Are you sure you wouldn’t like a few more days, maybe weeks to think it over?”

“I can't win.”

“Very well.”

[[Give her your paw]]</tw-passagedata><tw-passagedata pid="49" name="Give her your paw" tags="" position="">You hold out your hand to place on hers, sighing.

“Oh no.” says Tess, “It is going to take more than simply giving me your paw to become my familiar. You have been quite defiant, so I need to be sure you are willing to be the kind of familiar I require before I give you that honour.”

You wince. You’ve already given up and she wants more from you? As beautiful as she is, now you can see the hint of mischievous malice in her amber eyes. A slight touch of madness brought about by her manipulation of time?

“W-what do I have to do?” You ask.

Tess cocks her head to one side and smiles mischievously.

“You must give up what's left of your male spirit. I want a female familiar through-and-through. Not one that is conflicted about her sex. How can you be truly obedient to me, if you are always at odds with yourself? I could have you renounce your womanhood, and change you back to being a male of your species; but I simply enjoy having a woman’s company… when I’m not with a full grown man’s of course.”

Tess winks at you as she sees your shock. Your chest rises and falls as panic sets in. Now you’re truly caught between a rock and a hard place. Lose what little masculinity you have left? What does that even mean? Is your masculine self even something you can think away?

“Lucky for you.” Says Tess, “I know a specific enchantment which will aid you in becoming your best self. First, let’s remove this trinket.”

Tess takes hold of the amulet around your neck and tugs on it, and the chain gives as if it were that simply to take the amulet off all along. She chucks it aside, letting the valuable stone fall to the chamber floor with a hard clacking sound.

“Now repeat after me: ‘I am a girl. I love being female. I belong to Tess.’”

//This bitch//, you think. Your heart thumps your chest. Your fur ripples. Your whole body feels flush. You’re also feeling strangely turned on by her ultimatum, not least because you know that you’re giving in.

[[Say the words]]</tw-passagedata><tw-passagedata pid="50" name="Say the words" tags="" position="">“I-I am a g-girl.” You say, still finding it embarrassing to make yourself say the words, “I-I l-love being female. I belong to Tess...”

By saying this you can feel something changing inside you. There’s magic at work here, some hidden enchantment of some kind egged on by the words you’re saying, as if the words you're speaking are casting a spell over yourself.

“Good.” Says Tess, happily. She ruffles your hair. “Now keep saying it until you believe it. I’ll know the difference.”

“I am a girl. I love being female. I belong to Tess.”

“Again!”

“I am a girl. I love being female. I belong to Tess.”

“Again!”

“I am a girl. I love being female. I belong to Tess.”

“Lay down and spread your legs and play with your pussy, since you love being female so much. Keep saying the words.”

You do as you’re told, suddenly hot and horny. You sit and lay back, spreading your legs apart. You fingers finding your already hot and wet pussy. You play with your clit, rubbing it in a circular motion, your body responding as a moan escapes your lips.

“I am a girl. I love being female. I belong to Tess.”

“Say it like you mean it!”

“I am a girl! I love being female! I b-belong to T-Tess!”

She makes you say it over and over until you’re shouting each word whilst you play with your pussy, bringing yourself closer to orgasm with each passing moment.

Tess sits and watches you lazily.

“When you cum that will be it for your masculinity. It will be forever gone to you. You still have a choice to resist, for us to play the boredom game again. But I can see you want this. That you want me to be your new mistress. You want to become my new familiar don’t you, pet?”

“Y-yes! P-please!”

“Good. Say it again!”

“I am a girl! I love being female! I belong to Tess!”

You orgasm. You’ve never felt pleasure like it. Your whole body is caught in a state of bliss so intense it is almost painful. All you can think about is the sensation all over your body that you’re experiencing, a warm burst of sexual release and freedom. You shake and twitch as you pant, expecting the climax to soon be over.

It’s now however you see Tess’s hand hovering over your body, and a swirling pink energy in her palm. This energy washes over you as the orgasm continues to push any rational thoughts to the back of your mind, making you as simple-minded as a feral cat, your eyes going askew, your mouth opening and your tongue hanging out, drool dripping from it.

Tess moves her hand away, but the orgasm rises again, continuing far longer than any orgasm should. The pleasure washes over you again and again in waves, threatening to crush your mind in the deep abyss of sensation. You can't stop your fingers from rubbing yourself as you cum over and over again.

“C-can’t s-stop!” You stammer, “H-help!”

“This is intentional, pet.” Says Tess, “I have made your orgasm crescendo endlessly.”

Tess wags her finger and your mouth moves autonomously. The same phrase escapes your lips over and over: “I am a girl! I love being female! I belong to Tess!”

[[Cum]]</tw-passagedata><tw-passagedata pid="51" name="Cum" tags="" position="">&lt;&lt;silently&gt;&gt;
  &lt;&lt;set $name = "Kitty"&gt;&gt;
  &lt;&lt;set $description = "a beautiful snow-white catgirl"&gt;&gt;
&lt;&lt;/silently&gt;&gt;Tess leaves you like this for not just hours, but days. In stasis, you don’t tire, your throat doesn’t get sore, and neither does your pussy. But your mind inevitably breaks to her will. After several days of repeating those words over and over continuously masturbating, what last stubborn vestige of maleness is left in you disappears, and is replaced with the wonderful experience of indulging in feminine pleasures. You’re barely aware of the moment Tess frees you from her time-warping magic, the pleasure still lingering long past. By the time you are barely functional, you find yourself on Sedina’s bed, with both sorceresses looking down at you. Tess to the left, and her much taller sister to the right.

In a daze, you look over yourself, and see that your fur has been made snow-white, and there is now a pink ribbon in your hair. You feel a new, bubbling sense of joy with your naturally cute appearance, one that you couldn't have understood in your past life, as your hand raises up to stroke the ribbon delicately.

“It has been so nice seeing you, sister.” Says Tess, giving Sedina a firm hug. “And thank you for the lovely gift.”

“Yes” Says Sedina, “Be sure not to wait ten years before visiting again.”

“Oh you know I lose track of time sometimes.” They both laugh.

Their gazes fix on you. “And you’ve done a wonderful job breaking her in. Are you excited to be going with your new master, Kitty-cat?” Sedina coos at you.

“I am a girl. I love being female. I belong to Tess.” You say automatically, still lightheaded, but pleased to have their attention.

“I’ll have to remedy the extent of the control.” Says Tess, “She’ll come out of her shell eventually.”

Tess waves a hand, and a blazing pink circle of light fills the space as an ethereal disc floats in the air before her, opening up.

“Come here, Kitty.” Says Tess. You bound off the bed, happy to finally be leaping into your owner's arms.

Tess says one final goodbye to her sister, and leaves with you, stepping into the pink veil.

END</tw-passagedata><tw-passagedata pid="52" name="Accept garments" tags="" position="">You look at the garments in her hand and you strongly consider refusing. But your sense of self-preservation is stronger than the revulsion you have for women’s clothing. You take the garments and put them on. This is easier said than done, thanks to the strappy and loose fit nature of the clothing. You change into panties which hug your pussy tightly, and ride up your behind. And you wear a stringy bra that barely covers your nipples. There are a few semi-transparent fabrics of a violet colour attached to the new garments.

Footsteps can be heard thudding up the nearby stairs. You and Renne look to see the fat-cat and a large catboy tiger enter.

“Don’t you look splendid?” says the fat-cat.

You gulp. You’re not used to being looked at with such lustful eyes. The tiger to the fat-cat’s left holds a stoic gaze, but he too is clearly checking out your breasts and your hips. Your mind feels increasingly dizzy from the catnip aroma all around, but it isn’t exactly unpleasant either.

“Thank you for giving her a chance, Gerro.” Says Renneta.
“I’m not a charitable Cat.” Says the fat-cat, “But I can’t turn away a tight piece of ass like this now, can I?”

It’s difficult not to look surprised. Does he mean you? Are you the tight piece of ass? You must be…are you really that attractive as a catgirl? It’s a strange feeling to think of yourself as an object others want. Over the years you have often been mistaken for a catgirl thanks to your somewhat feminine appearance. Now it’s real.

“I’ve got a two-for-one show booked for you two downstairs for a regular client who wants to see something new. Get yourselves ready and be downstairs in five. Got it?”

“Yes, Gerro. Thank you.”

Gerro and his catboy Tiger muscle head back downstairs. You look to Renneta.

“What does he mean by ‘two-for-one’?” you ask.

“It means we’ll be having sex in front of a guest. It will be a show.”

“What?!”

Renneta gives you a stern look. “I am sticking my neck out for you. You have had plenty of chance to leave already. All you will need to do is fuck in front of the customer. They may touch a little but no more than that.”

“But I don’t know anything about having sex as a girl.” You say, omitting you’re not really that sure about having sex as a guy, since you’re a virgin. The idea that you might soon be hot and sweaty with Renneta however is very enticing. Anxiety takes hold of you nonetheless.

“What?” says Renneta, “You wish to leave now? When there are men outside looking to you? Who might kill you? After we are done below you can leave and go where you please. And I should think you will remember your friend Renneta and what she has done for you.”

“What does that mean?” you ask, “Do you need something from me?”

“I am always recruiting for the cause.” Says Renneta, “Our species will not know true liberation until the day we take it for ourselves. You are a very resourceful Cat, boy or girl. My people are in need of a Cat with your talents. Now, you must do away with your manly pride just for a little bit. I will do my best to protect you during the show.”

Again you gulp. You didn’t sign up for this. You didn’t sign up for any of this. You’re a thief, and a damn good one. Stealing the amulet is your greatest achievement yet. Astraya is going to pay a small fortune for the amulet.

“The amulet…” you mutter. Looking between your breasts you can see the amulet. It is clearly a valuable item. Gerro might have overlooked it, but who is to say the type of customer that frequents a brothel will do the same. You look around the room for something to hide the amulet with, and you spot just the things.

Peeking out of a draw are numerous fake-crystal necklaces on strings. All of them are tacky as one would expect a catgirl in a brothel to wear. You take hold of half a dozen of these tacky crystals and put them around your neck. The amulet, now hidden among them, doesn’t gleam so brightly or so expensively now the cheap crystals obscure its value.

“I’m ready.” You say, trying to take some initiative. It’s hard not to feel like the day has swept you away into a path altogether unexpected.

[[Go downstairs]]</tw-passagedata><tw-passagedata pid="53" name="Go downstairs" tags="" position="">You descend the first floor brothel room and go back to the room where you first met Gerro. There is soft guitar music playing in the corner of the room, which you can see is being played by the catboy tiger from before. He plays beautifully, his attention devoted to the strings and plucking them with his long black claws. There are also three other Cats in the room, all male, sat to one side of the room on a large comfy couch. Two of these Cats are middle-aged, with pudgy bellies, and are in the midst of smoking cigars. The third cat is familiar to you, because it is Gerro, who seems to be taking audience to your first (and ideally only) performance in the brothel.

“Ready when you are ladies.” Says Gerro. He takes a puff of his cigar and blows smoke which trails up and lingers around the top of the ceiling. In this room the smell of catnip is not as strong as the others. The incense that was in the room before must have been removed for the customer’s benefit. It comes as a small relief, but you’re already good and high after breathing in the catnip vapours for minutes on end.

In the middle of the room a soft matt has been put down. Renneta guides you to it and you both stand looking at each other. You’re not prepared for the speed with which she brings her mouth to your neck. She licks you there, her long Cat tongue wetting your fur. It feels nice, though it doesn’t turn you on until her tongue finds the back portion of your ear. A sudden intense heat builds in your crotch, and you start to feel weak in the knees. Renneta brings her hands to your behind, squeezing each cheek firmly. A whimper escapes you lips. Every fibre of your body is responding to her touch. She’s so beautiful, and sexy, and she’s taking control. Never in your wildest dreams did you think something like this could happen to you.

You bring your hands to her firm hips as she continues to lick behind your ear. Your hands runs down her hips, then to her supple thighs. You bring your hand to her pussy, feeling her clit and the soft folds there. You massage there. It’s not like you know what you’re doing, but it seems like the right thing to do to get a response from her. Renneta presses her body against you. She’s slightly taller than you are, and you can feel her breasts pressing against yours, and the rattle of the numerous crystals hanging from your neck.

It’s hard to keep track of the men watching. The music is still playing, and you can hear muffled talking and the odd grunt and puff from a cigar. Renneta takes you by surprise as she grabs your head and then brings her mouth to yours. Her tongue enters your mouth forcefully. Your eyes widen, and you let out a whimper as she lets her tongue slip around inside your mouth. Your manly pride kicks in. You’re not just going to let her take control of this. You might be a girl now, but you’re truly a man on the inside. You work your tongue against hers, giving as good as you get. Her tongue and mouth feels hot and wet, your saliva mixes with hers. You’re both moaning now, and her fingers feel so good as she plays with your hair.

Renneta pulls back and pulls on your arm. She lowers you to the floor and puts you on your back. You don’t want this. You want to be on top. You motion to get up but she has already straddles your waist, her hot wet pussy pressing down on your stomach. Her hands find yours and she leans forward, pinning your hands to the matt. For a moment you’re not sure what she is intending to do beyond keeping you down, but then she starts to grind her pussy against your stomach, getting herself off by using you as something to rub her clit against.

It isn’t long before Renneta is atop you moaning as her plump behind bounces and rubs at different intervals. You try and get up, and this only makes her hold you down harder. You try even harder to get up, lifting your hands up from the mat, and again Reneta pins you to the ground. She’s not stronger than she looks however. You’re weaker than you thought in this body. Without any indication that she was going to do this next, Renneta legs go of you and turns herself around. The next thing you know she has her pussy and asshole against your face. She rubs her clit against your mouth and for a second you spit and sputter not knowing what to do. Your tongue knows what to do however. On instinct you let your body tongue her wet pussy, tasting the tangy juices. The full weight of her behind presses on your head, and you struggle to breath between the intervals she relents, onto to press down on you again. This continues for almost a minute as she pins your head down with her behind, making sure you know who is in control of this fuck session.

You can feel per pussy become even more weight, and your face hairs are moist and dampened from her juices. You bring your hands up and squeeze her behind, feeling the supple flesh that you wish you had a cock to fuck. It’s unbearable that you can’t put your cock inside her. Of all the moments so far that you wish you were a man again, this is it.

You feel something wet and warm slide against your clit. It’s Renneta’s tongue, followed quickly by her lips. She feasts on your pussy, using her behind to keep your head pinned so you don’t move too much whilst she does. You move your head aside, seeing the pawed feet of the Cat men watching the show. You let out a girlish whimper as Renneta’s mouth lathers up your pussy and clit that’s as wet as hers.

“Oh~” you moan. You make a series of whimpering and moaning sounds as your body tenses and softens from the pleasure building in your pussy, and spreading across the rest of your body.

To be continued...</tw-passagedata></tw-storydata></div>
	<script id="script-sugarcube" type="text/javascript">
	/*! SugarCube JS

	SugarCube includes code from TiddlyWiki 1.2.39, which has the following license:
	--------------------------------------------------------------------------------
	TiddlyWiki 1.2.39 by Jeremy Ruston, (jeremy [at] osmosoft [dot] com)

	Published under a BSD open source license

	Copyright (c) Osmosoft Limited 2005

	Redistribution and use in source and binary forms, with or without modification,
	are permitted provided that the following conditions are met:

	Redistributions of source code must retain the above copyright notice, this list
	of conditions and the following disclaimer.

	Redistributions in binary form must reproduce the above copyright notice, this
	list of conditions and the following disclaimer in the documentation and/or
	other materials provided with the distribution.

	Neither the name of the Osmosoft Limited nor the names of its contributors may
	be used to endorse or promote products derived from this software without
	specific prior written permission.

	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
	ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
	WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
	DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
	ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
	(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
	LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
	ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
	(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
	SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	--------------------------------------------------------------------------------
	*/
	if(document.documentElement.classList.contains('init-loading')){!function(window,document,jQuery,undefined){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function safeActiveElement(){try{return document.activeElement||null}catch(e){return null}}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_slicedToArray=function(){function e(e,t){var r=[],n=!0,a=!1,i=undefined;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},Alert=function(){function e(e,t,r,n){var a="fatal"===e,i="Apologies! "+(a?"A fatal":"An")+" error has occurred.";i+=a?" Aborting.":" You may be able to continue, but some parts may not work properly.",null==t&&null==r||(i+="\n\nError",null!=t&&(i+=" ["+t+"]"),i+=null!=r?": "+r.replace(/^(?:(?:uncaught\s+(?:exception:\s+)?)?error:\s+)+/i,"")+".":": unknown error."),n&&n.stack&&(i+="\n\nStack Trace:\n"+n.stack),window.alert(i)}function t(t,r,n){e(null,t,r,n)}function r(t,r,n){e("fatal",t,r,n)}return function(e){window.onerror=function(n,a,i,o,s){"complete"===document.readyState?t(null,n,s):(r(null,n,s),window.onerror=e,"function"==typeof window.onerror&&window.onerror.apply(this,arguments))}}(window.onerror),Object.freeze(Object.defineProperties({},{error:{value:t},fatal:{value:r}}))}();!function(){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");if(0===arguments.length)return!1;var e=this.length>>>0;if(0===e)return!1;var t=arguments[0],r=Number(arguments[1])||0;for(0>r&&(r=Math.max(0,e+r));e>r;++r){var n=this[r];if(t===n||t!==t&&n!==n)return!0}return!1}}),String.prototype.trimLeft||Object.defineProperty(String.prototype,"trimLeft",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimLeft called on null or undefined");return this.replace(/^[\s\uFEFF\u00A0]+/,"")}}),String.prototype.trimStart||Object.defineProperty(String.prototype,"trimStart",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimStart called on null or undefined");return this.trimLeft()}}),String.prototype.trimRight||Object.defineProperty(String.prototype,"trimRight",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimRight called on null or undefined");return this.replace(/[\s\uFEFF\u00A0]+$/,"")}}),String.prototype.trimEnd||Object.defineProperty(String.prototype,"trimEnd",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimEnd called on null or undefined");return this.trimRight()}})}(),function(){function _random(){if(0===arguments.length)throw new Error("_random called with insufficient parameters");var e=void 0,t=void 0;if(1===arguments.length?(e=0,t=arguments[0]):(e=arguments[0],t=arguments[1]),e>t){var r=[t,e];e=r[0],t=r[1]}return Math.floor(_nativeMathRandom()*(t-e+1))+e}var _nativeMathRandom=Math.random;Object.defineProperty(Array,"random",{configurable:!0,writable:!0,value:function(e,t,r){var n=t,a=r;return 2===arguments.length&&(a=n,n=0),Array.isArray(e)?e.random(n,a):e.hasOwnProperty("length")?[].concat(_toConsumableArray(e)).random(n,a):void 0}}),Object.defineProperty(Array.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.contains called on null or undefined");return-1!==Array.prototype.indexOf.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAll called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.containsAll.apply(this,arguments[0]):-1!==Array.prototype.indexOf.apply(this,arguments);for(var e=0,t=arguments.length;t>e;++e)if(!Array.prototype.some.call(this,function(e){return e===this.val},{val:arguments[e]}))return!1;return!0}}),Object.defineProperty(Array.prototype,"containsAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAny called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.containsAny.apply(this,arguments[0]):-1!==Array.prototype.indexOf.apply(this,arguments);for(var e=0,t=arguments.length;t>e;++e)if(Array.prototype.some.call(this,function(e){return e===this.val},{val:arguments[e]}))return!0;return!1}}),Object.defineProperty(Array.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.count called on null or undefined");for(var e=Array.prototype.indexOf,t=arguments[0],r=Number(arguments[1])||0,n=0;-1!==(r=e.call(this,t,r));)++n,++r;return n}}),Object.defineProperty(Array.prototype,"delete",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.delete called on null or undefined");if(0===arguments.length)return[];var e=this.length>>>0;if(0===e)return[];for(var t=Array.prototype.indexOf,r=Array.prototype.push,n=Array.prototype.splice,a=Array.prototype.concat.apply([],arguments),i=[],o=0,s=a.length;s>o;++o)for(var l=a[o],u=0;-1!==(u=t.call(this,l,u));)r.apply(i,n.call(this,u,1));return i}}),Object.defineProperty(Array.prototype,"deleteAt",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteAt called on null or undefined");if(0===arguments.length)return[];var e=this.length>>>0;if(0===e)return[];for(var t=Array.prototype.splice,r=[].concat(_toConsumableArray(new Set(Array.prototype.concat.apply([],arguments).map(function(t){return 0>t?Math.max(0,e+t):t})).values())),n=[].concat(_toConsumableArray(r)).sort(function(e,t){return t-e}),a=[],i=0,o=r.length;o>i;++i)a[i]=this[r[i]];for(var s=0,l=n.length;l>s;++s)t.call(this,n[s],1);return a}}),Object.defineProperty(Array.prototype,"flatten",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatten called on null or undefined");return Array.prototype.reduce.call(this,function(e,t){return e.concat(Array.isArray(t)?t.flatten():t)},[])}}),Object.defineProperty(Array.prototype,"pluck",{configurable:!0,writable:!0,value:function(e,t){if(null==this)throw new TypeError("Array.prototype.pluck called on null or undefined");var r=this.length>>>0;if(0!==r){var n=e,a=t;return 1===arguments.length&&(a=n,n=0),null==n?n=0:0>n?(n=r+n,0>n&&(n=0)):n>=r&&(n=r-1),null==a?a=r-1:0>a?(a=r+a,0>a&&(a=r-1)):a>=r&&(a=r-1),Array.prototype.splice.call(this,_random(n,a),1)[0]}}}),Object.defineProperty(Array.prototype,"random",{configurable:!0,writable:!0,value:function(e,t){if(null==this)throw new TypeError("Array.prototype.random called on null or undefined");var r=this.length>>>0;if(0!==r){var n=e,a=t;return 1===arguments.length&&(a=n,n=0),null==n?n=0:0>n?(n=r+n,0>n&&(n=0)):n>=r&&(n=r-1),null==a?a=r-1:0>a?(a=r+a,0>a&&(a=r-1)):a>=r&&(a=r-1),this[_random(n,a)]}}}),Object.defineProperty(Array.prototype,"shuffle",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.shuffle called on null or undefined");var e=this.length>>>0;if(0!==e){for(var t=e-1;t>0;--t){var r=Math.floor(_nativeMathRandom()*(t+1)),n=this[t];this[t]=this[r],this[r]=n}return this}}}),Object.defineProperty(Function.prototype,"partial",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Function.prototype.partial called on null or undefined");var e=Array.prototype.slice,t=this,r=e.call(arguments,0);return function(){for(var n=[],a=0,i=0;i<r.length;++i)n.push(r[i]===undefined?arguments[a++]:r[i]);return t.apply(this,n.concat(e.call(arguments,a)))}}}),Object.defineProperty(Math,"clamp",{configurable:!0,writable:!0,value:function(e,t,r){var n=Number(e);return isNaN(n)?NaN:n.clamp(t,r)}}),Object.defineProperty(Math,"easeInOut",{configurable:!0,writable:!0,value:function(e){return 1-(Math.cos(Number(e)*Math.PI)+1)/2}}),Object.defineProperty(Number.prototype,"clamp",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Number.prototype.clamp called on null or undefined");if(2!==arguments.length)throw new Error("Number.prototype.clamp called with an incorrect number of parameters");var e=Number(arguments[0]),t=Number(arguments[1]);if(e>t){var r=[t,e];e=r[0],t=r[1]}return Math.min(Math.max(this,e),t)}}),RegExp.escape||!function(){var e=/[\\^$*+?.()|[\]{}]/g,t=new RegExp(e.source);Object.defineProperty(RegExp,"escape",{configurable:!0,writable:!0,value:function(r){var n=String(r);return n&&t.test(n)?n.replace(e,"\\$&"):n}})}(),Object.defineProperty(String,"format",{configurable:!0,writable:!0,value:function(e){function t(e,t,r){if(!t)return e;var n=Math.abs(t)-e.length;if(1>n)return e;var a=Array(n+1).join(r);return 0>t?e+a:a+e}if(arguments.length<2)return 0===arguments.length?"":e;var r=2===arguments.length&&Array.isArray(arguments[1])?arguments[1].slice(0):Array.prototype.slice.call(arguments,1);return 0===r.length?e:e.replace(/{(\d+)(?:,([+-]?\d+))?}/g,function(e,n,a){var i=r[n];if(null==i)return"";for(;"function"==typeof i;)i=i();switch("undefined"==typeof i?"undefined":_typeof(i)){case"string":break;case"object":i=JSON.stringify(i);break;default:i=String(i)}return t(i,a?parseInt(a,10):0," ")})}}),Object.defineProperty(String.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.contains called on null or undefined");return-1!==String.prototype.indexOf.apply(this,arguments)}}),Object.defineProperty(String.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.count called on null or undefined");var e=String(arguments[0]||"");if(""===e)return 0;for(var t=String.prototype.indexOf,r=e.length,n=Number(arguments[1])||0,a=0;-1!==(n=t.call(this,e,n));)++a,n+=r;return a}}),Object.defineProperty(String.prototype,"splice",{configurable:!0,writable:!0,value:function(e,t,r){if(null==this)throw new TypeError("String.prototype.splice called on null or undefined");var n=this.length>>>0;if(0===n)return"";var a=+e||0;isFinite(a)?0>a&&(a+=n,0>a&&(a=0)):a=0,a>n&&(a=n);var i=+t||0;(!isFinite(i)||0>i)&&(i=0);var o=this.slice(0,a);return"undefined"!=typeof r&&(o+=r),n>a+i&&(o+=this.slice(a+i)),o}}),Object.defineProperty(String.prototype,"splitOrEmpty",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.splitOrEmpty called on null or undefined");return""===String(this)?[]:String.prototype.split.apply(this,arguments)}}),Object.defineProperty(String.prototype,"readBracketedList",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.readBracketedList called on null or undefined");for(var e=new RegExp("(?:\\[\\[((?:\\s|\\S)*?)\\]\\])|([^\"'\\s]\\S*)","gm"),t=[],r=void 0;null!==(r=e.exec(this));)r[1]?t.push(r[1]):r[2]&&t.push(r[2]);return t}}),Object.defineProperty(Date.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:date)",this.toISOString()]}}),Object.defineProperty(Function.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)","("+this.toString()+")"]}}),Object.defineProperty(Map.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:map)",[].concat(_toConsumableArray(this))]}}),Object.defineProperty(RegExp.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)",this.toString()]}}),Object.defineProperty(Set.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:set)",[].concat(_toConsumableArray(this))]}}),Object.defineProperty(JSON,"reviveWrapper",{configurable:!0,writable:!0,value:function(e){if("string"!=typeof e)throw new TypeError("JSON.reviveWrapper code parameter must be a string");return["(revive:eval)",e]}}),Object.defineProperty(JSON,"_real_parse",{value:JSON.parse}),Object.defineProperty(JSON,"parse",{configurable:!0,writable:!0,value:function value(text,reviver){return JSON._real_parse(text,function(key,val){var value=val;if(Array.isArray(value)&&2===value.length)switch(value[0]){case"(revive:set)":value=new Set(value[1]);break;case"(revive:map)":value=new Map(value[1]);break;case"(revive:date)":value=new Date(value[1]);break;case"(revive:eval)":try{value=eval(value[1])}catch(e){}}else if("string"==typeof value&&"@@revive@@"===value.slice(0,10))try{value=eval(value.slice(10))}catch(e){}if("function"==typeof reviver)try{value=reviver(key,value)}catch(e){}return value})}})}(),function(){function e(e){13!==e.which&&32!==e.which||(e.preventDefault(),jQuery(safeActiveElement()||this).trigger("click"))}function t(e){return function(){var t=jQuery(this);t.is("[aria-pressed]")&&t.attr("aria-pressed","true"===t.attr("aria-pressed")?"false":"true"),e.apply(this,arguments)}}function r(e){return t(function(){jQuery(this).off(".aria-clickable").removeAttr("tabindex aria-controls aria-pressed").not("a,button").removeAttr("role").end().filter("button").prop("disabled",!0),e.apply(this,arguments)})}jQuery.fn.extend({ariaClick:function(n,a){if(0===this.length||0===arguments.length)return this;var i=n,o=a;return null==o&&(o=i,i=undefined),i=jQuery.extend({namespace:undefined,one:!1,selector:undefined,data:undefined,controls:undefined,pressed:undefined,label:undefined},i),"string"!=typeof i.namespace?i.namespace="":"."!==i.namespace[0]&&(i.namespace="."+i.namespace),"boolean"==typeof i.pressed&&(i.pressed=i.pressed?"true":"false"),this.filter("button").prop("type","button"),this.not("a,button").attr("role","button"),this.attr("tabindex",0),null!=i.controls&&this.attr("aria-controls",i.controls),null!=i.pressed&&this.attr("aria-pressed",i.pressed),null!=i.label&&this.attr({"aria-label":i.label,title:i.label}),this.not("button").on("keypress.aria-clickable"+i.namespace,i.selector,e),this.on("click.aria-clickable"+i.namespace,i.selector,i.data,i.one?r(o):t(o)),this}})}(),function(){jQuery.fn.extend({wiki:function(e){if(0===this.length||0===arguments.length)return this;var t=document.createDocumentFragment();return new Wikifier(t,e),this.append(t),this}})}();var Browser=function(){var e={userAgent:navigator.userAgent.toLowerCase()};return e.isGecko=navigator&&"Gecko"===navigator.product&&!/webkit|trident/.test(e.userAgent),e.isIE=/msie|trident/.test(e.userAgent)&&!e.userAgent.includes("opera"),e.ieVersion=function(){var t=/(?:msie\s+|rv:)(\d{1,2}\.\d)/.exec(e.userAgent);return t?+t[1]:0}(),e.isOpera=e.userAgent.includes("opera")||e.userAgent.includes(" opr/"),e.operaVersion=function(){var t=new RegExp((/applewebkit|chrome/.test(e.userAgent)?"opr":"version")+"\\/(\\d{1,2}\\.\\d+)"),r=t.exec(e.userAgent);return r?+r[1]:0}(),e.isMobile=Object.freeze({Android:/android/.test(e.userAgent),BlackBerry:/blackberry/.test(e.userAgent),iOS:/ip(?:hone|ad|od)/.test(e.userAgent),Windows:/iemobile/.test(e.userAgent),any:function(){var t=e.isMobile;return t.Android||t.BlackBerry||t.iOS||t.Windows}}),Object.freeze(e)}(),Has=function(){function e(e){try{if(null!=e&&e.length>=0){var t="SugarCube.WebStorage.test",r="1701 Guilty Scott";if(e.setItem(t,r),e.getItem(t)===r)return e.removeItem(t),!0}}catch(e){}return!1}return Object.freeze({audio:"function"==typeof document.createElement("audio").canPlayType,fileAPI:"File"in window&&"FileList"in window&&"FileReader"in window&&!Browser.isMobile.any()&&(!Browser.isOpera||Browser.operaVersion>=15),geolocation:"geolocation"in navigator&&"function"==typeof navigator.geolocation.getCurrentPosition&&"function"==typeof navigator.geolocation.watchPosition,localStorage:"localStorage"in window&&e(window.localStorage),sessionStorage:"sessionStorage"in window&&e(window.sessionStorage)})}(),_ref3=function(){function e(e){var t=document.getElementById("style-story");null===t&&(t=document.createElement("style"),t.id="style-story",t.type="text/css",document.head.appendChild(t)),t=new StyleWrapper(t);var r=e;s.test(r)&&(r=r.replace(o,function(e){var t=Wikifier.helpers.parseSquareBracketedMarkup({source:e,matchStart:0});if(t.hasOwnProperty("error")||t.pos<e.length)return e;var r=t.source;if("data:"!==r.slice(0,5)&&Story.has(r)){var n=Story.get(r);n.tags.includes("Twine.image")&&(r=n.text)}return'url("'+r.replace(/"/g,"%22")+'")'})),t.add(r)}function t(e){if("object"!==("undefined"==typeof e?"undefined":_typeof(e))||null==e)return e;if("function"==typeof e.clone)return e.clone(!0);if(e.nodeType&&"function"==typeof e.cloneNode)return e.cloneNode(!0);var r=void 0;return Array.isArray(e)?r=[]:e instanceof Date?r=new Date(e.getTime()):e instanceof Map?(r=new Map,e.forEach(function(e,n){r.set(n,t(e))})):e instanceof RegExp?r=new RegExp(e):e instanceof Set?(r=new Set,e.forEach(function(e){r.add(t(e))})):r=Object.create(Object.getPrototypeOf(e)),Object.keys(e).forEach(function(n){return r[n]=t(e[n])}),r}function r(e){for(var t=document.createDocumentFragment(),r=document.createElement("p"),n=void 0;null!==(n=e.firstChild);){if(n.nodeType===Node.ELEMENT_NODE){var a=n.nodeName.toUpperCase();switch(a){case"BR":if(null!==n.nextSibling&&n.nextSibling.nodeType===Node.ELEMENT_NODE&&"BR"===n.nextSibling.nodeName.toUpperCase()){e.removeChild(n.nextSibling),e.removeChild(n),t.appendChild(r),r=document.createElement("p");continue}if(!r.hasChildNodes()){e.removeChild(n);continue}break;case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":r.hasChildNodes()&&(t.appendChild(r),r=document.createElement("p")),t.appendChild(n);continue}}r.appendChild(n)}r.hasChildNodes()&&t.appendChild(r),e.appendChild(t)}function n(e,t){switch("undefined"==typeof e?"undefined":_typeof(e)){case"number":if(isNaN(e))return t;break;case"object":if(null===e)return t;if(Array.isArray(e)||e instanceof Set)return[].concat(_toConsumableArray(e)).map(function(e){return n(e,t)}).join(", ");if(e instanceof Map){var r=function(){var r=n;return{v:"( "+[].concat(_toConsumableArray(e)).map(function(e){return r(e[0],t)+" ⇒ "+r(e[1],t)}).join("; ")+" )"}}();if("object"===("undefined"==typeof r?"undefined":_typeof(r)))return r.v}else{if(e instanceof Date)return e.toLocaleString();if("function"==typeof e.toString)return e.toString()}return Object.prototype.toString.call(e);case"function":case"undefined":return t}return String(e)}function a(e,t,r){var n="object"===("undefined"==typeof e?"undefined":_typeof(e))?e:document.getElementById(e);if(null==n)return null;var a=Array.isArray(t)?t:[t];jQuery(n).empty();for(var i=0,o=a.length;o>i;++i)if(Story.has(a[i]))return new Wikifier(n,Story.get(a[i]).processText().trim()),n;if(null!=r){var s=String(r).trim();""!==s&&new Wikifier(n,s)}return n}function i(e,t,r){return jQuery(document.createElement("span")).addClass("error").attr("title",r).text(strings.errors.title+": "+(t||"unknown error")).appendTo(e),!1}var o=/\[[<>]?[Ii][Mm][Gg]\[(?:\s|\S)*?\]\]+/g,s=new RegExp(o.source);return Object.freeze(Object.defineProperties({},{addStyle:{value:e},clone:{value:t},convertBreaks:{value:r},toStringOrDefault:{value:n},setPageElement:{value:a},throwError:{value:i}}))}(),addStyle=_ref3.addStyle,clone=_ref3.clone,convertBreaks=_ref3.convertBreaks,toStringOrDefault=_ref3.toStringOrDefault,setPageElement=_ref3.setPageElement,throwError=_ref3.throwError,Util=function(){function e(e){var t=void 0;switch("undefined"==typeof e?"undefined":_typeof(e)){case"number":t=e;break;case"string":t=Number(e);break;default:return!1}return!isNaN(t)&&isFinite(t)}function t(e){return"boolean"==typeof e||"string"==typeof e&&("true"===e||"false"===e)}function r(e){return String(e).trim().replace(/[^\w\s\u2013\u2014-]+/g,"").replace(/[_\s\u2013\u2014-]+/g,"-").toLocaleLowerCase()}function n(e){if(null==e)return"";var t=String(e);return t&&h.test(t)?t.replace(d,function(e){return p[e]}):t}function a(e){if(null==e)return"";var t=String(e);return t&&g.test(t)?t.replace(f,function(e){return m[e]}):t}function i(e){var t=/^([+-]?(?:\d*\.)?\d+)([Mm]?[Ss])$/,r=t.exec(String(e));if(null===r)throw new SyntaxError('invalid time value syntax: "'+e+'"');var n=Number(r[1]);if(/^[Ss]$/.test(r[2])&&(n*=1e3),isNaN(n)||!isFinite(n))throw new RangeError('invalid time value: "'+e+'"');return n}function o(e){if("number"!=typeof e||isNaN(e)||!isFinite(e)){var t=void 0;switch("undefined"==typeof e?"undefined":_typeof(e)){case"string":t='"'+e+'"';break;case"number":t=String(e);break;default:t=Object.prototype.toString.call(e)}throw new Error("invalid milliseconds: "+t)}return e+"ms"}function s(e){if(!e.includes("-"))switch(e){case"bgcolor":return"backgroundColor";case"float":return"cssFloat";default:return e}return e.split("-").map(function(e,t){return 0===t?e:e.slice(0,1).toUpperCase()+e.slice(1)}).join("")}function l(e){var t=document.createElement("a"),r=Object.create(null);t.href=e,t.search.replace(/^\?/,"").split(/(?:&(?:amp;)?|;)/).forEach(function(e){var t=e.split("="),n=_slicedToArray(t,2),a=n[0],i=n[1];r[a]=i});var n=t.host&&"/"!==t.pathname[0]?"/"+t.pathname:t.pathname;return{href:t.href,protocol:t.protocol,host:t.host,hostname:t.hostname,port:t.port,path:""+n+t.search,pathname:n,query:t.search,search:t.search,queries:r,searches:r,hash:t.hash}}function u(e,t){for(var r=Object.prototype.toString,n=Array.isArray(e),a=[].concat(Object.keys(e),Object.keys(t)).sort().filter(function(e,t,r){return 0===t||r[t-1]!==e}),i={},o=void 0,s=0,l=a.length;l>s;++s){var u=a[s],c=e[u],d=t[u];if(e.hasOwnProperty(u))if(t.hasOwnProperty(u)){if(c===d)continue;if(("undefined"==typeof c?"undefined":_typeof(c))===("undefined"==typeof d?"undefined":_typeof(d)))if("function"==typeof c)c.toString()!==d.toString()&&(i[u]=[v.Copy,d]);else if("object"!==("undefined"==typeof c?"undefined":_typeof(c))||null===c)i[u]=[v.Copy,d];else{var h=r.call(c),p=r.call(d);if(h===p)if("[object Date]"===h)+c!==+d&&(i[u]=[v.CopyDate,+d]);else if("[object RegExp]"===h)c.toString()!==d.toString()&&(i[u]=[v.Copy,clone(d)]);else{var f=Util.diff(c,d);null!==f&&(i[u]=f)}else i[u]=[v.Copy,clone(d)]}else i[u]=[v.Copy,"object"!==("undefined"==typeof d?"undefined":_typeof(d))||null===d?d:clone(d)]}else if(n&&Util.isNumeric(u)){var g=+u;if(!o){o="";do o+="~";while(a.some(function(e){return e===this.val},{val:o}));i[o]=[v.SpliceArray,g,g]}g<i[o][1]&&(i[o][1]=g),g>i[o][2]&&(i[o][2]=g)}else i[u]=v.Delete;else i[u]=[v.Copy,"object"!==("undefined"==typeof d?"undefined":_typeof(d))||null===d?d:clone(d)]}return Object.keys(i).length>0?i:null}function c(e,t){for(var r=Object.keys(t||{}),n=clone(e),a=0,i=r.length;i>a;++a){var o=r[a],s=t[o];if(s===v.Delete)delete n[o];else if(Array.isArray(s))switch(s[0]){case v.SpliceArray:n.splice(s[1],1+(s[2]-s[1]));break;case v.Copy:n[o]=clone(s[1]);break;case v.CopyDate:n[o]=new Date(s[1])}else n[o]=Util.patch(n[o],s)}return n}var d=/[&<>"'`]/g,h=new RegExp(d.source),p=Object.freeze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"}),f=/&(?:amp|lt|gt|quot|apos|#39|#x27|#96|#x60);/g,g=new RegExp(f.source),m=Object.freeze({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&#39;":"'","&#x27;":"'","&#96;":"`","&#x60;":"`"}),v=Object.freeze({Delete:0,SpliceArray:1,Copy:2,CopyDate:3});return Object.freeze(Object.defineProperties({},{isNumeric:{value:e},isBoolean:{value:t},slugify:{value:r},escape:{value:n},unescape:{value:a},fromCssTime:{value:i},toCssTime:{value:o},fromCssProperty:{value:s},parseUrl:{value:l},DiffOp:{value:v},diff:{value:u},patch:{value:c},random:{value:Math.random},entityEncode:{value:n},entityDecode:{value:a},evalExpression:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),AudioWrapper=function(){var e=function(){function e(t){_classCallCheck(this,e),Object.defineProperties(this,{audio:{value:t},_faderId:{writable:!0,value:null}}),"metadata"!==this.audio.preload&&"auto"!==this.audio.preload&&(this.audio.preload="metadata")}return _createClass(e,[{key:"hasMetadata",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_METADATA}},{key:"hasData",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA}},{key:"noSource",value:function(){return!this.audio.hasChildNodes()||this.audio.networkState===HTMLMediaElement.NETWORK_NO_SOURCE}},{key:"isPlaying",value:function(){return!(this.audio.ended||this.audio.paused||!this.hasData())}},{key:"isEnded",value:function(){return this.audio.ended}},{key:"isPaused",value:function(){return this.audio.paused}},{key:"isMuted",value:function(){return this.audio.muted}},{key:"isLooped",value:function(){return this.audio.loop}},{key:"load",value:function(){"auto"!==this.audio.preload&&(this.audio.preload="auto"),this.audio.load()}},{key:"play",value:function(){this.hasData()||this.load(),this.audio.play()}},{key:"pause",value:function(){this.audio.pause()}},{key:"stop",value:function(){this.audio.pause(),this.time=0}},{key:"mute",value:function(){this.audio.muted=!0}},{key:"unmute",value:function(){this.audio.muted=!1}},{key:"loop",value:function(){this.audio.loop=!0}},{key:"unloop",value:function(){this.audio.loop=!1}},{key:"fadeWithDuration",value:function(e,t,r){var n=this;null!==this._faderId&&(clearInterval(this._faderId),this._faderId=null);var a=Math.clamp(t,0,1),i=Math.clamp(r,0,1);a!==i&&(this.volume=a,jQuery(this.audio).off("timeupdate.AudioWrapper:fadeWithDuration").one("timeupdate.AudioWrapper:fadeWithDuration",function(){var t=void 0,r=void 0;i>a?(t=a,r=i):(t=i,r=a);var o=Math.clamp(e,1,n.remaining),s=25,l=(i-a)/(o/(s/1e3));n._faderId=setInterval(function(){return n.isPlaying()?(n.volume=Math.clamp(n.volume+l,t,r),0===n.volume&&n.pause(),void(n.volume===i&&(clearInterval(n._faderId),n._faderId=null))):(clearInterval(n._faderId),void(n._faderId=null))},s)}),this.play())}},{key:"fade",value:function(e,t){this.fadeWithDuration(5,e,t)}},{key:"fadeIn",value:function(){this.fade(this.volume,1)}},{key:"fadeOut",value:function(){this.fade(this.volume,0)}},{key:"onPlay",value:function(e){return"function"==typeof e?jQuery(this.audio).on("playing.AudioWrapper:onPlay",e):jQuery(this.audio).off("playing.AudioWrapper:onPlay")}},{key:"onePlay",value:function(e){return"function"==typeof e?jQuery(this.audio).one("playing.AudioWrapper:onePlay",e):jQuery(this.audio).off("playing.AudioWrapper:onePlay")}},{key:"onPause",value:function(e){return"function"==typeof e?jQuery(this.audio).on("pause.AudioWrapper:onPause",e):jQuery(this.audio).off("pause.AudioWrapper:onPause")}},{key:"onePause",value:function(e){return"function"==typeof e?jQuery(this.audio).one("pause.AudioWrapper:onePause",e):jQuery(this.audio).off("pause.AudioWrapper:onePause")}},{key:"onEnd",value:function(e){return"function"==typeof e?jQuery(this.audio).on("ended.AudioWrapper:onEnd",e):jQuery(this.audio).off("ended.AudioWrapper:onEnd")}},{key:"oneEnd",value:function(e){return"function"==typeof e?jQuery(this.audio).one("ended.AudioWrapper:oneEnd",e):jQuery(this.audio).off("ended.AudioWrapper:oneEnd")}},{key:"clone",value:function(){return new this.constructor(this.audio.cloneNode(!0))}},{key:"duration",get:function(){return this.audio.duration}},{key:"remaining",get:function(){return this.audio.duration-this.audio.currentTime}},{key:"time",get:function(){return this.audio.currentTime},set:function(e){var t=this;this.hasMetadata()?this.audio.currentTime=e:jQuery(this.audio).off("loadedmetadata.AudioWrapper:time").one("loadedmetadata.AudioWrapper:time",function(){return t.audio.currentTime=e})}},{key:"volume",get:function(){return this.audio.volume},set:function(e){this.audio.volume=Math.clamp(e,0,1)}},{key:"controls",get:function(){return this.audio.controls},set:function(e){this.audio.controls=!!e}}]),e}();return e}(),DebugView=function(){var e=function(){function e(t,r,n,a){_classCallCheck(this,e),Object.defineProperties(this,{parent:{value:t},view:{value:document.createElement("span")},break:{value:document.createElement("wbr")}}),jQuery(this.view).attr({title:a,"aria-label":a,"data-type":null!=r?r:"","data-name":null!=n?n:""}).addClass("debug"),this.parent.appendChild(this.view),this.parent.appendChild(this.break)}return _createClass(e,[{key:"append",value:function(e){return jQuery(this.view).append(e),this}},{key:"modes",value:function(e){var t=this;if(null!=e){if("object"===("undefined"==typeof e?"undefined":_typeof(e)))return Object.keys(e).forEach(function(t){this[e[t]?"addClass":"removeClass"](t)},jQuery(this.view)),this;throw new Error("DebugView.prototype.modes options parameter must be an object or null/undefined")}var r=function(){var e={};return t.view.className.splitOrEmpty(/\s+/).forEach(function(t){"debug"!==t&&(e[t]=!0)}),{v:e}}();return"object"===("undefined"==typeof r?"undefined":_typeof(r))?r.v:void 0}},{key:"remove",value:function(){var e=jQuery(this.view);this.view.hasChildNodes()&&e.contents().appendTo(this.parent),e.remove(),jQuery(this.break).remove()}},{key:"output",get:function(){return this.view}},{key:"type",get:function(){return this.view.getAttribute("data-type")},set:function(e){this.view.setAttribute("data-type",null!=e?e:"")}},{key:"name",get:function(){return this.view.getAttribute("data-name")},set:function(e){this.view.setAttribute("data-name",null!=e?e:"")}},{key:"title",get:function(){return this.view.title},set:function(e){this.view.title=e}}],[{key:"init",value:function(){jQuery('<button id="debug-view-toggle">'+strings.debugView.title+"</button>").ariaClick({label:strings.debugView.toggle},function(){return e.toggle()}).prependTo("#ui-bar-body"),e.enable()}},{key:"enable",value:function(){jQuery(document.documentElement).addClass("debug-view"),jQuery.event.trigger("tw:debugviewupdate")}},{key:"disable",value:function(){jQuery(document.documentElement).removeClass("debug-view"),jQuery.event.trigger("tw:debugviewupdate")}},{key:"toggle",value:function(){jQuery(document.documentElement).toggleClass("debug-view"),jQuery.event.trigger("tw:debugviewupdate")}}]),e}();return e}(),KeyValueStore=function(){var e=function(){function e(t,r){_classCallCheck(this,e);var n=r+".",a=null,i=null;t?Has.localStorage&&(a=window.localStorage,i="localStorage"):Has.sessionStorage&&(a=window.sessionStorage,i="sessionStorage"),Object.defineProperties(this,{_ok:{value:null!==a},_engine:{value:a},_prefix:{value:n},_prefixRe:{value:new RegExp("^"+RegExp.escape(n))},name:{value:i},id:{value:r},persist:{value:!!t}})}return _createClass(e,[{key:"keys",value:function e(){if(null===this._engine)return[];for(var e=[],t=0;t<this._engine.length;++t){var r=this._engine.key(t);this._prefixRe.test(r)&&e.push(r.replace(this._prefixRe,""))}return e}},{key:"has",value:function(e){return null!==this._engine&&e?null!=this._engine.getItem(this._prefix+e):!1}},{key:"get",value:function(e){return null!==this._engine&&e?this._engine.getItem(this._prefix+e):null}},{key:"set",value:function(e,t,r){if(null===this._engine||!e)return!1;
try{this._engine.setItem(this._prefix+e,t)}catch(t){if(!r){var n=/quota_?(?:exceeded|reached)/i.test(t.name)?this.name+" quota exceeded":"unknown error";Alert.error(null,'unable to set key "'+e+'"; '+n,t)}return!1}return!0}},{key:"delete",value:function(e){return null!==this._engine&&e?(this._engine.removeItem(this._prefix+e),!0):!1}},{key:"serialize",value:function(e){return LZString.compressToUTF16(JSON.stringify(e))}},{key:"deserialize",value:function(e){return JSON.parse(LZString.decompressFromUTF16(e))}},{key:"length",get:function(){return this.keys().length}}]),e}(),t=function(){function e(t,r){_classCallCheck(this,e);var n=r+".";Object.defineProperties(this,{_ok:{value:"cookie"in document},_prefix:{value:n},_prefixRe:{value:new RegExp("^"+RegExp.escape(n))},name:{value:"cookie"},id:{value:r},persist:{value:!!t}})}return _createClass(e,[{key:"keys",value:function(){return Object.keys(this._getCookies())}},{key:"has",value:function(e){return e?this._getCookies().hasOwnProperty(this._prefix+e):!1}},{key:"get",value:function(e){if(!e)return null;var t=this._getCookies(),r=this._prefix+e;return t.hasOwnProperty(r)?t[r]:null}},{key:"set",value:function(e,t,r){if(!e)return!1;try{this._setCookie(e,t,this.persist?"Tue, 19 Jan 2038 03:14:07 GMT":undefined)}catch(t){return r||Alert.error(null,'unable to set key "'+e+'"; cookie error: '+t.message,t),!1}return this.has(e)?!0:(r||Alert.error(null,'unable to set key "'+e+'"; unknown cookie error'),!1)}},{key:"delete",value:function(e,t){if(!e)return!1;try{this._setCookie(e,undefined,"Thu, 01 Jan 1970 00:00:00 GMT")}catch(r){return t||Alert.error(null,'unable to delete key "'+e+'"; cookie error: '+r.message,r),!1}var r=this.get(e);return null!==r&&""!==r?(t||Alert.error(null,'unable to delete key "'+e+'"; unknown cookie error'),!1):!0}},{key:"serialize",value:function(e){return LZString.compressToBase64(JSON.stringify(e))}},{key:"deserialize",value:function(e){return JSON.parse(LZString.decompressFromBase64(e))}},{key:"_getCookies",value:function(){var e={};if("cookie"in document&&""!==document.cookie)for(var t=document.cookie.split(/;\s*/),r=0;r<t.length;++r){var n=t[r].split("="),a=decodeURIComponent(n[0]);this._prefixRe.test(a)&&(e[a]=decodeURIComponent(n[1]))}return e}},{key:"_setCookie",value:function(e,t,r){if("cookie"in document){var n=encodeURIComponent(this._prefix+e)+"=";null!=t&&(n+=encodeURIComponent(t)),null!=r&&(n+="; "+r),n+="; path=/",document.cookie=n}}},{key:"length",get:function(){return this.keys().length}}]),e}(),r=function(){function r(n,a,i){_classCallCheck(this,r);var o=null;switch(n){case"cookie":o=new t(a,i);break;case"webStorage":o=new e(a,i),o._ok||(o=new t(a,i));break;default:throw new Error("unknown driver type")}if(!o._ok)throw new Error("unknown driver error");Object.defineProperties(this,{_driver:{value:o},name:{value:o.name},type:{value:n},id:{value:i},persist:{value:a}})}return _createClass(r,[{key:"keys",value:function(){return null===this._driver?[]:this._driver.keys()}},{key:"clear",value:function(){if(null===this._driver)return!1;for(var e=this.keys(),t=0;t<e.length;++t)this.delete(e[t]);return!0}},{key:"has",value:function(e){return null!==this._driver&&e?this._driver.has(e):!1}},{key:"get",value:function(e){if(null===this._driver||!e)return null;var t=this._driver.get(e);return null==t?null:this._driver.deserialize(t)}},{key:"set",value:function(e,t,r){return null!==this._driver&&e?this._driver.set(e,this._driver.serialize(t),r):!1}},{key:"delete",value:function(e,t){return null!==this._driver&&e?this._driver.delete(e,t):!1}},{key:"deleteMatching",value:function(e,t){if(null===this._driver||!e)return!1;for(var r=this.keys(),n=new RegExp("^"+RegExp.escape(e)),a=0;a<r.length;++a)n.test(r[a])&&this.delete(r[a],t);return!0}},{key:"length",get:function(){return null===this._driver?0:this._driver.length}}]),r}();return r}(),PRNGWrapper=function(){var e=function(){function e(t,r){_classCallCheck(this,e),Object.defineProperties(this,new Math.seedrandom(t,r,function(e,t){return{_prng:{value:e},seed:{writable:!0,value:t},pull:{writable:!0,value:0},random:{value:function(){return++this.pull,this._prng()}}}}))}return _createClass(e,null,[{key:"marshal",value:function(e){if(!e||!e.hasOwnProperty("seed")||!e.hasOwnProperty("pull"))throw new Error("PRNG is missing required data");return{seed:e.seed,pull:e.pull}}},{key:"unmarshal",value:function(t){if(!t||!t.hasOwnProperty("seed")||!t.hasOwnProperty("pull"))throw new Error("PRNG object is missing required data");for(var r=new e(t.seed,!1),n=t.pull;n>0;--n)r.random();return r}}]),e}();return e}(),StyleWrapper=function(){var e=function(){function e(t){if(_classCallCheck(this,e),null==t)throw new TypeError("StyleWrapper style parameter must be an HTMLStyleElement object");Object.defineProperties(this,{style:{value:t}})}return _createClass(e,[{key:"isEmpty",value:function(){return 0===this.style.cssRules.length}},{key:"set",value:function(e){this.clear(),this.add(e)}},{key:"add",value:function(e){this.style.styleSheet?this.style.styleSheet.cssText+=e:this.style.appendChild(document.createTextNode(e))}},{key:"clear",value:function(){this.style.styleSheet?this.style.styleSheet.cssText="":jQuery(this.style).empty()}}]),e}();return e}(),Config=function(){function e(){throw new Error("Config.history.mode has been deprecated and is no longer used by SugarCube, please remove it from your code")}function t(){throw new Error("Config.history.tracking has been deprecated, use Config.history.maxStates instead")}var r=Object.seal({debug:!1,addVisitedLinkClass:!1,cleanupWikifierOutput:!1,loadDelay:0,history:Object.seal({controls:!0,maxStates:100,get mode(){e()},set mode(t){e()},get tracking(){t()},set tracking(e){t()}}),macros:Object.seal({ifAssignmentError:!0,maxLoopIterations:1e3}),passages:Object.seal({descriptions:undefined,displayTitles:!1,start:undefined,transitionOut:undefined}),saves:Object.seal({autoload:undefined,autosave:undefined,id:"untitled-story",isAllowed:undefined,onLoad:undefined,onSave:undefined,slots:8,version:undefined}),ui:Object.seal({stowBarInitially:!1,updateStoryElements:!0}),transitionEndEventName:function(){for(var e=new Map([["transition","transitionend"],["MSTransition","msTransitionEnd"],["WebkitTransition","webkitTransitionEnd"],["MozTransition","transitionend"]]),t=[].concat(_toConsumableArray(e.keys())),r=document.createElement("div"),n=0;n<t.length;++n)if(r.style[t[n]]!==undefined)return e.get(t[n]);return""}()});return r}(),Patterns=function(){var e=/[\u0150\u0170]/g.test("Ő"),t="[\\s\\u00A0\\u2028\\u2029]",r="[0-9A-Z_a-z\\-\\u00C0-\\u00D6\\u00D8-\\u00DE\\u00DF-\\u00F6\\u00F8-\\u00FF"+((e?"\\u0150\\u0170\\u0151\\u0171":"")+"]"),n=r.replace("\\-",""),a="[$A-Z_a-z]",i=a+"[$0-9A-Z_a-z]*",o="[$_]",s=o+i,l=["(?:("+r+"+)\\(([^\\)\\|\\n]+)\\):)","(?:("+r+"+):([^;\\|\\n]+);)","(?:((?:\\."+r+"+)+);)","(?:((?:#"+r+"+)+);)"].join("|"),u="(?:file|https?|mailto|ftp|javascript|irc|news|data):[^\\s'\"]+(?:/|\\b)";return Object.freeze({space:t,anyLetter:r,anyLetterStrict:n,identifierFirstChar:a,identifier:i,variableSigil:o,variable:s,inlineCss:l,url:u})}(),Scripting=function(){function addAccessibleClickHandler(e,t,r,n,a){if(arguments.length<2)throw new Error("addAccessibleClickHandler insufficient number of parameters");var i=void 0,o=void 0;if("function"==typeof t?(i=t,o={namespace:n,one:!!r}):(i=r,o={namespace:a,one:!!n,selector:t}),"function"!=typeof i)throw new TypeError("addAccessibleClickHandler handler parameter must be a function");return jQuery(e).ariaClick(o,i)}function insertElement(e,t,r,n,a,i){var o=jQuery(document.createElement(t));return r&&o.attr("id",r),n&&o.addClass(n),i&&o.attr("title",i),a&&o.text(a),e&&o.appendTo(e),o[0]}function insertText(e,t){jQuery(e).append(document.createTextNode(t))}function removeChildren(e){jQuery(e).empty()}function removeElement(e){jQuery(e).remove()}function fade(e,t){function r(){i+=.05*a,n(o,Math.easeInOut(i)),(1===a&&i>=1||-1===a&&0>=i)&&(e.style.visibility="in"===t.fade?"visible":"hidden",o.parentNode.replaceChild(e,o),o=null,window.clearInterval(s),t.onComplete&&t.onComplete())}function n(e,t){e.style.zoom=1,e.style.filter="alpha(opacity="+Math.floor(100*t)+")",e.style.opacity=t}var a="in"===t.fade?1:-1,i=void 0,o=e.cloneNode(!0),s=void 0;e.parentNode.replaceChild(o,e),"in"===t.fade?(i=0,o.style.visibility="visible"):i=1,n(o,i),s=window.setInterval(r,25)}function scrollWindowTo(e,t){function r(){c+=i,window.scroll(0,o+u*(l*Math.easeInOut(c))),c>=1&&window.clearInterval(d)}function n(e){for(var t=0;e.offsetParent;)t+=e.offsetTop,e=e.offsetParent;return t}function a(e){var t=n(e),r=t+e.offsetHeight,a=window.scrollY?window.scrollY:document.body.scrollTop,i=window.innerHeight?window.innerHeight:document.body.clientHeight,o=a+i;return a>t?t:r>o&&e.offsetHeight<i?t-(i-e.offsetHeight)+20:t}var i=null!=t?Number(t):.1;isNaN(i)||!isFinite(i)||0>i?i=.1:i>1&&(i=1);var o=window.scrollY?window.scrollY:document.body.scrollTop,s=a(e),l=Math.abs(o-s),u=o>s?-1:1,c=0,d=void 0;d=window.setInterval(r,25)}function either(){return 0!==arguments.length?Array.prototype.concat.apply([],arguments).random():void 0}function hasVisited(){if(0===arguments.length)throw new Error("hasVisited called with insufficient parameters");if(State.isEmpty())return!1;for(var e=Array.prototype.concat.apply([],arguments),t=State.passages,r=0,n=e.length;n>r;++r)if(!t.includes(e[r]))return!1;return!0}function lastVisited(){if(0===arguments.length)throw new Error("lastVisited called with insufficient parameters");if(State.isEmpty())return-1;for(var e=Array.prototype.concat.apply([],arguments),t=State.passages,r=t.length-1,n=State.turns,a=0,i=e.length;i>a&&n>-1;++a){var o=t.lastIndexOf(e[a]);n=Math.min(n,-1===o?-1:r-o)}return n}function passage(){return State.passage}function previous(){var e=State.passages;if(arguments.length>0){var t=Number(arguments[0]);if(isNaN(t)||!isFinite(t)||1>t)throw new RangeError("previous offset parameter must be a positive integer greater than zero");return e.length>t?e[e.length-1-t]:""}for(var r=e.length-2;r>=0;--r)if(e[r]!==State.passage)return e[r];return""}function random(){if(0===arguments.length)throw new Error("random called with insufficient parameters");var e=void 0,t=void 0;if(1===arguments.length?(e=0,t=arguments[0]):(e=arguments[0],t=arguments[1]),e>t){var r=[t,e];e=r[0],t=r[1]}return Math.floor(State.random()*(t-e+1))+e}function randomFloat(){if(0===arguments.length)throw new Error("randomFloat called with insufficient parameters");var e=void 0,t=void 0;if(1===arguments.length?(e=0,t=arguments[0]):(e=arguments[0],t=arguments[1]),e>t){var r=[t,e];e=r[0],t=r[1]}return State.random()*(t-e)+e}function tags(){if(0===arguments.length)return Story.get(State.passage).tags.slice(0);for(var e=Array.prototype.concat.apply([],arguments),t=[],r=0,n=e.length;n>r;++r)t=t.concat(Story.get(e[r]).tags);return t}function time(){return null===Engine.lastPlay?0:Date.now()-Engine.lastPlay}function turns(){return State.turns}function variables(){return State.variables}function visited(){if(State.isEmpty())return 0;for(var e=Array.prototype.concat.apply([],0===arguments.length?[State.passage]:arguments),t=State.passages,r=State.turns,n=0,a=e.length;a>n&&r>0;++n)r=Math.min(r,t.count(e[n]));return r}function visitedTags(){if(0===arguments.length)throw new Error("visitedTags called with insufficient parameters");if(State.isEmpty())return 0;for(var e=Array.prototype.concat.apply([],arguments),t=e.length,r=State.passages,n=new Map,a=0,i=0,o=r.length;o>i;++i){var s=r[i];if(n.has(s))n.get(s)&&++a;else{var l=Story.get(s).tags;if(l.length>0){for(var u=0,c=0;t>c;++c)l.includes(e[c])&&++u;u===t?(++a,n.set(s,!0)):n.set(s,!1)}}}return a}function evalJavaScript(code,output){return function(code,output){return eval(code)}.call(output?{output:output}:null,String(code),output)}function evalTwineScript(code,output){return function(code,output){return eval(code)}.call(output?{output:output}:null,parse(String(code)),output)}var parse=function(){function e(e){if(0!==r.lastIndex)throw new RangeError("Scripting.parse last index is non-zero at start");for(var a=e,i=void 0;null!==(i=r.exec(a));)if(i[5]){var o=i[5];if("$"===o||"_"===o)continue;if(n.test(o))o=o[0];else if("is"===o){var s=r.lastIndex,l=a.slice(s);/^\s+not\b/.test(l)&&(a=a.splice(s,l.search(/\S/)),o="isnot")}t.hasOwnProperty(o)&&(a=a.splice(i.index,o.length,t[o]),r.lastIndex+=t[o].length-o.length)}return a}var t=Object.freeze({$:"State.variables.",_:"TempVariables.",to:"=",eq:"==",neq:"!=",is:"===",isnot:"!==",gt:">",gte:">=",lt:"<",lte:"<=",and:"&&",or:"||",not:"!",def:'"undefined" !== typeof',ndef:'"undefined" === typeof'}),r=new RegExp(["(\"\"|'')",'("(?:\\\\.|[^"\\\\])+")',"('(?:\\\\.|[^'\\\\])+')","([=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}]+)","([^\"'=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}\\s]+)"].join("|"),"g"),n=new RegExp("^"+Patterns.variable);return e}();return Object.freeze(Object.defineProperties({},{parse:{value:parse},evalJavaScript:{value:evalJavaScript},evalTwineScript:{value:evalTwineScript}}))}(),Wikifier=function(){var e=void 0,t=function(){function t(r,n){_classCallCheck(this,t),Object.defineProperties(this,{formatter:{value:e||t.compileFormatters()},source:{value:n},nextMatch:{writable:!0,value:0},output:{writable:!0,value:null},_rawArgs:{writable:!0,value:""},_nobr:{writable:!0,value:[]}}),null==r?this.output=document.createDocumentFragment():r.jquery?this.output=r[0]:this.output=r,this.subWikify(this.output)}return _createClass(t,[{key:"subWikify",value:function(e,t,r){var n=this.output;this.output=e;var a=t?new RegExp("(?:"+t+")",r?"gim":"gm"):null,i=void 0,o=void 0;do{if(this.formatter.formatterRegExp.lastIndex=this.nextMatch,a&&(a.lastIndex=this.nextMatch),o=this.formatter.formatterRegExp.exec(this.source),i=a?a.exec(this.source):null,i&&(!o||i.index<=o.index))return i.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,i.index),this.matchStart=i.index,this.matchLength=i[0].length,this.matchText=i[0],this.nextMatch=a.lastIndex,void(this.output=n);if(o){o.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,o.index),this.matchStart=o.index,this.matchLength=o[0].length,this.matchText=o[0],this.nextMatch=this.formatter.formatterRegExp.lastIndex;for(var s=void 0,l=1,u=o.length;u>l;++l)if(o[l]){s=l-1;break}if(this.formatter.formatters[s].handler(this),null!=TempState.break)break}}while(i||o);null==TempState.break?this.nextMatch<this.source.length&&(this.outputText(this.output,this.nextMatch,this.source.length),this.nextMatch=this.source.length):this.output.lastChild&&this.output.lastChild.nodeType===Node.ELEMENT_NODE&&"BR"===this.output.lastChild.nodeName.toUpperCase()&&jQuery(this.output.lastChild).remove(),this.output=n}},{key:"outputText",value:function(e,t,r){jQuery(e).append(document.createTextNode(this.source.substring(t,r)))}},{key:"rawArgs",value:function(){return this._rawArgs}},{key:"fullArgs",value:function(){return Scripting.parse(this.rawArgs())}}],[{key:"compileFormatters",value:function(){var r=t.formatters;return e={formatters:r,formatterRegExp:new RegExp(r.map(function(e){return"("+e.match+")"}).join("|"),"gm")}}},{key:"getValue",value:function(e){var r=t.parseStoryVariable(e),n=void 0;if(null!==r){n=r.store;for(var a=r.names,i=0,o=a.length;o>i;++i){if("undefined"==typeof n[a[i]]){n=undefined;break}n=n[a[i]]}}return n}},{key:"setValue",value:function(e,r){var n=t.parseStoryVariable(e);if(null!==n){for(var a=n.names,i=a.pop(),o=n.store,s=0,l=a.length;l>s;++s){if("undefined"==typeof o[a[s]]){o=undefined;break}o=o[a[s]]}if(o!==undefined)return o[i]=r,!0}return!1}},{key:"parseStoryVariable",value:function(e){for(var r={store:"$"===e[0]?State.variables:TempVariables,names:[]},n=e,a=void 0;null!==(a=t._parseVarRegExp.exec(n));)n=n.slice(a[0].length),a[1]?r.names.push(a[1]):a[2]?r.names.push(a[2]):a[3]?r.names.push(a[3]):a[4]?r.names.push(a[4]):a[5]?r.names.push(t.getValue(a[5])):a[6]&&r.names.push(Number(a[6]));return""===n?r:null}},{key:"wikifyEval",value:function(e){var r=document.createDocumentFragment();new t(r,e);var n=r.querySelector(".error");if(null!==n)throw new Error(n.textContent.replace(/^(?:(?:Uncaught\s+)?Error:\s+)+/,""));return r}},{key:"createInternalLink",value:function(e,t,r,n){var a=jQuery(document.createElement("a"));return null!=t&&(a.attr("data-passage",t),Story.has(t)?(a.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(t)&&a.addClass("link-visited")):a.addClass("link-broken"),a.ariaClick({one:!0},function(){"function"==typeof n&&n(),Engine.play(t)})),r&&a.append(document.createTextNode(r)),e&&a.appendTo(e),a[0]}},{key:"createExternalLink",value:function(e,t,r){var n=jQuery(document.createElement("a")).attr("target","_blank").addClass("link-external").text(r).appendTo(e);return null!=t&&n.attr({href:t,tabindex:0}),n[0]}},{key:"isExternalLink",value:function(e){if(Story.has(e))return!1;var t=new RegExp("^"+Patterns.url,"gim");return t.test(e)||/[\.\/\\#]/.test(e)}}]),t}();return Object.defineProperties(t,{_parseVarRegExp:{value:new RegExp(["^(?:",Patterns.variableSigil,"(",Patterns.identifier,")|\\.(",Patterns.identifier,")|\\[(?:(?:\"((?:\\\\.|[^\"\\\\])+)\")|(?:'((?:\\\\.|[^'\\\\])+)')|(",Patterns.variableSigil,Patterns.identifierFirstChar,".*)|(\\d+))\\])"].join(""))},helpers:{value:{}},parse:{value:Scripting.parse},evalExpression:{value:Scripting.evalTwineScript},evalStatements:{value:Scripting.evalTwineScript},textPrimitives:{value:Patterns}}),Object.defineProperties(t.helpers,{_inlineCssLookahead:{value:new RegExp(Patterns.inlineCss,"gm")},inlineCss:{value:function(e){var t={classes:[],id:"",styles:{}},r=this._inlineCssLookahead,n=void 0;do{r.lastIndex=e.nextMatch;var a=r.exec(e.source);n=a&&a.index===e.nextMatch,n&&(a[1]?t.styles[Util.fromCssProperty(a[1])]=a[2].trim():a[3]?t.styles[Util.fromCssProperty(a[3])]=a[4].trim():a[5]?t.classes=t.classes.concat(a[5].slice(1).split(/\./)):a[6]&&(t.id=a[6].slice(1).split(/#/).pop()),e.nextMatch=r.lastIndex)}while(n);return t}},evalText:{value:function(e){var t=void 0;try{t=Scripting.evalTwineScript(e),null==t||"function"==typeof t?t=e:(t=String(t),/\[(?:object(?:\s+[^\]]+)?|native\s+code)\]/.test(t)&&(t=e))}catch(r){t=e}return t}},evalPassageId:{value:function(e){return null==e||Story.has(e)?e:t.helpers.evalText(e)}},parseSquareBracketedMarkup:{value:function(e){function t(){return d>=e.source.length?l:e.source[d++]}function r(){return d>=e.source.length?l:e.source[d]}function n(t){return 1>t||d+t>=e.source.length?l:e.source[d+t]}function a(){return{error:String.format.apply(null,arguments),pos:d}}function i(){c=d}function o(t){var r=e.source.slice(c,d).trim();if(""===r)throw new Error("malformed wiki "+(f?"link":"image")+", empty "+t+" component");"link"===t&&"~"===r[0]?(u.forceInternal=!0,u.link=r.slice(1)):u[t]=r,c=d}function s(e){++d;e:for(;;){switch(r()){case"\\":++d;var t=r();if(t!==l&&"\n"!==t)break;case l:case"\n":return l;case e:break e}++d}return d}var l=-1,u={},c=e.matchStart,d=c+1,h=void 0,p=void 0,f=void 0,g=void 0;if(g=r(),"["===g)f=u.isLink=!0;else{switch(f=!1,g){case"<":u.align="left",++d;break;case">":u.align="right",++d}if(!/^[Ii][Mm][Gg]$/.test(e.source.slice(d,d+3)))return a("malformed square-bracketed wiki markup");d+=3,u.isImage=!0}if("["!==t())return a("malformed wiki {0}",f?"link":"image");h=1,p=0,i();try{e:for(;;){switch(g=r()){case l:case"\n":return a("unterminated wiki {0}",f?"link":"image");case'"':if(s(g)===l)return a("unterminated double quoted string in wiki {0}",f?"link":"image");break;case"'":if((4===p||3===p&&f)&&s(g)===l)return a("unterminated single quoted string in wiki {0}",f?"link":"image");break;case"|":0===p&&(o(f?"text":"title"),++c,p=1);break;case"-":0===p&&">"===n(1)&&(o(f?"text":"title"),++d,c+=2,p=1);break;case"<":0===p&&"-"===n(1)&&(o(f?"link":"source"),++d,c+=2,p=2);break;case"[":if(-1===p)return a("unexpected left square bracket '['");++h,1===h&&(i(),++c);break;case"]":if(--h,0===h){switch(p){case 0:case 1:o(f?"link":"source"),p=3;break;case 2:o(f?"text":"title"),p=3;break;case 3:f?(o("setter"),p=-1):(o("link"),p=4);break;case 4:o("setter"),p=-1}if(++d,"]"===r()){++d;break e}--d}}++d}}catch(e){return a(e.message)}return u.pos=d,u}}}),Object.defineProperty(t,"formatters",{value:[{name:"macro",match:"<<",lookahead:/<<(\/?[A-Za-z][^>\s]*|[=-])(?:\s*)((?:(?:\"(?:\\.|[^\"\\])*\")|(?:\'(?:\\.|[^\'\\])*\')|(?:\[(?:[<>]?[Ii][Mm][Gg])?\[[^\r\n]*?\]\]+)|[^>]|(?:>(?!>)))*)>>/gm,argsPattern:["(``)","`((?:\\\\.|[^`\\\\])+)`","(\"\"|'')",'("(?:\\\\.|[^"\\\\])+")',"('(?:\\\\.|[^'\\\\])+')","(\\[(?:[<>]?[Ii][Mm][Gg])?\\[[^\\r\\n]*?\\]\\]+)","([^`\"'\\s]+)","(`|\"|')"].join("|"),working:{source:"",name:"",arguments:"",index:0},context:null,handler:function(e){var t=this.lookahead.lastIndex=e.matchStart;if(this.parseTag(e)){var r=e.nextMatch,n=this.working.source,a=this.working.name,i=this.working.arguments,o=void 0;try{if(o=Macro.get(a),!o){if(Macro.tags.has(a)){var s=Macro.tags.get(a);return throwError(e.output,"child tag <<"+a+">> was found outside of a call to its parent macro"+((1===s.length?"":"s")+" <<"+s.join(">>, <<")+">>"),e.source.slice(t,e.nextMatch))}return throwError(e.output,"macro <<"+a+">> does not exist",e.source.slice(t,e.nextMatch))}var l=null;if(o.hasOwnProperty("tags")&&(l=this.parseBody(e,o),!l))return e.nextMatch=r,throwError(e.output,"cannot find a closing tag for macro <<"+a+">>",e.source.slice(t,e.nextMatch)+"…");if("function"!=typeof o.handler)return throwError(e.output,"macro <<"+a+">> handler function "+(o.hasOwnProperty("handler")?"is not a function":"does not exist"),e.source.slice(t,e.nextMatch));var u=l?l[0].args:this.createArgs(i,o.hasOwnProperty("skipArgs")&&!!o.skipArgs);if(o.hasOwnProperty("_MACRO_API")){this.context=new MacroContext({parent:this.context,macro:o,name:a,args:u,payload:l,parser:e,source:n});try{o.handler.call(this.context)}finally{this.context=this.context.parent}}else{var c=e._rawArgs;e._rawArgs=i,o.handler(e.output,a,u,e,l),e._rawArgs=c}}catch(r){return throwError(e.output,"cannot execute "+(o&&o.isWidget?"widget":"macro")+" <<"+a+">>: "+r.message,e.source.slice(t,e.nextMatch))}finally{this.working.source="",this.working.name="",this.working.arguments="",this.working.index=0}}else e.outputText(e.output,e.matchStart,e.nextMatch)},parseTag:function(e){var t=this.lookahead.exec(e.source);return t&&t.index===e.matchStart&&t[1]?(e.nextMatch=this.lookahead.lastIndex,this.working.source=e.source.slice(t.index,this.lookahead.lastIndex),this.working.name=t[1],this.working.arguments=t[2],this.working.index=t.index,!0):!1},parseBody:function(e,t){for(var r=this.working.name,n="/"+r,a="end"+r,i=Array.isArray(t.tags)?t.tags:!1,o=[],s=t.hasOwnProperty("skipArgs")&&!!t.skipArgs,l=-1,u=1,c=this.working.source,d=this.working.name,h=this.working.arguments,p=e.nextMatch;-1!==(e.matchStart=e.source.indexOf(this.match,e.nextMatch));)if(this.parseTag(e)){var f=this.working.source,g=this.working.name,m=this.working.arguments,v=this.working.index,y=e.nextMatch;switch(g){case r:++u;break;case a:case n:--u;break;default:if(1===u&&i)for(var b=0,w=i.length;w>b;++b)g===i[b]&&(o.push({source:c,name:d,arguments:h,args:this.createArgs(h,s),contents:e.source.slice(p,v)}),c=f,d=g,h=m,p=y)}if(0===u){o.push({source:c,name:d,arguments:h,args:this.createArgs(h,s),contents:e.source.slice(p,v)}),l=y;break}}else this.lookahead.lastIndex=e.nextMatch=e.matchStart+this.match.length;return-1!==l?(e.nextMatch=l,o):null},createArgs:function(e,t){var r=t?[]:this.parseArgs(e);return Object.defineProperties(r,{raw:{value:e},full:{value:Scripting.parse(e)}}),r},parseArgs:function(e){for(var r=new RegExp(this.argsPattern,"gm"),n=[],a=new RegExp("^"+Patterns.variable),i=void 0;null!==(i=r.exec(e));){var o=void 0;if(i[1])o=undefined;else if(i[2]){o=i[2];try{o=Scripting.evalTwineScript(o)}catch(e){throw new Error('unable to parse macro argument "'+o+'": '+e.message)}}else if(i[3])o="";else if(i[4]){o=i[4];try{o=Scripting.evalJavaScript(o)}catch(e){throw new Error("unable to parse macro argument '"+o+"': "+e.message)}}else if(i[5]){o=i[5];try{o=Scripting.evalJavaScript(o)}catch(e){throw new Error('unable to parse macro argument "'+o+'": '+e.message)}}else if(i[6]){o=i[6];var s=t.helpers.parseSquareBracketedMarkup({source:o,matchStart:0});if(s.hasOwnProperty("error"))throw new Error('unable to parse macro argument "'+o+'": '+s.error);if(s.pos<o.length)throw new Error('unable to parse macro argument "'+o+'": unexpected character(s)'+(' "'+o.slice(s.pos)+'" (pos: '+s.pos+")"));s.isLink?(o={isLink:!0},o.count=s.hasOwnProperty("text")?2:1,o.link=t.helpers.evalPassageId(s.link),o.text=s.hasOwnProperty("text")?t.helpers.evalText(s.text):o.link,o.external=!s.forceInternal&&t.isExternalLink(o.link),o.setFn=s.hasOwnProperty("setter")?function(e){return function(){return Scripting.evalJavaScript(e)}}(Scripting.parse(s.setter)):null):s.isImage&&(o=function(e){var t={source:e,isImage:!0};if("data:"!==e.slice(0,5)&&Story.has(e)){var r=Story.get(e);r.tags.includes("Twine.image")&&(t.source=r.text,t.passage=r.title)}return t}(s.source),s.hasOwnProperty("align")&&(o.align=s.align),s.hasOwnProperty("title")&&(o.title=t.helpers.evalText(s.title)),s.hasOwnProperty("link")&&(o.link=t.helpers.evalPassageId(s.link),o.external=!s.forceInternal&&t.isExternalLink(o.link)),o.setFn=s.hasOwnProperty("setter")?function(e){return function(){return Scripting.evalJavaScript(e)}}(Scripting.parse(s.setter)):null)}else if(i[7])if(o=i[7],a.test(o))o=t.getValue(o);else if(/^(?:settings|setup)[\.\[]/.test(o))try{o=Scripting.evalTwineScript(o)}catch(e){throw new Error('unable to parse macro argument "'+o+'": '+e.message)}else"null"===o?o=null:"undefined"===o?o=undefined:"true"===o?o=!0:"false"===o?o=!1:!isNaN(parseFloat(o))&&isFinite(o)&&(o=Number(o));else if(i[8]){var l=void 0;switch(i[8]){case"`":l="backtick expression";break;case'"':l="double quoted string";break;case"'":l="single quoted string"}throw new Error("unterminated "+l+" in macro argument string")}n.push(o)}return n}},{name:"prettyLink",match:"\\[\\[[^[]",handler:function(e){var r=t.helpers.parseSquareBracketedMarkup(e);if(r.hasOwnProperty("error"))return void e.outputText(e.output,e.matchStart,e.nextMatch);e.nextMatch=r.pos;var n=t.helpers.evalPassageId(r.link),a=r.hasOwnProperty("text")?t.helpers.evalText(r.text):n,i=r.hasOwnProperty("setter")?function(e){return function(){return Scripting.evalJavaScript(e)}}(Scripting.parse(r.setter)):null,o=(Config.debug?new DebugView(e.output,"wiki-link","[[link]]",e.source.slice(e.matchStart,e.nextMatch)):e).output;r.forceInternal||!t.isExternalLink(n)?t.createInternalLink(o,n,a,i):t.createExternalLink(o,n,a)}},{name:"urlLink",match:Patterns.url,handler:function(e){e.outputText(t.createExternalLink(e.output,e.matchText),e.matchStart,e.nextMatch)}},{name:"image",match:"\\[[<>]?[Ii][Mm][Gg]\\[",handler:function(e){var r=t.helpers.parseSquareBracketedMarkup(e);if(r.hasOwnProperty("error"))return void e.outputText(e.output,e.matchStart,e.nextMatch);e.nextMatch=r.pos;var n=void 0;Config.debug&&(n=new DebugView(e.output,"wiki-image",r.hasOwnProperty("link")?"[img[][link]]":"[img[]]",e.source.slice(e.matchStart,e.nextMatch)),n.modes({block:!0}));var a=r.hasOwnProperty("setter")?function(e){return function(){return Scripting.evalJavaScript(e)}}(Scripting.parse(r.setter)):null,i=(Config.debug?n:e).output,o=void 0;if(r.hasOwnProperty("link")){var s=t.helpers.evalPassageId(r.link);i=r.forceInternal||!t.isExternalLink(s)?t.createInternalLink(i,s,null,a):t.createExternalLink(i,s),i.classList.add("link-image")}if(i=jQuery(document.createElement("img")).appendTo(i).get(0),o=t.helpers.evalPassageId(r.source),"data:"!==o.slice(0,5)&&Story.has(o)){var l=Story.get(o);l.tags.includes("Twine.image")&&(i.setAttribute("data-passage",l.title),o=l.text)}i.src=o,r.hasOwnProperty("title")&&(i.title=t.helpers.evalText(r.title)),r.hasOwnProperty("align")&&(i.align=r.align)}},{name:"monospacedByLine",match:"^\\{\\{\\{\\n",lookahead:/^\{\{\{\n((?:^[^\n]*\n)+?)(^\}\}\}$\n?)/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(jQuery(document.createElement("pre")).text(t[1]).appendTo(e.output),e.nextMatch=this.lookahead.lastIndex)}},{name:"formatByChar",match:"''|//|__|\\^\\^|~~|==|\\{\\{\\{",handler:function(e){switch(e.matchText){case"''":e.subWikify(jQuery(document.createElement("strong")).appendTo(e.output).get(0),"''");break;case"//":e.subWikify(jQuery(document.createElement("em")).appendTo(e.output).get(0),"//");break;case"__":e.subWikify(jQuery(document.createElement("u")).appendTo(e.output).get(0),"__");break;case"^^":e.subWikify(jQuery(document.createElement("sup")).appendTo(e.output).get(0),"\\^\\^");break;case"~~":e.subWikify(jQuery(document.createElement("sub")).appendTo(e.output).get(0),"~~");break;case"==":e.subWikify(jQuery(document.createElement("s")).appendTo(e.output).get(0),"==");break;case"{{{":var t=/\{\{\{((?:.|\n)*?)\}\}\}/gm;t.lastIndex=e.matchStart;var r=t.exec(e.source);r&&r.index===e.matchStart&&(jQuery(document.createElement("code")).text(r[1]).appendTo(e.output),e.nextMatch=t.lastIndex)}}},{name:"customStyle",match:"@@",terminator:"@@",blockRegExp:/\s*\n/gm,handler:function(e){var r=t.helpers.inlineCss(e);this.blockRegExp.lastIndex=e.nextMatch;var n=this.blockRegExp.exec(e.source),a=n&&n.index===e.nextMatch,i=jQuery(document.createElement(a?"div":"span")).appendTo(e.output);0===r.classes.length&&""===r.id&&0===Object.keys(r.styles).length?i.addClass("marked"):(r.classes.forEach(function(e){return i.addClass(e)}),""!==r.id&&i.attr("id",r.id),i.css(r.styles)),a?(e.nextMatch+=n[0].length,e.subWikify(i[0],"\\n?"+this.terminator)):e.subWikify(i[0],this.terminator)}},{name:"verbatimText",match:'"{3}|<nowiki>',lookahead:/(?:\"{3}((?:.|\n)*?)\"{3})|(?:<nowiki>((?:.|\n)*?)<\/nowiki>)/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(jQuery(document.createElement("span")).addClass("verbatim").text(t[1]||t[2]).appendTo(e.output),e.nextMatch=this.lookahead.lastIndex)}},{name:"rule",match:"^----+$\\n?|<hrs*/?>\\n?",handler:function(e){jQuery(document.createElement("hr")).appendTo(e.output)}},{name:"emdash",match:"--",handler:function(e){jQuery(document.createTextNode("—")).appendTo(e.output)}},{name:"doubleDollarSign",match:"\\${2}",handler:function(e){jQuery(document.createTextNode("$")).appendTo(e.output)}},{name:"nakedVariable",match:[Patterns.variable,"(?:(?:\\.",Patterns.identifier,")|(?:\\[\\d+\\])|(?:\\[\"(?:\\\\.|[^\"\\\\])+\"\\])|(?:\\['(?:\\\\.|[^'\\\\])+'\\])|(?:\\[",Patterns.variable,"\\]))*"].join(""),handler:function(e){var r=toStringOrDefault(t.getValue(e.matchText),null);null===r?jQuery(document.createTextNode(e.matchText)).appendTo(e.output):new t((Config.debug?new DebugView(e.output,"variable",e.matchText,e.matchText):e).output,r)}},{name:"heading",match:"^!{1,6}",terminator:"\\n",handler:function(e){var t=function(e){for(var t="function"==typeof window.getComputedStyle,r=e.length-1;r>=0;--r){var n=e[r];switch(n.nodeType){case Node.ELEMENT_NODE:var a=n.nodeName.toUpperCase();if("BR"===a)return!0;var i=t?window.getComputedStyle(n,null):n.currentStyle;if(i&&i.display){if("none"===i.display)continue;return"block"===i.display}switch(a){case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":return!0}return!1;case Node.COMMENT_NODE:continue;default:return!1}}return!0}(e.output.childNodes);t?e.subWikify(jQuery(document.createElement("h"+e.matchLength)).appendTo(e.output).get(0),this.terminator):jQuery(e.output).append(document.createTextNode(e.matchText))}},{name:"table",match:"^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",lookahead:/^\|([^\n]*)\|([fhck]?)$/gm,rowTerminator:"\\|(?:[cfhk]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[cfhk]?$\\n?)",
cellTerminator:"(?:\\u0020*)\\|",rowTypes:{c:"caption",f:"tfoot",h:"thead","":"tbody"},handler:function(e){var t=jQuery(document.createElement("table")).appendTo(e.output).get(0),r=[],n=null,a=null,i=0,o=void 0;e.nextMatch=e.matchStart;do{this.lookahead.lastIndex=e.nextMatch;var s=this.lookahead.exec(e.source);if(o=s&&s.index===e.nextMatch){var l=s[2];"k"===l?(t.className=s[1],e.nextMatch+=s[0].length+1):(l!==n&&(n=l,a=jQuery(document.createElement(this.rowTypes[l])).appendTo(t)),"c"===n?(a.css("caption-side",0===i?"top":"bottom"),e.nextMatch+=1,e.subWikify(a[0],this.rowTerminator)):this.rowHandler(e,jQuery(document.createElement("tr")).appendTo(a).get(0),r),++i)}}while(o)},rowHandler:function(e,r,n){var a=this,i=new RegExp(this.cellPattern,"gm"),o=0,s=1,l=void 0;do{i.lastIndex=e.nextMatch;var u=i.exec(e.source);if(l=u&&u.index===e.nextMatch){if("~"===u[1]){var c=n[o];c&&(++c.rowCount,c.$element.attr("rowspan",c.rowCount).css("vertical-align","middle")),e.nextMatch=u.index+u[0].length-1}else if(">"===u[1])++s,e.nextMatch=u.index+u[0].length-1;else{if(u[2]){e.nextMatch=u.index+u[0].length;break}!function(){++e.nextMatch;for(var i=t.helpers.inlineCss(e),l=!1,u=!1,c=void 0;" "===e.source.substr(e.nextMatch,1);)l=!0,++e.nextMatch;"!"===e.source.substr(e.nextMatch,1)?(c=jQuery(document.createElement("th")).appendTo(r),++e.nextMatch):c=jQuery(document.createElement("td")).appendTo(r),n[o]={rowCount:1,$element:c},s>1&&(c.attr("colspan",s),s=1),e.subWikify(c[0],a.cellTerminator)," "===e.matchText.substr(e.matchText.length-2,1)&&(u=!0),i.classes.forEach(function(e){return c.addClass(e)}),""!==i.id&&c.attr("id",i.id),l&&u?i.styles["text-align"]="center":l?i.styles["text-align"]="right":u&&(i.styles["text-align"]="left"),c.css(i.styles),e.nextMatch=e.nextMatch-1}()}++o}}while(l)}},{name:"list",match:"^(?:(?:\\*+)|(?:#+))",lookahead:/^(?:(\*+)|(#+))/gm,terminator:"\\n",handler:function(e){e.nextMatch=e.matchStart;var t=[e.output],r=null,n=0,a=void 0,i=void 0;do{this.lookahead.lastIndex=e.nextMatch;var o=this.lookahead.exec(e.source);if(a=o&&o.index===e.nextMatch){var s=o[2]?"ol":"ul",l=o[0].length;if(e.nextMatch+=o[0].length,l>n)for(i=n;l>i;++i)t.push(jQuery(document.createElement(s)).appendTo(t[t.length-1]).get(0));else if(n>l)for(i=n;i>l;--i)t.pop();else l===n&&s!==r&&(t.pop(),t.push(jQuery(document.createElement(s)).appendTo(t[t.length-1]).get(0)));n=l,r=s,e.subWikify(jQuery(document.createElement("li")).appendTo(t[t.length-1]).get(0),this.terminator)}}while(a)}},{name:"quoteByBlock",match:"^<<<\\n",terminator:"^<<<\\n",handler:function(e){e.subWikify(jQuery(document.createElement("blockquote")).appendTo(e.output).get(0),this.terminator)}},{name:"quoteByLine",match:"^>+",lookahead:/^>+/gm,terminator:"\\n",element:"blockquote",handler:function(e){var t=[e.output],r=0,n=e.matchLength,a=void 0,i=void 0;do{if(n>r)for(i=r;n>i;++i)t.push(jQuery(document.createElement(this.element)).appendTo(t[t.length-1]).get(0));else if(r>n)for(i=r;i>n;--i)t.pop();r=n,e.subWikify(t[t.length-1],this.terminator),jQuery(document.createElement("br")).appendTo(t[t.length-1]),this.lookahead.lastIndex=e.nextMatch;var o=this.lookahead.exec(e.source);a=o&&o.index===e.nextMatch,a&&(n=o[0].length,e.nextMatch+=o[0].length)}while(a)}},{name:"html",match:"<[Hh][Tt][Mm][Ll]>",lookahead:/<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(e.nextMatch=this.lookahead.lastIndex,jQuery(document.createDocumentFragment()).append(t[1]).appendTo(e.output))}},{name:"commentByBlock",match:"(?:/(?:%|\\*))|(?:<!--)",lookahead:/(?:\/(%|\*)(?:(?:.|\n)*?)\1\/)|(?:<!--(?:(?:.|\n)*?)-->)/gm,handler:function(e){this.lookahead.lastIndex=e.matchStart;var t=this.lookahead.exec(e.source);t&&t.index===e.matchStart&&(e.nextMatch=this.lookahead.lastIndex)}},{name:"lineContinuation",match:"\\\\"+Patterns.space+"*?(?:\\n|$)|(?:^|\\n)"+Patterns.space+"*?\\\\",handler:function(e){e.nextMatch=e.matchStart+e.matchLength}},{name:"lineBreak",match:"\\n|<brs*/?>",handler:function(e){0!==e._nobr.length&&e._nobr[0]||jQuery(document.createElement("br")).appendTo(e.output)}},{name:"htmlCharacterReference",match:"(?:(?:&#?[0-9A-Za-z]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9A-Fa-f]|1D[C-Fc-f][0-9A-Fa-f]|20[D-Fd-f][0-9A-Fa-f]|FE2[0-9A-Fa-f])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[0-9A-Za-z]{2,8};)",handler:function(e){jQuery(document.createDocumentFragment()).append(e.matchText).appendTo(e.output)}},{name:"htmlTag",match:"<\\w+(?:\\s+[^\\u0000-\\u001F\\u007F-\\u009F\\s\"'>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*?\"|'[^']*?'|[^\\s\"'=<>`]+))?)*\\s*\\/?>",tagPattern:"<(\\w+)",voidElements:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],nobrElements:["colgroup","datalist","dl","figure","ol","optgroup","select","table","tbody","tfoot","thead","tr","ul"],handler:function(e){var t=new RegExp(this.tagPattern).exec(e.matchText),r=t&&t[1],n=r&&r.toLowerCase();if(n){var a=this.voidElements.includes(n),i=this.nobrElements.includes(n),o=void 0,s=void 0;if(!a){o="<\\/"+n+"\\s*>";var l=new RegExp(o,"gim");l.lastIndex=e.matchStart,s=l.exec(e.source)}if(a||s){var u=e.output,c=document.createElement(e.output.tagName),d=void 0;for(c.innerHTML=e.matchText;c.firstChild;)c=c.firstChild;if(c.hasAttribute("data-passage")&&(this.processDataAttributes(c),Config.debug&&(d=new DebugView(e.output,"html-"+n,n,e.matchText),d.modes({block:"img"===n,nonvoid:s}),u=d.output)),s){i?e._nobr.unshift(!0):e._nobr.length>0&&e._nobr.unshift(!1);try{e.subWikify(c,o,!0),d&&jQuery(c).find(".debug.block").length>0&&d.modes({block:!0})}finally{e._nobr.length>0&&e._nobr.shift()}}u.appendChild(c)}else throwError(e.output,'HTML tag "'+r+'" is not closed',e.matchText+"…")}},processDataAttributes:function(e){var r=e.getAttribute("data-passage");if(null!=r){var n=t.helpers.evalPassageId(r);n!==r&&(r=n,e.setAttribute("data-passage",n)),""!==r&&("IMG"===e.tagName.toUpperCase()?"data:"!==r.slice(0,5)&&Story.has(r)&&(r=Story.get(r),r.tags.includes("Twine.image")&&(e.src=r.text.trim())):!function(){var t=e.getAttribute("data-setter"),n=void 0;null!=t&&(t=String(t).trim(),""!==t&&(n=function(e){return function(){return Scripting.evalJavaScript(e)}}(Scripting.parse(t)))),Story.has(r)?(e.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(r)&&e.classList.add("link-visited")):e.classList.add("link-broken"),jQuery(e).ariaClick({one:!0},function(){"function"==typeof n&&n.call(this),Engine.play(r)})}())}}}]}),t}(),Macro=function(){function e(t,r,a){if(Array.isArray(t))return void t.forEach(function(t){return e(t,r,a)});if(n(t))throw new Error("cannot clobber existing macro <<"+t+">>");if(l(t))throw new Error(String.format("cannot clobber child tag <<{0}>> of parent macro{1} <<{2}>>",t,1===d[t].length?"":"s",d[t].join(">>, <<")));try{if("object"===("undefined"==typeof r?"undefined":_typeof(r)))c[t]=a?clone(r):r;else{if(!n(r))throw new Error("cannot create alias of nonexistent macro <<"+r+">>");c[t]=a?clone(c[r]):c[r]}Object.defineProperty(c,t,{writable:!1}),c[t]._MACRO_API=!0}catch(e){throw"TypeError"===e.name?new Error("cannot clobber protected macro <<"+t+">>"):new Error("unknown error when attempting to add macro <<"+t+">>: ["+e.name+"] "+e.message)}if(c[t].hasOwnProperty("tags"))if(null==c[t].tags)o(t);else{if(!Array.isArray(c[t].tags))throw new Error('bad value for "tags" property of macro <<'+t+">>");o(t,c[t].tags)}}function t(e){if(Array.isArray(e))return void e.forEach(function(e){return t(e)});if(n(e)){c[e].hasOwnProperty("tags")&&s(e);try{Object.defineProperty(c,e,{writable:!0}),delete c[e]}catch(t){throw new Error("unknown error removing macro <<"+e+">>: "+t.message)}}else if(l(e))throw new Error("cannot remove child tag <<"+e+">> of parent macro <<"+d[e]+">>")}function r(){return 0===Object.keys(c).length}function n(e){return c.hasOwnProperty(e)}function a(e){var t=null;return n(e)&&"function"==typeof c[e].handler?t=c[e]:macros.hasOwnProperty(e)&&"function"==typeof macros[e].handler&&(t=macros[e]),t}function i(){var e=arguments.length<=0||arguments[0]===undefined?"init":arguments[0];Object.keys(c).forEach(function(t){"function"==typeof c[t][e]&&c[t][e].call(c[t],t)}),Object.keys(macros).forEach(function(t){"function"==typeof macros[t][e]&&macros[t][e].call(macros[t],t)})}function o(e,t){if(!e)throw new Error("no parent specified");for(var r=["/"+e,"end"+e],a=[].concat(r,Array.isArray(t)?t:[]),i=0;i<a.length;++i){var o=a[i];if(n(o))throw new Error("cannot register tag for an existing macro");l(o)?d[o].includes(e)||(d[o].push(e),d[o].sort()):d[o]=[e]}}function s(e){if(!e)throw new Error("no parent specified");Object.keys(d).forEach(function(t){var r=d[t].indexOf(e);-1!==r&&(1===d[t].length?delete d[t]:d[t].splice(r,1))})}function l(e){return d.hasOwnProperty(e)}function u(e){return l(e)?d[e]:null}var c={},d={};return Object.freeze(Object.defineProperties({},{add:{value:e},delete:{value:t},isEmpty:{value:r},has:{value:n},get:{value:a},init:{value:i},tags:{value:Object.freeze(Object.defineProperties({},{register:{value:o},unregister:{value:s},has:{value:l},get:{value:u}}))},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),MacroContext=function(){var e=function(){function e(t){_classCallCheck(this,e);var r=Object.assign({parent:null,macro:null,name:"",args:null,payload:null,parser:null,source:""},t);if(null===r.macro||""===r.name||null===r.parser)throw new TypeError("context object missing required properties");Object.defineProperties(this,{parent:{value:r.parent},self:{value:r.macro},name:{value:r.name},args:{value:r.args},payload:{value:r.payload},source:{value:r.source},parser:{value:r.parser},_output:{value:r.parser.output},_debugView:{writable:!0,value:null},_debugViewEnabled:{writable:!0,value:Config.debug}})}return _createClass(e,[{key:"contextHas",value:function(e){for(var t=this;null!==(t=t.parent);)if(e(t))return!0;return!1}},{key:"contextSelect",value:function(e){for(var t=this;null!==(t=t.parent);)if(e(t))return t;return null}},{key:"contextSelectAll",value:function(e){for(var t=[],r=this;null!==(r=r.parent);)e(r)&&t.push(r);return t}},{key:"createDebugView",value:function(e,t){return this._debugView=new DebugView(this._output,"macro",e?e:this.name,t?t:this.source),null!==this.payload&&this.payload.length>0&&this._debugView.modes({nonvoid:!0}),this._debugViewEnabled=!0,this._debugView}},{key:"removeDebugView",value:function(){null!==this._debugView&&(this._debugView.remove(),this._debugView=null),this._debugViewEnabled=!1}},{key:"error",value:function(e,t){return throwError(this._output,"<<"+this.name+">>: "+e,t?t:this.source)}},{key:"output",get:function(){return this._debugViewEnabled?this.debugView.output:this._output}},{key:"debugView",get:function(){return this._debugViewEnabled?null!==this._debugView?this._debugView:this.createDebugView():null}}]),e}();return e}();!function(){function e(e,t,r){return function(){if(""!==e){var n=void 0;try{"undefined"!=typeof t&&(State.variables.hasOwnProperty("args")&&(n=State.variables.args),State.variables.args=t),Wikifier.wikifyEval(e)}finally{"undefined"!=typeof t&&("undefined"!=typeof n?State.variables.args=n:delete State.variables.args)}}"function"==typeof r&&r.call(this)}}Macro.add("set",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(e){return this.error("bad evaluation: "+e.message)}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("unset",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no story/temporary variable list specified");for(var e=new RegExp("(?:(State\\.variables)|(TempVariables))\\.("+Wikifier.textPrimitives.identifier+")","g"),t=void 0;null!==(t=e.exec(this.args.full));){var r=t[1]?State.variables:TempVariables,n=t[3];r.hasOwnProperty(n)&&delete r[n]}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("remember",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(e){return this.error("bad evaluation: "+e.message)}for(var e=storage.get("remember")||{},t=new RegExp("State\\.variables\\.("+Wikifier.textPrimitives.identifier+")","g"),r=void 0;null!==(r=t.exec(this.args.full));){var n=r[1];e[n]=State.variables[n]}return storage.set("remember",e)?void(Config.debug&&this.debugView.modes({hidden:!0})):this.error("unknown error, cannot remember: "+this.args.raw)},init:function(){var e=storage.get("remember");e&&Object.keys(e).forEach(function(t){return State.variables[t]=e[t]})}}),Macro.add("forget",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no story variable list specified");for(var e=storage.get("remember"),t=new RegExp("State\\.variables\\.("+Wikifier.textPrimitives.identifier+")","g"),r=void 0,n=!1;null!==(r=t.exec(this.args.full));){var a=r[1];State.variables.hasOwnProperty(a)&&delete State.variables[a],e&&e.hasOwnProperty(a)&&(n=!0,delete e[a])}return n&&!storage.set("remember",e)?this.error("unknown error, cannot update remember store"):void(Config.debug&&this.debugView.modes({hidden:!0}))}}),Macro.add("run","set"),Macro.add("script",{skipArgs:!0,tags:null,handler:function(){var e=document.createDocumentFragment();try{Scripting.evalJavaScript(this.payload[0].contents,e),Config.debug&&this.createDebugView(this.name,this.source+this.payload[0].contents+"<</"+this.name+">>")}catch(e){return this.error("bad evaluation: "+e.message,this.source+this.payload[0].contents+"<</"+this.name+">>")}e.hasChildNodes()&&this.output.appendChild(e)}}),Macro.add("display",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var e=void 0;if(e="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],!Story.has(e))return this.error('passage "'+e+'" does not exist');Config.debug&&this.debugView.modes({block:!0}),e=Story.get(e);var t=void 0;t=this.args[1]?jQuery(document.createElement(this.args[1])).addClass(e.domId+" macro-"+this.name).attr("data-passage",e.title).appendTo(this.output):jQuery(this.output),t.wiki(e.processText())}}),Macro.add("nobr",{skipArgs:!0,tags:null,handler:function(){new Wikifier(this.output,this.payload[0].contents.replace(/^\n+|\n+$/g,"").replace(/\n+/g," "))}}),Macro.add(["print","=","-"],{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{var e=toStringOrDefault(Scripting.evalJavaScript(this.args.full),null);null!==e&&new Wikifier(this.output,"-"===this.name?Util.escape(e):e)}catch(e){return this.error("bad evaluation: "+e.message)}}}),Macro.add("silently",{skipArgs:!0,tags:null,handler:function(){var e=document.createDocumentFragment();if(new Wikifier(e,this.payload[0].contents.trim()),Config.debug)this.debugView.modes({hidden:!0}),this.output.appendChild(e);else{var t=[].concat(_toConsumableArray(e.querySelectorAll(".error"))).map(function(e){return e.textContent});if(t.length>0)return this.error("error"+(1===t.length?"":"s")+" within contents ("+t.join("; ")+")",this.source+this.payload[0].contents+"<</"+this.name+">>")}}}),Macro.add("if",{skipArgs:!0,tags:["elseif","else"],handler:function(){var e=0;try{for(var t=Scripting.evalJavaScript,r=this.payload.length,n=!1;r>e;++e){switch(this.payload[e].name){case"else":if(this.payload[e].args.raw.length>0)return/^\s*if\b/i.test(this.payload[e].args.raw)?this.error('whitespace is not allowed between the "else" and "if" in <<elseif>> clause'+(e>0?" (#"+e+")":"")):this.error("<<else>> does not accept a conditional expression (perhaps you meant to use <<elseif>>), invalid: "+this.payload[e].args.raw);break;default:if(0===this.payload[e].args.full.length)return this.error("no conditional expression specified for <<"+this.payload[e].name+">> clause"+(e>0?" (#"+e+")":""));if(Config.macros.ifAssignmentError&&/[^!=&^|<>*\/%+-]=[^=]/.test(this.payload[e].args.full))return this.error("assignment operator found within <<"+this.payload[e].name+">> clause"+(e>0?" (#"+e+")":"")+" (perhaps you meant to use an equality operator: ==, ===, eq, is), invalid: "+this.payload[e].args.raw)}if(Config.debug&&this.createDebugView(this.payload[e].name,this.payload[e].source).modes({nonvoid:!1}),"else"===this.payload[e].name||t(this.payload[e].args.full)){n=!0,new Wikifier(this.output,this.payload[e].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++e;r>e;++e)this.createDebugView(this.payload[e].name,this.payload[e].source).modes({nonvoid:!1,hidden:!0,invalid:!0});this.createDebugView("/"+this.name,"<</"+this.name+">>").modes({nonvoid:!1,hidden:!n,invalid:!n})}}catch(t){return this.error("bad conditional expression in <<"+(0===e?"if":"elseif")+">> clause"+((e>0?" (#"+e+")":"")+": "+t.message))}}}),Macro.add("for",{skipArgs:!0,tags:null,handler:function(){var e=Scripting.evalJavaScript,t=this.payload[0].contents.replace(/\n$/,""),r=void 0,n=this.args.full.trim(),a=void 0,i=!0,o=Config.macros.maxLoopIterations;if(0===n.length)n=!0;else if(-1!==n.indexOf(";")){var s=n.match(/^([^;]*?)\s*;\s*([^;]*?)\s*;\s*([^;]*?)$/);if(null===s)return this.error("invalid 3-part syntax, format: init ; condition ; post");r=s[1],n=s[2],a=s[3]}Config.debug&&this.debugView.modes({block:!0});try{if(TempState.break=null,r)try{e(r)}catch(e){return this.error("bad init expression: "+e.message)}for(;e(n);){if(--o<0)return this.error("exceeded configured maximum loop iterations"+(" ("+Config.macros.maxLoopIterations+")"));if(new Wikifier(this.output,i?t.replace(/^\n/,""):t),i&&(i=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}if(a)try{e(a)}catch(e){return this.error("bad post expression: "+e.message)}}}catch(e){return this.error("bad conditional expression: "+e.message)}finally{TempState.break=null}}}),Macro.add(["break","continue"],{skipArgs:!0,handler:function(){return this.contextHas(function(e){return"for"===e.name})?(TempState.break="continue"===this.name?1:2,void(Config.debug&&this.debugView.modes({hidden:!0}))):this.error("must only be used in conjunction with its parent macro <<for>>")}}),Macro.add(["button","click"],{tags:null,handler:function(){var t=this;if(0===this.args.length)return this.error("no "+("click"===this.name?"link":"button")+" text specified");Config.debug&&this.createDebugView(this.name,this.source+this.payload[0].contents+"<</"+this.name+">>");var r=jQuery(document.createElement("click"===this.name?"a":"button")),n=function(){var e=void 0;return State.variables.hasOwnProperty("args")&&t.contextHas(function(e){return e.self.isWidget})&&(e=State.variables.args),e}(),a=void 0;if("object"===_typeof(this.args[0]))if(this.args[0].isImage){var i=jQuery(document.createElement("img")).attr("src",this.args[0].source).appendTo(r);this.args[0].hasOwnProperty("passage")&&i.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&i.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&i.attr("align",this.args[0].align),this.args[0].hasOwnProperty("link")&&(a=this.args[0].link),a=this.args[0].link}else r.append(document.createTextNode(this.args[0].text)),a=this.args[0].link;else r.append(document.createTextNode(this.args[0])),a=this.args.length>1?this.args[1]:undefined;null!=a?(r.attr("data-passage",a),Story.has(a)?(r.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(a)&&r.addClass("link-visited")):r.addClass("link-broken")):r.addClass("link-internal"),r.addClass("macro-"+this.name).ariaClick({namespace:".macros",one:null!=a},e(this.payload[0].contents.trim(),n,null!=a?function(){return Engine.play(a)}:undefined)).appendTo(this.output)}}),Macro.add("checkbox",{handler:function(){if(this.args.length<3){var e=[];return this.args.length<1&&e.push("story variable name"),this.args.length<2&&e.push("unchecked value"),this.args.length<3&&e.push("checked value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0]||"$"!==this.args[0].trim()[0])return this.error('story variable name "'+this.args[0]+'" is missing its sigil ($)');var t=this.args[0].trim(),r=Util.slugify(t),n=this.args[1],a=this.args[2],i=document.createElement("input");jQuery(i).attr({id:this.name+"-"+r,name:this.name+"-"+r,type:"checkbox",tabindex:0}).addClass("macro-"+this.name).on("change",function(){Wikifier.setValue(t,this.checked?a:n)}).appendTo(this.output),this.args.length>3&&"checked"===this.args[3]?(i.checked=!0,Wikifier.setValue(t,a)):Wikifier.setValue(t,n)}}),Macro.add("radiobutton",{handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("story variable name"),this.args.length<2&&e.push("checked value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0]||"$"!==this.args[0].trim()[0])return this.error('story variable name "'+this.args[0]+'" is missing its sigil ($)');var t=this.args[0].trim(),r=Util.slugify(t),n=this.args[1],a=document.createElement("input");TempState.hasOwnProperty(this.name)||(TempState[this.name]={},TempState[this.name][r]=0),jQuery(a).attr({id:this.name+"-"+r+"-"+TempState[this.name][r]++,name:this.name+"-"+r,type:"radio",tabindex:0}).addClass("macro-"+this.name).on("change",function(){this.checked&&Wikifier.setValue(t,n)}).appendTo(this.output),this.args.length>2&&"checked"===this.args[2]&&(a.checked=!0,Wikifier.setValue(t,n))}}),Macro.add("textarea",{handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("story variable name"),this.args.length<2&&e.push("default value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0]||"$"!==this.args[0].trim()[0])return this.error('story variable name "'+this.args[0]+'" is missing its sigil ($)');Config.debug&&this.debugView.modes({block:!0});var t=this.args[0].trim(),r=Util.slugify(t),n=this.args[1],a="autofocus"===this.args[2],i=document.createElement("textarea");jQuery(i).attr({id:this.name+"-"+r,name:this.name+"-"+r,rows:4,tabindex:0}).addClass("macro-"+this.name).on("change",function(){Wikifier.setValue(t,this.value)}).appendTo(this.output),Wikifier.setValue(t,n),i.textContent=n,a&&(i.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:"+i.id]=function(e){setTimeout(function(){return i.focus()},Engine.minDomActionDelay),delete postdisplay[e]})}}),Macro.add("textbox",{handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("story variable name"),this.args.length<2&&e.push("default value"),this.error("no "+e.join(" or ")+" specified")}if("string"!=typeof this.args[0]||"$"!==this.args[0].trim()[0])return this.error('story variable name "'+this.args[0]+'" is missing its sigil ($)');Config.debug&&this.debugView.modes({block:!0});var t=this.args[0].trim(),r=Util.slugify(t),n=this.args[1],a=document.createElement("input"),i=!1,o=void 0;this.args.length>3?(o=this.args[2],i="autofocus"===this.args[3]):this.args.length>2&&("autofocus"===this.args[2]?i=!0:o=this.args[2]),jQuery(a).attr({id:this.name+"-"+r,name:this.name+"-"+r,type:"text",tabindex:0}).addClass("macro-"+this.name).on("change",function(){Wikifier.setValue(t,this.value)}).on("keypress",function(e){13===e.which&&(e.preventDefault(),Wikifier.setValue(t,this.value),null!=o&&Engine.play(o))}).appendTo(this.output),Wikifier.setValue(t,n),a.value=n,i&&(a.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:"+a.id]=function(e){setTimeout(function(){return a.focus()},Engine.minDomActionDelay),delete postdisplay[e]})}}),Macro.add("actions",{handler:function(){var e=jQuery(document.createElement("ul")).addClass(this.name).appendTo(this.output);State.variables["#actions"]||(State.variables["#actions"]={});for(var t=0;t<this.args.length;++t){var r=void 0,n=void 0,a=void 0,i=void 0;"object"===_typeof(this.args[t])?this.args[t].isImage?(a=jQuery(document.createElement("img")).attr("src",this.args[t].source),this.args[t].hasOwnProperty("passage")&&a.attr("data-passage",this.args[t].passage),this.args[t].hasOwnProperty("title")&&a.attr("title",this.args[t].title),this.args[t].hasOwnProperty("align")&&a.attr("align",this.args[t].align),r=this.args[t].link,i=this.args[t].setFn):(n=this.args[t].text,r=this.args[t].link,i=this.args[t].setFn):n=r=this.args[t],State.variables["#actions"].hasOwnProperty(r)&&State.variables["#actions"][r]||jQuery(Wikifier.createInternalLink(jQuery(document.createElement("li")).appendTo(e),r,null,function(e,t){return function(){State.variables["#actions"][e]=!0,"function"==typeof t&&t()}}(r,i))).addClass("macro-"+this.name).append(a||document.createTextNode(n))}}}),Macro.add(["back","return"],{handler:function(){if(this.args.length>1)return this.error("too many arguments specified, check the documentation for details");var e=-1,t=void 0,r=void 0,n=void 0;if(1===this.args.length&&("object"===_typeof(this.args[0])?this.args[0].isImage?(n=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&n.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&n.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&n.attr("align",this.args[0].align),this.args[0].hasOwnProperty("link")&&(t=this.args[0].link)):1===this.args[0].count?t=this.args[0].link:(r=this.args[0].text,t=this.args[0].link):1===this.args.length&&(r=this.args[0])),null==t){for(var a=State.length-2;a>=0;--a)if(State.history[a].title!==State.passage){e=a,t=State.history[a].title;break}if(null==t&&"return"===this.name)for(var i=State.expired.length-1;i>=0;--i)if(State.expired[i]!==State.passage){t=State.expired[i];break}}else{if(!Story.has(t))return this.error('passage "'+t+'" does not exist');if("back"===this.name){for(var o=State.length-2;o>=0;--o)if(State.history[o].title===t){e=o;break}if(-1===e)return this.error('cannot find passage "'+t+'" in the current story history')}}if(null==t)return this.error("cannot find passage");var s=void 0;s="back"!==this.name||-1!==e?jQuery(document.createElement("a")).addClass("link-internal").ariaClick({one:!0},"return"===this.name?function(){return Engine.play(t)}:function(){return Engine.goTo(e)}):jQuery(document.createElement("span")).addClass("link-disabled"),s.addClass("macro-"+this.name).append(n||document.createTextNode(r||strings.macros[this.name].text)).appendTo(this.output)}}),Macro.add("choice",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var e=State.passage,t=void 0,r=void 0,n=void 0,a=void 0;if(1===this.args.length?"object"===_typeof(this.args[0])?this.args[0].isImage?(n=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&n.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&n.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&n.attr("align",this.args[0].align),t=this.args[0].link,a=this.args[0].setFn):(r=this.args[0].text,t=this.args[0].link,a=this.args[0].setFn):r=t=this.args[0]:(t=this.args[0],r=this.args[1]),State.variables.hasOwnProperty("#choice")){if(State.variables["#choice"].hasOwnProperty(e)&&State.variables["#choice"][e])return void jQuery(document.createElement("span")).addClass("link-disabled macro-"+this.name).attr("tabindex",-1).append(n||document.createTextNode(r)).appendTo(this.output)}else State.variables["#choice"]={};jQuery(Wikifier.createInternalLink(this.output,t,null,function(){State.variables["#choice"][e]=!0,"function"==typeof a&&a()})).addClass("macro-"+this.name).append(n||document.createTextNode(r))}}),Macro.add(["addclass","toggleclass"],{handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("selector"),this.args.length<2&&e.push("class names"),this.error("no "+e.join(" or ")+" specified")}var t=jQuery(this.args[0]);if(0===t.length)return this.error('no elements matched the selector "'+this.args[0]+'"');switch(this.name){case"addclass":t.addClass(this.args[1].trim());break;case"toggleclass":t.toggleClass(this.args[1].trim())}}}),Macro.add("removeclass",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);return 0===e.length?this.error('no elements matched the selector "'+this.args[0]+'"'):void(this.args.length>1?e.removeClass(this.args[1].trim()):e.removeClass())}}),Macro.add("copy",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);return 0===e.length?this.error('no elements matched the selector "'+this.args[0]+'"'):void jQuery(this.output).append(e.html())}}),Macro.add(["append","prepend","replace"],{tags:null,handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);if(0===e.length)return this.error('no elements matched the selector "'+this.args[0]+'"');if("replace"===this.name&&e.empty(),""!==this.payload[0].contents){var t=document.createDocumentFragment();switch(new Wikifier(t,this.payload[0].contents),this.name){case"replace":case"append":e.append(t);break;case"prepend":e.prepend(t)}}}}),Macro.add("remove",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var e=jQuery(this.args[0]);return 0===e.length?this.error('no elements matched the selector "'+this.args[0]+'"'):void e.remove()}}),Has.audio?(Macro.add("cacheaudio",{handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("track ID"),this.args.length<2&&e.push("sources"),this.error("no "+e.join(" or ")+" specified")}for(var t=this.self.types,r=this.self.canPlay,n=document.createElement("audio"),a=this.args[0],i=this.self.extRe,o=1;o<this.args.length;++o){var s=this.args[o],l=i.exec(Util.parseUrl(s).pathname);if(null!==l){var u=l[1].toLowerCase(),c=t.hasOwnProperty(u)?t[u]:"audio/"+u;if(r.hasOwnProperty(c)||(r[c]=""!==n.canPlayType(c).replace(/^no$/i,"")),r[c]){var d=document.createElement("source");d.src=s,d.type=c,n.appendChild(d)}}}return Config.debug&&!n.hasChildNodes()?this.error("no supported audio tracks found"):(n.preload="auto",this.self.tracks[a]=new AudioWrapper(n),void(Config.debug&&this.createDebugView()))},extRe:/\.([^\.\/\\]+)$/,types:Object.freeze({aac:"audio/aac",mp3:'audio/mpeg; codecs="mp3"',mp4:"audio/mp4",m4a:"audio/mp4",ogg:"audio/ogg",oga:"audio/ogg",opus:'audio/ogg; codecs="opus"',wav:"audio/wav",webm:"audio/webm"}),canPlay:{},tracks:{}}),Macro.add("audio",{handler:function(){if(this.args.length<2){var e=[];return this.args.length<1&&e.push("track ID"),this.args.length<2&&e.push("actions"),this.error("no "+e.join(" or ")+" specified")}var t=Macro.get("cacheaudio").tracks,r=this.args[0];if(!t.hasOwnProperty(r))return this.error('track "'+r+'" does not exist');for(var n=t[r],a=this.args.slice(1),i=void 0,o=void 0,s=void 0,l=void 0,u=void 0,c=void 0,d=5,h=void 0,p=void 0;a.length>0;){var f=a.shift();switch(f){case"play":case"pause":case"stop":i=f;break;case"fadein":i="fade",c=1;break;case"fadeout":i="fade",c=0;break;case"fadeto":if(0===a.length)return this.error("fadeto missing required level value");if(i="fade",p=a.shift(),c=parseFloat(p),isNaN(c)||!isFinite(c))return this.error("cannot parse fadeto: "+p);break;case"fadeoverto":if(a.length<2){var g=[];return a.length<1&&g.push("seconds"),a.length<2&&g.push("level"),this.error("fadeoverto missing required "+g.join(" and ")+(" value"+(g.length>1?"s":"")))}if(i="fade",p=a.shift(),d=parseFloat(p),isNaN(d)||!isFinite(d))return this.error("cannot parse fadeoverto: "+p);if(p=a.shift(),c=parseFloat(p),isNaN(c)||!isFinite(c))return this.error("cannot parse fadeoverto: "+p);break;case"volume":if(0===a.length)return this.error("volume missing required level value");if(p=a.shift(),o=parseFloat(p),isNaN(o)||!isFinite(o))return this.error("cannot parse volume: "+p);
break;case"mute":case"unmute":s="mute"===f;break;case"time":if(0===a.length)return this.error("time missing required seconds value");if(p=a.shift(),l=parseFloat(p),isNaN(l)||!isFinite(l))return this.error("cannot parse time: "+p);break;case"loop":case"unloop":u="loop"===f;break;case"goto":if(0===a.length)return this.error("goto missing required passage title");if(p=a.shift(),h="object"===("undefined"==typeof p?"undefined":_typeof(p))?p.link:p,!Story.has(h))return this.error('passage "'+h+'" does not exist');break;default:return this.error("unknown action: "+f)}}try{switch(null!=o&&(n.volume=o),null!=l&&(n.time=l),null!=s&&(s?n.mute():n.unmute()),null!=u&&(u?n.loop():n.unloop()),null!=h&&n.oneEnd(function(){return Engine.play(h)}),i){case"play":n.play();break;case"pause":n.pause();break;case"stop":n.stop();break;case"fade":n.volume===c&&(0===c?n.volume=1:1===c&&(n.volume=0)),n.fadeWithDuration(d,n.volume,c)}Config.debug&&this.createDebugView()}catch(e){return this.error("error playing audio: "+e.message)}}}),Macro.add("stopallaudio",{handler:function(){var e=Macro.get("cacheaudio").tracks;Object.keys(e).forEach(function(t){return e[t].stop()}),Config.debug&&this.createDebugView()}}),Macro.add("playlist",{handler:function(){if(0===this.args.length)return this.error("no actions specified");for(var e=this.self,t=this.args.slice(0),r=void 0,n=void 0,a=void 0,i=void 0,o=void 0,s=void 0,l=5,u=void 0;t.length>0;){var c=t.shift();switch(c){case"play":case"pause":case"stop":r=c;break;case"fadein":r="fade",s=1;break;case"fadeout":r="fade",s=0;break;case"fadeto":if(0===t.length)return this.error("fadeto missing required level value");if(r="fade",u=t.shift(),s=parseFloat(u),isNaN(s)||!isFinite(s))return this.error("cannot parse fadeto: "+u);break;case"fadeoverto":if(t.length<2){var d=[];return t.length<1&&d.push("seconds"),t.length<2&&d.push("level"),this.error("fadeoverto missing required "+d.join(" and ")+(" value"+(d.length>1?"s":"")))}if(r="fade",u=t.shift(),l=parseFloat(u),isNaN(l)||!isFinite(l))return this.error("cannot parse fadeoverto: "+u);if(u=t.shift(),s=parseFloat(u),isNaN(s)||!isFinite(s))return this.error("cannot parse fadeoverto: "+u);break;case"volume":if(0===t.length)return this.error("volume missing required level value");if(u=t.shift(),n=parseFloat(u),isNaN(n)||!isFinite(n))return this.error("cannot parse volume: "+u);break;case"mute":case"unmute":a="mute"===c;break;case"loop":case"unloop":i="loop"===c;break;case"shuffle":case"unshuffle":o="shuffle"===c;break;default:return this.error("unknown action: "+c)}}try{switch(null!=n&&e.setVolume(n),null!=a&&(e.muted=a,a?e.mute():e.unmute()),null!=i&&(e.loop=i),null!=o&&(e.shuffle=o,e.buildList()),r){case"play":e.play();break;case"pause":e.pause();break;case"stop":e.stop();break;case"fade":e.volume===s&&(0===s?e.setVolume(1):1===s&&e.setVolume(0)),e.fade(l,s)}Config.debug&&this.createDebugView()}catch(e){return this.error("error playing audio: "+e.message)}},play:function(){0===this.list.length&&this.buildList(),(null!==this.current&&!this.current.isEnded()||this.next())&&this.current.play()},pause:function(){null!==this.current&&this.current.pause()},stop:function(){null!==this.current&&this.current.stop()},fade:function(e,t){if(0===this.list.length&&this.buildList(),null===this.current||this.current.isEnded()){if(!this.next())return}else this.current.volume=this.volume;this.current.fadeWithDuration(e,this.current.volume,t),this.volume=t},mute:function(){null!==this.current&&this.current.mute()},unmute:function(){null!==this.current&&this.current.unmute()},next:function(){return this.current=this.list.shift(),null==this.current?(this.current=null,!1):this.current.noSource()?this.next():(this.current.volume=this.volume,!0)},setVolume:function(e){this.volume=e,null!==this.current&&(this.current.volume=e)},onEnd:function(){var e=Macro.get("playlist");if(0===e.list.length){if(!e.loop)return;e.buildList()}e.next()&&(e.muted&&e.mute(),e.current.play())},buildList:function(){this.list=this.tracks.slice(0),this.shuffle&&(this.list.shuffle(),this.list.length>1&&this.list[0]===this.current&&this.list.push(this.list.shift()))},tracks:[],list:[],current:null,volume:1,muted:!1,loop:!0,shuffle:!1}),Macro.add("setplaylist",{handler:function(){if(0===this.args.length)return this.error("no track ID(s) specified");for(var e=Macro.get("cacheaudio").tracks,t=Macro.get("playlist"),r=[],n=0;n<this.args.length;++n){var a=this.args[n];if(!e.hasOwnProperty(a))return this.error('track "'+a+'" does not exist');var i=e[a].clone();i.stop(),i.unloop(),i.unmute(),i.volume=1,jQuery(i.audio).on("ended.macro-playlist",t.onEnd),r.push(i)}null!==t.current&&t.current.pause(),t.tracks=r,t.list=[],t.current=null,t.volume=1,t.muted=!1,t.loop=!0,t.shuffle=!1,Config.debug&&this.createDebugView()}})):Macro.add(["cacheaudio","audio","stopallaudio","playlist","setplaylist"],{handler:function(){}}),Macro.add("goto",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var e=void 0;return e="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],Story.has(e)?void setTimeout(function(){return Engine.play(e)},Engine.minDomActionDelay):this.error('passage "'+e+'" does not exist')}}),Macro.add("timed",{tags:["next"],timers:new Set,handler:function(){if(0===this.args.length)return this.error("no time value specified in <<timed>>");var e=[];try{e.push({name:this.name,source:this.source,delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0])),content:this.payload[0].contents})}catch(e){return this.error(e.message+" in <<timed>>")}if(this.payload.length>1){var t=void 0;try{var r=void 0;for(t=1,r=this.payload.length;r>t;++t)e.push({name:this.payload[t].name,source:this.payload[t].source,delay:0===this.payload[t].args.length?e[e.length-1].delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.payload[t].args[0])),content:this.payload[t].contents})}catch(e){return this.error(e.message+" in <<next>> (#"+t+")")}}Config.debug&&this.debugView.modes({block:!0}),this.self.registerTimeout(jQuery(document.createElement("span")).addClass("macro-"+this.name).appendTo(this.output),e,this.args.length>1&&/^(?:transition|t8n)$/.test(this.args[1]))},registerTimeout:function(e,t,r){var n=State.turns,a=this.timers,i=null,o=t.shift(),s=function s(){if(a.delete(i),n===State.turns){var l=o;null!=(o=t.shift())&&(i=setTimeout(s,o.delay),a.add(i));var u=document.createDocumentFragment();new Wikifier(u,l.content),Config.debug&&"next"===l.name&&(e=jQuery(new DebugView(e[0],"macro",l.name,l.source).output)),r&&(e=jQuery(document.createElement("span")).addClass("macro-timed-insert macro-timed-in").appendTo(e)),e.append(u),r&&setTimeout(function(){return e.removeClass("macro-timed-in")},Engine.minDomActionDelay)}};i=setTimeout(s,o.delay),a.add(i),prehistory.hasOwnProperty("#timed-timers-cleanup")||(prehistory["#timed-timers-cleanup"]=function(e){a.forEach(function(e){return clearTimeout(e)}),a.clear(),delete prehistory[e]})}}),Macro.add("repeat",{tags:null,timers:new Set,handler:function(){if(0===this.args.length)return this.error("no time value specified");var e=void 0;try{e=Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0]))}catch(e){return this.error(e.message)}Config.debug&&this.debugView.modes({block:!0}),this.self.registerInterval(jQuery(document.createElement("span")).addClass("macro-"+this.name).appendTo(this.output),this.payload[0].contents,e,this.args.length>1&&/^(?:transition|t8n)$/.test(this.args[1]))},registerInterval:function(e,t,r,n){var a=State.turns,i=this.timers,o=null;o=setInterval(function(){if(a!==State.turns)return clearInterval(o),void i.delete(o);var r=void 0;try{TempState.break=null,TempState.hasOwnProperty("repeatTimerId")&&(r=TempState.repeatTimerId),TempState.repeatTimerId=o;var s=document.createDocumentFragment();new Wikifier(s,t),n&&(e=jQuery(document.createElement("span")).addClass("macro-repeat-insert macro-repeat-in").appendTo(e)),e.append(s),n&&setTimeout(function(){return e.removeClass("macro-repeat-in")},Engine.minDomActionDelay)}finally{"undefined"!=typeof r?TempState.repeatTimerId=r:delete TempState.repeatTimerId,TempState.break=null}},r),i.add(o),prehistory.hasOwnProperty("#repeat-timers-cleanup")||(prehistory["#repeat-timers-cleanup"]=function(e){i.forEach(function(e){return clearInterval(e)}),i.clear(),delete prehistory[e]})}}),Macro.add("stop",{skipArgs:!0,handler:function(){if(!TempState.hasOwnProperty("repeatTimerId"))return this.error("must only be used in conjunction with its parent macro <<repeat>>");var e=Macro.get("repeat").timers,t=TempState.repeatTimerId;clearInterval(t),e.delete(t),TempState.break=2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("widget",{tags:null,handler:function(){if(0===this.args.length)return this.error("no widget name specified");var e=this.args[0];if(Macro.has(e)){if(!Macro.get(e).isWidget)return this.error('cannot clobber existing macro "'+e+'"');Macro.delete(e)}try{Macro.add(e,{isWidget:!0,handler:function(e){return function(){var t=this,r=void 0;try{var n=function(){State.variables.hasOwnProperty("args")&&(r=State.variables.args),State.variables.args=[];for(var n=0,a=t.args.length;a>n;++n)State.variables.args[n]=t.args[n];State.variables.args.raw=t.args.raw,State.variables.args.full=t.args.full;var i=document.createDocumentFragment(),o=[];return new Wikifier(i,e),Array.from(i.querySelectorAll(".error")).forEach(function(e){o.push(e.textContent)}),0!==o.length?{v:t.error("error"+(o.length>1?"s":"")+" within"+(" widget contents ("+o.join("; ")+")"))}:void t.output.appendChild(i)}();if("object"===("undefined"==typeof n?"undefined":_typeof(n)))return n.v}catch(e){return this.error("cannot execute widget: "+e.message)}finally{"undefined"!=typeof r?State.variables.args=r:delete State.variables.args}}}(this.payload[0].contents)}),Config.debug&&this.createDebugView(this.name,this.source+this.payload[0].contents+"<</"+this.name+">>")}catch(t){return this.error('cannot create widget macro "'+e+'": '+t.message)}}})}();var Dialog=function(){function e(){f=function(){var e=void 0;try{var t=document.createElement("p"),r=document.createElement("div");t.style.width="100%",t.style.height="200px",r.style.position="absolute",r.style.left="0px",r.style.top="0px",r.style.width="100px",r.style.height="100px",r.style.visibility="hidden",r.style.overflow="hidden",r.appendChild(t),document.body.appendChild(r);var n=t.offsetWidth;r.style.overflow="auto";var a=t.offsetWidth;n===a&&(a=r.clientWidth),document.body.removeChild(r),e=n-a}catch(e){}return e||17}();var e=jQuery(document.createDocumentFragment()).append('<div id="ui-overlay" class="ui-close"></div><div id="ui-dialog" tabindex="0" role="dialog" aria-labelledby="ui-dialog-title"><div id="ui-dialog-titlebar"><h1 id="ui-dialog-title"></h1>'+('<button id="ui-dialog-close" class="ui-close" tabindex="0" aria-label="'+strings.close+'"></button>')+'</div><div id="ui-dialog-body"></div></div>');u=jQuery(e.find("#ui-overlay").get(0)),c=jQuery(e.find("#ui-dialog").get(0)),d=jQuery(e.find("#ui-dialog-title").get(0)),h=jQuery(e.find("#ui-dialog-body").get(0)),e.insertBefore("#store-area")}function t(e){return c.hasClass("open")&&(e?e.splitOrEmpty(/\s+/).every(function(e){return h.hasClass(e)}):!0)}function r(){return h.get(0)}function n(e,t){return h.empty().removeClass(),null!=t&&h.addClass(t),d.empty().append((null!=e?String(e):"")||" "),h.get(0)}function a(e,t,r,n,a){return jQuery(e).ariaClick(function(e){e.preventDefault(),"function"==typeof r&&r(e),i(t,a),"function"==typeof n&&n(e)})}function i(e,r){var n=jQuery.extend({top:50},e),a=n.top;t()||(p=safeActiveElement()),jQuery(document.documentElement).addClass("ui-dialog-open"),u.addClass("open"),null!==h[0].querySelector("img")&&h.imagesLoaded().always(function(){return s({data:{top:a}})}),jQuery("body>:not(script,#store-area,#ui-bar,#ui-overlay,#ui-dialog)").attr("tabindex",-3).attr("aria-hidden",!0),jQuery("#ui-bar,#story").find("[tabindex]:not([tabindex^=-])").attr("tabindex",-2).attr("aria-hidden",!0);var i=l(a);c.css(i).addClass("open").focus(),jQuery(window).on("resize.ui-resize",null,{top:a},jQuery.throttle(40,s)),jQuery(document).on("click.ui-close",".ui-close",{closeFn:r},o).on("keypress.ui-close",".ui-close",function(e){13!==e.which&&32!==e.which||jQuery(this).trigger("click")}),setTimeout(function(){return jQuery.event.trigger("tw:dialogopened")},Engine.minDomActionDelay)}function o(e){jQuery(document).off(".ui-close"),jQuery(window).off("resize.ui-resize"),c.removeClass("open").css({left:"",right:"",top:"",bottom:""}),jQuery("#ui-bar,#story").find("[tabindex=-2]").removeAttr("aria-hidden").attr("tabindex",0),jQuery("body>[tabindex=-3]").removeAttr("aria-hidden").removeAttr("tabindex"),d.empty(),h.empty().removeClass(),u.removeClass("open"),jQuery(document.documentElement).removeClass("ui-dialog-open"),null!==p&&(jQuery(p).focus(),p=null),e&&e.data&&"function"==typeof e.data.closeFn&&e.data.closeFn(e),setTimeout(function(){return jQuery.event.trigger("tw:dialogclosed")},Engine.minDomActionDelay)}function s(e){var t=e&&e.data&&"undefined"!=typeof e.data.top?e.data.top:50;"block"===c.css("display")&&(c.css({display:"none"}),c.css(jQuery.extend({display:""},l(t))))}function l(e){var t=null!=e?e:50,r=jQuery(window),n={left:"",right:"",top:"",bottom:""};c.css(n);var a=r.width()-c.outerWidth(!0)-1,i=r.height()-c.outerHeight(!0)-1;return 32+f>=a&&(i-=f),32+f>=i&&(a-=f),32>=a?n.left=n.right=16:n.left=n.right=~~(a/2),32>=i?n.top=n.bottom=16:i/2>t?n.top=t:n.top=n.bottom=~~(i/2),Object.keys(n).forEach(function(e){""!==n[e]&&(n[e]+="px")}),n}var u=null,c=null,d=null,h=null,p=null,f=0;return Object.freeze(Object.defineProperties({},{init:{value:e},isOpen:{value:t},body:{value:r},setup:{value:n},addClickHandler:{value:a},open:{value:i},close:{value:o},resize:{value:function(){return s()}}}))}(),Engine=function(){function e(){if(Story.has("StoryInit"))try{var e=Wikifier.wikifyEval(Story.get("StoryInit").text);if(Config.debug){var t=new DebugView(document.createDocumentFragment(),"special","StoryInit","StoryInit");t.modes({hidden:!0}),t.append(e),f=t.output}}catch(e){Alert.error("StoryInit",e.message)}if(Config.history.maxStates=Math.max(0,Config.history.maxStates),!isNaN(Config.history.maxStates)&&isFinite(Config.history.maxStates)||(Config.history.maxStates=100),1===Config.history.maxStates&&(Config.history.controls=!1),Config.debug&&DebugView.init(),null==Config.passages.start)throw new Error("starting passage not selected");if(!Story.has(Config.passages.start))throw new Error('starting passage ("'+Config.passages.start+'") not found');if(State.restore())l();else{var r=!0;switch(_typeof(Config.saves.autoload)){case"boolean":Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(r=!Save.autosave.load());break;case"string":"prompt"===Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(r=!1,UI.buildDialogAutoload(),UI.open());break;case"function":Save.autosave.ok()&&Save.autosave.has()&&Config.saves.autoload()&&(r=!Save.autosave.load())}r&&u(Config.passages.start)}}function t(){jQuery(document.documentElement).addClass("init-loading"),window.scroll(0,0),State.reset(),window.location.reload()}function r(){return h}function n(){return p}function a(e){var t=State.goTo(e);return t&&l(),t}function i(e){var t=State.go(e);return t&&l(),t}function o(){return i(-1)}function s(){return i(1)}function l(){return u(State.passage,!0)}function u(e,t){h="playing",TempState={},TempVariables={},window.SugarCube.TempVariables=TempVariables;var r=void 0,n=void 0,a=Story.get(e);if(Object.keys(prehistory).forEach(function(e){"function"==typeof prehistory[e]&&prehistory[e].call(this,e)},a),t||State.create(a.title),document.body.className&&(document.body.className=""),Object.keys(predisplay).forEach(function(e){"function"==typeof predisplay[e]&&predisplay[e].call(this,e)},a),Story.has("PassageReady"))try{r=Wikifier.wikifyEval(Story.get("PassageReady").text)}catch(e){Alert.error("PassageReady",e.message)}h="rendering";var i=jQuery(a.render()),o=document.getElementById("passages");if(o.hasChildNodes()&&("number"==typeof Config.passages.transitionOut||"string"==typeof Config.passages.transitionOut&&""!==Config.passages.transitionOut&&""!==Config.transitionEndEventName?[].concat(_toConsumableArray(o.childNodes)).forEach(function(e){var t=jQuery(e);if(e.nodeType===Node.ELEMENT_NODE&&t.hasClass("passage")){if(t.hasClass("passage-out"))return;t.attr("id","out-"+t.attr("id")).addClass("passage-out"),"string"==typeof Config.passages.transitionOut?t.on(Config.transitionEndEventName,function(e){e.originalEvent.propertyName===Config.passages.transitionOut&&t.remove()}):setTimeout(function(){return t.remove()},Math.max(d,Config.passages.transitionOut))}else t.remove()}):jQuery(o).empty()),i.addClass("passage-in").appendTo(o),setTimeout(function(){return i.removeClass("passage-in")},d),document.title=Config.passages.displayTitles&&a.title!==Config.passages.start?a.title+" | "+Story.title:Story.title,window.scroll(0,0),h="playing",Story.has("PassageDone"))try{n=Wikifier.wikifyEval(Story.get("PassageDone").text)}catch(e){Alert.error("PassageDone",e.message)}if(Object.keys(postdisplay).forEach(function(e){"function"==typeof postdisplay[e]&&postdisplay[e].call(this,e)},a),Config.ui.updateStoryElements&&UI.setStoryElements(),Config.debug){var s=void 0;null!=r&&(s=new DebugView(document.createDocumentFragment(),"special","PassageReady","PassageReady"),s.modes({hidden:!0}),s.append(r),i.prepend(s.output)),null!=n&&(s=new DebugView(document.createDocumentFragment(),"special","PassageDone","PassageDone"),s.modes({hidden:!0}),s.append(n),i.append(s.output)),1===State.turns&&null!=f&&i.prepend(f)}switch(p=Date.now(),UI.hideOutlines(),jQuery("#story").find("a[href]:not(.link-external)").addClass("link-external").end().find("a,link,button,input,select,textarea").not("[tabindex]").attr("tabindex",0),_typeof(Config.saves.autosave)){case"boolean":Config.saves.autosave&&Save.autosave.save();break;case"string":a.tags.includes(Config.saves.autosave)&&Save.autosave.save();break;case"object":Array.isArray(Config.saves.autosave)&&a.tags.some(function(e){return Config.saves.autosave.includes(e)})&&Save.autosave.save()}return h="idle",i[0]}function c(e,t,r){var n=!1;switch(r){case undefined:break;case"replace":case"back":n=!0;break;default:throw new Error("Engine.display option parameter called with"+(' obsolete value "'+r+'"; please notify the developer'))}u(e,n)}var d=40,h="idle",p=null,f=null;return Object.freeze(Object.defineProperties({},{minDomActionDelay:{value:d},start:{value:e},restart:{value:t},state:{get:r},lastPlay:{get:n},goTo:{value:a},go:{value:i},backward:{value:o},forward:{value:s},show:{value:l},play:{value:u},display:{value:c}}))}(),Passage=function(){var e=void 0;e=/^(?:debug|nobr|passage|widget|twine\..*)$/i;var t=function(){function t(r,n){var a=this;_classCallCheck(this,t),Object.defineProperties(this,{title:{value:Util.unescape(r)},element:{value:n||null},tags:{value:Object.freeze(n&&n.hasAttribute("tags")?n.getAttribute("tags").trim().splitOrEmpty(/\s+/).sort().filter(function(e,t,r){return 0===t||r[t-1]!==e}):[])},_excerpt:{writable:!0,value:null}}),Object.defineProperties(this,{domId:{value:"passage-"+Util.slugify(this.title)},classes:{value:Object.freeze(0===this.tags.length?[]:function(){return a.tags.filter(function(t){return!e.test(t)}).map(function(e){return Util.slugify(e)})}())}})}return _createClass(t,[{key:"description",value:function(){var e=Config.passages.descriptions;if(null!=e)switch("undefined"==typeof e?"undefined":_typeof(e)){case"boolean":if(e)return this.title;break;case"object":if(e instanceof Map&&e.has(this.title))return e.get(this.title);if(e.hasOwnProperty(this.title))return e[this.title];break;case"function":var r=e.call(this);if(r)return r;break;default:throw new TypeError("Config.passages.descriptions must be a boolean, object, or function")}return null===this._excerpt&&(this._excerpt=t.getExcerptFromText(this.text)),this._excerpt}},{key:"processText",value:function(){var e=this.text;return this.tags.includes("nobr")&&(e=e.replace(/^\n+|\n+$/g,"").replace(/\n+/g," ")),this.tags.includes("Twine.image")&&(e="[img["+e+"]]"),e}},{key:"render",value:function(){var e=this,r=document.createElement("div");return jQuery(r).attr({id:this.domId,"data-passage":this.title,"data-tags":this.tags.join(" ")}).addClass("passage "+this.className),jQuery(document.body).addClass(this.className),Object.keys(prerender).forEach(function(t){"function"==typeof prerender[t]&&prerender[t].call(e,r,t)}),Story.has("PassageHeader")&&new Wikifier(r,Story.get("PassageHeader").processText()),new Wikifier(r,this.processText()),Story.has("PassageFooter")&&new Wikifier(r,Story.get("PassageFooter").processText()),Config.cleanupWikifierOutput&&convertBreaks(r),Object.keys(postrender).forEach(function(t){"function"==typeof postrender[t]&&postrender[t].call(e,r,t)}),this._excerpt=t.getExcerptFromNode(r),r}},{key:"className",get:function(){return this.classes.join(" ")}},{key:"text",get:function(){return null==this.element?('<span class="error" title="%passage%">'+(strings.errors.title+": "+strings.errors.nonexistentPassage)+"</span>").replace(/%passage%/g,Util.escape(this.title)):this.element.textContent.replace(/\r/g,"")}}],[{key:"getExcerptFromNode",value:function(e,t){if(!e.hasChildNodes())return"";var r=e.textContent.trim();if(""!==r){var n=new RegExp("(\\S+(?:\\s+\\S+){0,"+(t>0?t-1:7)+"})");r=r.replace(/\s+/g," ").match(n)}return r?r[1]+"…":"…"}},{key:"getExcerptFromText",value:function(e,t){if(""===e)return"";var r=new RegExp("(\\S+(?:\\s+\\S+){0,"+(t>0?t-1:7)+"})"),n=e.replace(/<<.*?>>/g," ").replace(/<.*?>/g," ").trim().replace(/^\s*\|.*\|.*?$/gm,"").replace(/\[[<>]?img\[[^\]]*\]\]/g,"").replace(/\[\[([^|\]]*)(?:|[^\]]*)?\]\]/g,"$1").replace(/^\s*!+(.*?)$/gm,"$1").replace(/\'{2}|\/{2}|_{2}|@{2}/g,"").trim().replace(/\s+/g," ").match(r);return n?n[1]+"…":"…"}}]),t}();return t}(),Save=function(){function e(){if("cookie"===storage.name)return n(),Config.saves.autosave=undefined,Config.saves.slots=0,!1;Config.saves.slots=Math.max(0,Config.saves.slots),!isNaN(Config.saves.slots)&&isFinite(Config.saves.slots)||(Config.saves.slots=8);var e=r(),t=!1;Array.isArray(e)&&(e={autosave:null,slots:e},t=!0),Config.saves.slots!==e.slots.length&&(Config.saves.slots<e.slots.length?(e.slots.reverse(),e.slots=e.slots.filter(function(e){return null===e&&this.count>0?(--this.count,!1):!0},{count:e.slots.length-Config.saves.slots}),e.slots.reverse()):Config.saves.slots>e.slots.length&&S(e.slots,Config.saves.slots-e.slots.length),t=!0),j(e.autosave)&&(t=!0);for(var a=0;a<e.slots.length;++a)j(e.slots[a])&&(t=!0);return x(e)&&(storage.delete("saves"),t=!1),t&&E(e),T=e.slots.length-1,!0}function t(){return{autosave:null,slots:S([],Config.saves.slots)}}function r(){var e=storage.get("saves");return null===e?t():e}function n(){return storage.delete("saves"),!0}function a(){return i()||d()}function i(){return"cookie"!==storage.name&&"undefined"!=typeof Config.saves.autosave}function o(){var e=r();return null!==e.autosave}function s(){var e=r();return e.autosave}function l(){var e=r();return null===e.autosave?!1:O(e.autosave)}function u(e,t){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return!1;var n=r();return n.autosave=C(),n.autosave.title=e||Story.get(State.passage).description(),n.autosave.date=Date.now(),null!=t&&(n.autosave.metadata=t),E(n)}function c(){var e=r();return e.autosave=null,E(e)}function d(){return"cookie"!==storage.name&&-1!==T}function h(){return T+1}function p(){if(!d())return 0;for(var e=r(),t=0,n=0,a=e.slots.length;a>n;++n)null!==e.slots[n]&&++t;return t}function f(){return 0===p()}function g(e){if(0>e||e>T)return!1;var t=r();return!(e>=t.slots.length||null===t.slots[e])}function m(e){if(0>e||e>T)return null;var t=r();return e>=t.slots.length?null:t.slots[e]}function v(e){if(0>e||e>T)return!1;var t=r();return e>=t.slots.length||null===t.slots[e]?!1:O(t.slots[e])}function y(e,t,n){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return UI.alert(strings.saves.disallowed),!1;if(0>e||e>T)return!1;var a=r();return e>=a.slots.length?!1:(a.slots[e]=C(),a.slots[e].title=t||Story.get(State.passage).description(),a.slots[e].date=Date.now(),null!=n&&(a.slots[e].metadata=n),E(a))}function b(e){if(0>e||e>T)return!1;var t=r();return e>=t.slots.length?!1:(t.slots[e]=null,E(t))}function w(e){function t(){var e=new Date,t=e.getMonth()+1,r=e.getDate(),n=e.getHours(),a=e.getMinutes(),i=e.getSeconds();return 10>t&&(t="0"+t),10>r&&(r="0"+r),10>n&&(n="0"+n),10>a&&(a="0"+a),10>i&&(i="0"+i),""+e.getFullYear()+t+r+"-"+n+a+i}if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return void UI.alert(strings.saves.disallowed);var r=""+(null==e?Story.domId:Util.slugify(e))+("-"+t()+".save"),n=LZString.compressToBase64(JSON.stringify(C()));saveAs(new Blob([n],{type:"text/plain;charset=UTF-8"}),r)}function k(e){var t=e.target.files[0],r=new FileReader;jQuery(r).on("load",function(e){if(e.target.result){var r=void 0;try{r=JSON.parse(/\.json$/i.test(t.name)||/^\{/.test(e.target.result)?e.target.result:LZString.decompressFromBase64(e.target.result))}catch(e){}O(r)}}),r.readAsText(t)}function S(e,t){for(var r=0;t>r;++r)e.push(null);return e}function x(e){for(var t=e.slots,r=!0,n=0,a=t.length;a>n;++n)if(null!==t[n]){r=!1;break}return null===e.autosave&&r}function E(e){return x(e)?(storage.delete("saves"),!0):storage.set("saves",e)}function j(e){if(null===e)return!1;var t=!1;return e.hasOwnProperty("state")&&e.state.hasOwnProperty("delta")&&e.state.hasOwnProperty("index")||(e.hasOwnProperty("data")?(delete e.mode,e.state={delta:State.deltaEncode(e.data)},delete e.data):e.state.hasOwnProperty("delta")?e.state.hasOwnProperty("index")||delete e.state.mode:(delete e.state.mode,e.state.delta=State.deltaEncode(e.state.history),delete e.state.history),e.state.index=e.state.delta.length-1,t=!0),e.state.hasOwnProperty("rseed")&&(e.state.seed=e.state.rseed,delete e.state.rseed,e.state.delta.forEach(function(e,t,r){r[t].hasOwnProperty("rcount")&&(r[t].pull=r[t].rcount,delete r[t].rcount)}),t=!0),(e.state.hasOwnProperty("expired")&&"number"==typeof e.state.expired||e.state.hasOwnProperty("unique")||e.state.hasOwnProperty("last"))&&(e.state.hasOwnProperty("expired")&&"number"==typeof e.state.expired&&delete e.state.expired,(e.state.hasOwnProperty("unique")||e.state.hasOwnProperty("last"))&&(e.state.expired=[],e.state.hasOwnProperty("unique")&&(e.state.expired.push(e.state.unique),delete e.state.unique),e.state.hasOwnProperty("last")&&(e.state.expired.push(e.state.last),delete e.state.last)),t=!0),t}function C(){var e={id:Config.saves.id,state:State.marshalForSave()};return Config.saves.version&&(e.version=Config.saves.version),"function"==typeof Config.saves.onSave&&Config.saves.onSave(e),e.state.delta=State.deltaEncode(e.state.history),delete e.state.history,e}function O(e){try{if(j(e),!e||!e.hasOwnProperty("id")||!e.hasOwnProperty("state"))throw new Error(strings.errors.saveMissingData);if(e.state.history=State.deltaDecode(e.state.delta),delete e.state.delta,"function"==typeof Config.saves.onLoad&&Config.saves.onLoad(e),e.id!==Config.saves.id)throw new Error(strings.errors.saveIdMismatch.replace(/%identity%/g,strings.identity));State.unmarshalForSave(e.state),Engine.show()}catch(e){return UI.alert(e.message[0].toUpperCase()+e.message.slice(1)+".</p><p>"+strings.aborting+"."),!1}return!0}var T=-1;return Object.freeze(Object.defineProperties({},{init:{value:e},get:{value:r},clear:{value:n},ok:{value:a},autosave:{value:Object.freeze(Object.defineProperties({},{ok:{value:i},has:{value:o},get:{value:s},load:{value:l},save:{value:u},delete:{value:c}}))},slots:{value:Object.freeze(Object.defineProperties({},{ok:{value:d},length:{get:h},isEmpty:{value:f},count:{value:p},has:{value:g},get:{value:m},load:{value:v},save:{value:y},delete:{value:b}}))},export:{value:w},import:{value:k}}))}(),Setting=function(){function e(){if(storage.has("options")){var e=storage.get("options");null!==e&&(window.SugarCube.settings=settings=Object.assign(t(),e)),r(),storage.delete("options")}n(),f.forEach(function(e){if(e.hasOwnProperty("onInit")){var t={name:e.name,value:settings[e.name],default:e.default};e.hasOwnProperty("list")&&(t.list=e.list),e.onInit.call(t)}})}function t(){return Object.create(null)}function r(){var e=t();return Object.keys(settings).length>0&&f.forEach(function(t){settings[t.name]!==t.default&&(e[t.name]=settings[t.name])}),0===Object.keys(e).length?(storage.delete("settings"),!0):storage.set("settings",e)}function n(){var e=t(),r=storage.get("settings")||t();f.forEach(function(t){return e[t.name]=t.default}),window.SugarCube.settings=settings=Object.assign(e,r)}function a(){return window.SugarCube.settings=settings=t(),storage.delete("settings"),!0}function i(e){if(0===arguments.length)a(),n();else{if(null==e||!d(e))throw new Error('nonexistent setting "'+e+'"');settings[e]=h(e).default}return r()}function o(e,t){f.forEach(e,t)}function s(e,t,r){if(arguments.length<3){var n=[];throw arguments.length<1&&n.push("type"),arguments.length<2&&n.push("name"),arguments.length<3&&n.push("definition"),new Error("missing parameters, no "+n.join(" or ")+" specified")}if("object"!==("undefined"==typeof r?"undefined":_typeof(r)))throw new TypeError("definition parameter must be an object");if(d(t))throw new Error('cannot clobber existing setting "'+t+'"');var a={type:e,name:t,label:null==r.label?"":String(r.label).trim()};switch(e){case g.Toggle:a.default=!!r.default;break;case g.List:if(!r.hasOwnProperty("list"))throw new Error("no list specified");if(!Array.isArray(r.list))throw new TypeError("list must be an array");if(0===r.list.length)throw new Error("list must not be empty");if(a.list=Object.freeze(r.list),null==r.default)a.default=r.list[0];else{var i=r.list.indexOf(r.default);if(-1===i)throw new Error("list does not contain default");a.default=r.list[i]}break;default:throw new Error("unknown Setting type: "+e)}"function"==typeof r.onInit&&(a.onInit=Object.freeze(r.onInit)),"function"==typeof r.onChange&&(a.onChange=Object.freeze(r.onChange)),f.push(Object.freeze(a))}function l(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];s.apply(undefined,[g.Toggle].concat(t))}function u(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];s.apply(undefined,[g.List].concat(t))}function c(){return 0===f.length}function d(e){return f.some(function(t){return t.name===e})}function h(e){return f.find(function(t){return t.name===e})}function p(e){d(e)&&delete settings[e];for(var t=0;t<f.length;++t)if(f[t].name===e){f.splice(t,1),p(e);break}}var f=[],g=Object.freeze({Toggle:0,List:1});return Object.freeze(Object.defineProperties({},{Types:{value:g},init:{value:e},create:{value:t},save:{value:r},load:{value:n},clear:{value:a},reset:{value:i},forEach:{value:o},add:{value:s},addToggle:{value:l},addList:{value:u},isEmpty:{value:c},has:{value:d},get:{value:h},delete:{value:p}}))}(),State=function(){function e(){session.delete("state"),M=[],D=c(),Q=-1,I=[],N=null===N?null:new PRNGWrapper(N.seed,!1)}function t(){if(session.has("state")){var e=session.get("state");return null==e?!1:(n(e),!0)}return!1}function r(e){var t={index:Q};return e?t.history=clone(M):t.delta=T(M),I.length>0&&(t.expired=[].concat(_toConsumableArray(I))),null!==N&&(t.seed=N.seed),t}function n(e,t){if(null==e)throw new Error("state object is null or undefined");if(!e.hasOwnProperty(t?"history":"delta")||0===e[t?"history":"delta"].length)throw new Error("state object has no history or history is empty");if(!e.hasOwnProperty("index"))throw new Error("state object has no index");if(null!==N&&!e.hasOwnProperty("seed"))throw new Error("state object has no seed, but PRNG is enabled");if(null===N&&e.hasOwnProperty("seed"))throw new Error("state object has seed, but PRNG is disabled");M=t?clone(e.history):A(e.delta),Q=e.index,
I=e.hasOwnProperty("expired")?[].concat(_toConsumableArray(e.expired)):[],e.hasOwnProperty("seed")&&(N.seed=e.seed),g(Q)}function a(){return r(!0)}function i(e){return n(e,!0)}function o(){return I}function s(){return I.length+v()}function l(){return I.concat(M.slice(0,v()).map(function(e){return e.title}))}function u(e){return null==e||""===e?!1:I.includes(e)?!0:!!M.slice(0,v()).some(function(t){return t.title===e})}function c(e,t){return{title:null==e?"":String(e),variables:null==t?{}:clone(t)}}function d(){return D}function h(){return Q}function p(){return D.title}function f(){return D.variables}function g(e){if(null==e)throw new Error("moment activation attempted with null or undefined");switch("undefined"==typeof e?"undefined":_typeof(e)){case"object":D=clone(e);break;case"number":if(b())throw new Error("moment activation attempted with index on empty history");if(0>e||e>=y())throw new RangeError("moment activation attempted with out-of-bounds index;"+(" need [0, "+(y()-1)+"], got "+e));D=clone(M[e]);break;default:throw new TypeError('moment activation attempted with a "'+("undefined"==typeof e?"undefined":_typeof(e))+'"; must be an object or valid history stack index')}return null!==N&&(N=PRNGWrapper.unmarshal({seed:N.seed,pull:D.pull})),session.set("state",r()),jQuery.event.trigger("tw:historyupdate"),D}function m(){return M}function v(){return Q+1}function y(){return M.length}function b(){return 0===M.length}function w(){return M.length>0?M[M.length-1]:null}function k(){return M.length>0?M[0]:null}function S(e){return b()||0>e||e>Q?null:M[e]}function x(e){if(b())return null;var t=1+(e?Math.abs(e):0);return t>v()?null:M[v()-t]}function E(e){if(b()||null==e||""===e)return!1;for(var t=Q;t>=0;--t)if(M[t].title===e)return!0;return!1}function j(e){if(v()<y()&&M.splice(v(),y()-v()),M.push(c(e,D.variables)),N&&(w().pull=N.pull),Config.history.maxStates>0)for(;y()>Config.history.maxStates;)I.push(M.shift().title);return Q=y()-1,g(Q),v()}function C(e){return null==e||0>e||e>=y()||e===Q?!1:(Q=e,g(Q),!0)}function O(e){return null==e||0===e?!1:C(Q+e)}function T(e){if(!Array.isArray(e))return null;if(0===e.length)return[];for(var t=[clone(e[0])],r=1,n=e.length;n>r;++r)t.push(Util.diff(e[r-1],e[r]));return t}function A(e){if(!Array.isArray(e))return null;if(0===e.length)return[];for(var t=[clone(e[0])],r=1,n=e.length;n>r;++r)t.push(Util.patch(t[r-1],e[r]));return t}function P(e,t){if(!b()){var r=void 0;throw r="the Story JavaScript",new Error("State.initPRNG must be called during initialization,"+(" within either "+r+" or the StoryInit special passage"))}N=new PRNGWrapper(e,t),D.pull=N.pull}function _(){return N?N.random():Math.random()}var M=[],D=c(),Q=-1,I=[],N=null;return Object.freeze(Object.defineProperties({},{reset:{value:e},restore:{value:t},marshalForSave:{value:a},unmarshalForSave:{value:i},expired:{get:o},turns:{get:s},passages:{get:l},hasPlayed:{value:u},active:{get:d},activeIndex:{get:h},passage:{get:p},variables:{get:f},history:{get:m},length:{get:v},size:{get:y},isEmpty:{value:b},top:{value:w},bottom:{value:k},index:{value:S},peek:{value:x},has:{value:E},create:{value:j},goTo:{value:C},go:{value:O},deltaEncode:{value:T},deltaDecode:{value:A},initPRNG:{value:P},random:{value:_},restart:{value:function(){return Engine.restart()}},backward:{value:function(){return Engine.backward()}},forward:{value:function(){return Engine.forward()}},display:{value:function(){return Engine.display.apply(Engine,arguments)}},show:{value:function(){return Engine.show.apply(Engine,arguments)}},play:{value:function(){return Engine.play.apply(Engine,arguments)}}}))}(),Story=function(){function e(){!function(){var e=jQuery("#store-area>tw-storydata"),t=e.attr("startnode")||"";Config.passages.start=null,Config.debug=/\bdebug\b/.test(e.attr("options")),e.children("style").each(function(e){c.push(new Passage("tw-user-style-"+e,this))}),e.children("script").each(function(e){d.push(new Passage("tw-user-script-"+e,this))}),e.children('tw-passagedata:not([tags~="Twine.private"],[tags~="annotation"])').each(function(){var e=jQuery(this),r=e.attr("pid")||"",n=new Passage(e.attr("name"),this);r===t&&""!==t&&(Config.passages.start=n.title),n.tags.includes("widget")?h.push(n):u[n.title]=n}),f=e.attr("ifid"),r(Util.unescape("Bad End Simulator")),Config.saves.id=Story.domId}()}function t(){for(var e=0;e<c.length;++e)addStyle(c[e].text);for(var t=0;t<d.length;++t)try{Scripting.evalJavaScript(d[t].text)}catch(e){Alert.error(d[t].title,e.message)}for(var r=0;r<h.length;++r)try{Wikifier.wikifyEval(h[r].processText())}catch(e){Alert.error(h[r].title,e.message)}}function r(e){if(null==e||""===e)throw new Error("story title cannot be null or empty");document.title=p=Util.unescape(e),g=Util.slugify(p)}function n(){return p}function a(){return g}function i(){return f}function o(e){var t="undefined"==typeof e?"undefined":_typeof(e);switch(t){case"number":case"string":var r=String(e);return u.hasOwnProperty(r);case"boolean":case"function":t="a "+t;break;case"undefined":break;default:t=null===e?"null":"an "+t}throw new TypeError("Story.has title parameter cannot be "+t)}function s(e){var t="undefined"==typeof e?"undefined":_typeof(e);switch(t){case"number":case"string":var r=String(e);return u.hasOwnProperty(r)?u[r]:new Passage(r||"(unknown)");case"boolean":case"function":t="a "+t;break;case"undefined":break;default:t=null===e?"null":"an "+t}throw new TypeError("Story.get title parameter cannot be "+t)}function l(e,t){for(var r=arguments.length<=2||arguments[2]===undefined?"title":arguments[2],n=Object.keys(u),a=[],i=0;i<n.length;++i){var o=u[n[i]];if(o.hasOwnProperty(e))switch(_typeof(o[e])){case"undefined":break;case"object":for(var s=0,l=o[e].length;l>s;++s)if(o[e][s]==t){a.push(o);break}break;default:o[e]==t&&a.push(o)}}return a.sort(function(e,t){return e[r]==t[r]?0:e[r]<t[r]?-1:1}),a}var u={},c=[],d=[],h=[],p="",f="",g="";return Object.freeze(Object.defineProperties({},{passages:{value:u},styles:{value:c},scripts:{value:d},widgets:{value:h},load:{value:e},init:{value:t},title:{get:n},domId:{get:a},ifId:{get:i},has:{value:o},get:{value:s},lookup:{value:l}}))}(),strings=Object.seal({identity:"game",aborting:"Aborting",cancel:"Cancel",close:"Close",ok:"OK",errors:{title:"Error",nonexistentPassage:'the passage "%passage%" does not exist',saveMissingData:"save is missing required data. Either you've loaded a file which is not a save or the save has become corrupted",saveIdMismatch:"save is from the wrong %identity%"},warnings:{degraded:"Apologies! Your browser either lacks some of the capabilities required by this %identity% or has disabled them, so this %identity% is running in a degraded mode. You may be able to continue, but some parts may not work properly.\n\nThe former may, probably, be solved by upgrading your browser. The latter may be solved by loosening its security restrictions"+("file:"===window.location.protocol?" or, perhaps, by viewing this %identity% via the HTTP protocol.":".")},debugView:{title:"Debug View",toggle:"Toggle the debug view"},uiBar:{toggle:"Toggle the UI bar",backward:"Go backward within the %identity% history",forward:"Go forward within the %identity% history",jumpto:"Jump to a specific point within the %identity% history"},jumpto:{title:"Jump To",turn:"Turn",unavailable:"No jump points currently available…"},saves:{title:"Saves",disallowed:"Saving has been disallowed on this passage.",emptySlot:"— slot empty —",incapable:'Apologies! Your browser either lacks the capabilities required to support saves or has disabled them, so saves have been disabled for this session.<br><br>The former may, probably, be solved by <a href="http://browsehappy.com/" target="_blank">upgrading your browser</a>. The latter may be solved by loosening its security restrictions'+("file:"===window.location.protocol?" or, perhaps, by viewing this %identity% via the HTTP protocol.":"."),labelAuto:"Autosave",labelDelete:"Delete",labelExport:"Save to Disk…",labelImport:"Load from Disk…",labelLoad:"Load",labelClear:"Delete All",labelSave:"Save",labelSlot:"Slot",savedOn:"Saved on",unavailable:"No save slots found…",unknownDate:"unknown"},settings:{title:"Settings",off:"Off",on:"On",reset:"Reset to Defaults"},restart:{title:"Restart",prompt:"Are you sure that you want to restart? Unsaved progress will be lost."},share:{title:"Share"},alert:{},autoload:{title:"Autoload",cancel:"Go to start",ok:"Load autosave",prompt:"An autosave exists. Load it now or go to the start?"},macros:{back:{text:"Back"},return:{text:"Return"}}}),UI=function(){function e(){jQuery("#init-no-js,#init-lacking").remove(),y=new StyleWrapper(function(){return jQuery(document.createElement("style")).attr({id:"style-outline-patch",type:"text/css"}).appendTo(document.head).get(0)}()),function(){var e=jQuery(document.createDocumentFragment()),t=strings.uiBar.toggle,r=strings.uiBar.backward.replace(/%identity%/g,strings.identity),n=strings.uiBar.jumpto.replace(/%identity%/g,strings.identity),a=strings.uiBar.forward.replace(/%identity%/g,strings.identity);e.append('<div id="ui-bar"><div id="ui-bar-tray">'+('<button id="ui-bar-toggle" tabindex="0" title="'+t+'" aria-label="'+t+'"></button>')+'<div id="ui-bar-history">'+('<button id="history-backward" tabindex="0" title="'+r+'" aria-label="'+r+'"></button>')+('<button id="history-jumpto" tabindex="0" title="'+n+'" aria-label="'+n+'"></button>')+('<button id="history-forward" tabindex="0" title="'+a+'" aria-label="'+a+'"></button>')+'</div></div><div id="ui-bar-body"><header id="title" role="banner"><div id="story-banner"></div><h1 id="story-title"></h1><div id="story-subtitle"></div><div id="story-title-separator"></div><p id="story-author"></p></header><div id="story-caption"></div><nav id="menu" role="navigation"><ul id="menu-story"></ul><ul id="menu-core">'+('<li id="menu-item-saves"><a tabindex="0">'+strings.saves.title+"</a></li>")+('<li id="menu-item-settings"><a tabindex="0">'+strings.settings.title+"</a></li>")+('<li id="menu-item-restart"><a tabindex="0">'+strings.restart.title+"</a></li>")+('<li id="menu-item-share"><a tabindex="0">'+strings.share.title+"</a></li>")+'</ul></nav></div></div><div id="story" role="main"><div id="passages"></div></div>').insertBefore("#store-area")}(),jQuery(document).on("tw:historyupdate",function(e,t){return function(){e.prop("disabled",State.length<2),t.prop("disabled",State.length===State.size)}}(jQuery("#history-backward"),jQuery("#history-forward"))).on("mousedown.outline-handler keydown.outline-handler",function(e){switch(e.type){case"mousedown":n();break;case"keydown":a()}})}function t(){var e=jQuery("#ui-bar");(Config.ui.stowBarInitially||jQuery(window).width()<=800)&&!function(){var t=jQuery(e).add("#story");t.addClass("no-transition"),e.addClass("stowed"),setTimeout(function(){return t.removeClass("no-transition")},Engine.minDomActionDelay)}(),jQuery("#ui-bar-toggle").ariaClick({label:strings.uiBar.toggle},function(){return e.toggleClass("stowed")}),Config.history.controls?(jQuery("#history-backward").prop("disabled",State.length<2).ariaClick({label:strings.uiBar.backward.replace(/%identity%/g,strings.identity)},function(){return Engine.backward()}),Story.lookup("tags","bookmark").length>0?jQuery("#history-jumpto").ariaClick({label:strings.uiBar.jumpto.replace(/%identity%/g,strings.identity)},function(){return UI.jumpto()}):jQuery("#history-jumpto").remove(),jQuery("#history-forward").prop("disabled",State.length===State.size).ariaClick({label:strings.uiBar.forward.replace(/%identity%/g,strings.identity)},function(){return Engine.forward()})):jQuery("#ui-bar-history").remove(),jQuery("#story-title").text(Story.title),Story.has("StoryCaption")||jQuery("#story-caption").remove(),Story.has("StoryMenu")||jQuery("#menu-story").remove(),Config.ui.updateStoryElements||r(),Dialog.addClickHandler("#menu-item-saves a",null,g).text(strings.saves.title),Setting.isEmpty()?jQuery("#menu-item-settings").remove():Dialog.addClickHandler("#menu-item-settings a",null,m).text(strings.settings.title),Dialog.addClickHandler("#menu-item-restart a",null,f).text(strings.restart.title),Story.has("StoryShare")?Dialog.addClickHandler("#menu-item-share a",null,v).text(strings.share.title):jQuery("#menu-item-share").remove(),jQuery(document.documentElement).focus()}function r(){setPageElement("story-banner","StoryBanner"),setPageElement("story-subtitle","StorySubtitle"),setPageElement("story-author","StoryAuthor"),setPageElement("story-caption","StoryCaption");var e=document.getElementById("menu-story");null!==e&&(jQuery(e).empty(),Story.has("StoryMenu")&&i("StoryMenu",e))}function n(){y.set("*:focus{outline:none}")}function a(){y.clear()}function i(e,t){var r=t,n=Config.debug;Config.debug=!1,null==r&&(r=document.createElement("ul"));var a=document.createDocumentFragment();if(new Wikifier(a,Story.get(e).processText().trim()),a.hasChildNodes())for(var i=null;a.hasChildNodes();){var o=a.firstChild;o.nodeType!==Node.ELEMENT_NODE||"A"!==o.nodeName.toUpperCase()?(a.removeChild(o),null!==i&&(i=null)):(null===i&&(i=document.createElement("li"),r.appendChild(i)),i.appendChild(o))}return Config.debug=n,r}function o(e){jQuery(Dialog.setup("Alert","alert")).append("<p>"+e+'</p><ul class="buttons">'+('<li><button id="alert-ok" class="ui-close">'+(strings.alert.ok||strings.ok)+"</button></li>")+"</ul>");for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;t>n;n++)r[n-1]=arguments[n];Dialog.open.apply(Dialog,r)}function s(){p(),Dialog.open.apply(Dialog,arguments)}function l(){f(),Dialog.open.apply(Dialog,arguments)}function u(){g(),Dialog.open.apply(Dialog,arguments)}function c(){m(),Dialog.open.apply(Dialog,arguments)}function d(){v(),Dialog.open.apply(Dialog,arguments)}function h(){return jQuery(Dialog.setup(strings.autoload.title,"autoload")).append("<p>"+strings.autoload.prompt+'</p><ul class="buttons">'+('<li><button id="autoload-ok" class="ui-close">'+(strings.autoload.ok||strings.ok)+"</button></li>")+('<li><button id="autoload-cancel" class="ui-close">'+(strings.autoload.cancel||strings.cancel)+"</button></li>")+"</ul>"),jQuery(document).one("click.autoload",".ui-close",function(e){var t="autoload-ok"===e.target.id;jQuery(document).one("tw:dialogclosed",function(){t&&Save.autosave.load()||Engine.play(Config.passages.start)})}),!0}function p(){var e=document.createElement("ul");jQuery(Dialog.setup(strings.jumpto.title,"jumpto list")).append(e);for(var t=State.expired.length,r=State.size-1;r>=0;--r)if(r!==State.activeIndex){var n=Story.get(State.history[r].title);n&&n.tags.includes("bookmark")&&jQuery(document.createElement("li")).append(jQuery(document.createElement("a")).ariaClick({one:!0},function(e){return function(){return jQuery(document).one("tw:dialogclosed",function(){return Engine.goTo(e)})}}(r)).addClass("ui-close").text(strings.jumpto.turn+" "+(t+r+1)+": "+n.description())).appendTo(e)}e.hasChildNodes()||jQuery(e).append("<li><a><em>"+strings.jumpto.unavailable+"</em></a></li>")}function f(){return jQuery(Dialog.setup(strings.restart.title,"restart")).append("<p>"+strings.restart.prompt+'</p><ul class="buttons">'+('<li><button id="restart-ok">'+(strings.restart.ok||strings.ok)+"</button></li>")+('<li><button id="restart-cancel" class="ui-close">'+(strings.restart.cancel||strings.cancel)+"</button></li>")+"</ul>").find("#restart-ok").ariaClick({one:!0},function(){jQuery(document).one("tw:dialogclosed",function(){return Engine.restart()}),Dialog.close()}),!0}function g(){function e(e,t,r,n){var a=jQuery(document.createElement("button")).attr("id","saves-"+e).html(r);return t&&a.addClass(t),n?a.ariaClick(n):a.prop("disabled",!0),jQuery(document.createElement("li")).append(a)}function t(){function e(e,t,r,n,a){var i=jQuery(document.createElement("button")).attr("id","saves-"+e+"-"+n).addClass(e).html(r);return t&&i.addClass(t),a?"auto"===n?i.ariaClick({label:r+" "+strings.saves.labelAuto},function(){return a()}):i.ariaClick({label:r+" "+strings.saves.labelSlot+" "+(n+1)},function(){return a(n)}):i.prop("disabled",!0),i}var t=Save.get(),r=jQuery(document.createElement("tbody"));if(Save.autosave.ok()){var n=jQuery(document.createElement("td")),a=jQuery(document.createElement("td")),i=jQuery(document.createElement("td")),o=jQuery(document.createElement("td"));jQuery(document.createElement("b")).attr({title:strings.saves.labelAuto,"aria-label":strings.saves.labelAuto}).text("A").appendTo(n),t.autosave?(a.append(e("load","ui-close",strings.saves.labelLoad,"auto",function(){jQuery(document).one("tw:dialogclosed",function(){return Save.autosave.load()})})),jQuery(document.createElement("div")).text(t.autosave.title).appendTo(i),jQuery(document.createElement("div")).addClass("datestamp").html(t.autosave.date?strings.saves.savedOn+" "+new Date(t.autosave.date).toLocaleString():strings.saves.savedOn+" <em>"+strings.saves.unknownDate+"</em>").appendTo(i),o.append(e("delete",null,strings.saves.labelDelete,"auto",function(){Save.autosave.delete(),g(),Dialog.resize()}))):(a.append(e("load",null,strings.saves.labelLoad,"auto")),jQuery(document.createElement("em")).text(strings.saves.emptySlot).appendTo(i),i.addClass("empty"),o.append(e("delete",null,strings.saves.labelDelete,"auto"))),jQuery(document.createElement("tr")).append(n).append(a).append(i).append(o).appendTo(r)}for(var s=0,l=t.slots.length;l>s;++s){var u=jQuery(document.createElement("td")),c=jQuery(document.createElement("td")),d=jQuery(document.createElement("td")),h=jQuery(document.createElement("td"));u.append(document.createTextNode(s+1)),t.slots[s]?(c.append(e("load","ui-close",strings.saves.labelLoad,s,function(e){jQuery(document).one("tw:dialogclosed",function(){return Save.slots.load(e)})})),jQuery(document.createElement("div")).text(t.slots[s].title).appendTo(d),jQuery(document.createElement("div")).addClass("datestamp").html(t.slots[s].date?strings.saves.savedOn+" "+new Date(t.slots[s].date).toLocaleString():strings.saves.savedOn+" <em>"+strings.saves.unknownDate+"</em>").appendTo(d),h.append(e("delete",null,strings.saves.labelDelete,s,function(e){Save.slots.delete(e),g(),Dialog.resize()}))):(c.append(e("save","ui-close",strings.saves.labelSave,s,Save.slots.save)),jQuery(document.createElement("em")).text(strings.saves.emptySlot).appendTo(d),d.addClass("empty"),h.append(e("delete",null,strings.saves.labelDelete,s))),jQuery(document.createElement("tr")).append(u).append(c).append(d).append(h).appendTo(r)}return jQuery(document.createElement("table")).attr("id","saves-list").append(r)}var r=jQuery(Dialog.setup(strings.saves.title,"saves")),n=Save.ok();if(n&&r.append(t()),n||Has.fileAPI){var a=jQuery(document.createElement("ul")).addClass("buttons").appendTo(r);return Has.fileAPI&&(a.append(e("export","ui-close",strings.saves.labelExport,function(){return Save.export()})),a.append(e("import",null,strings.saves.labelImport,function(){return r.find("#saves-import-file").trigger("click")})),jQuery(document.createElement("input")).css({display:"block",visibility:"hidden",position:"fixed",left:"-9999px",top:"-9999px",width:"1px",height:"1px"}).attr({type:"file",id:"saves-import-file",tabindex:-1,"aria-hidden":!0}).on("change",function(e){jQuery(document).one("tw:dialogclosed",function(){return Save.import(e)}),Dialog.close()}).appendTo(r)),n&&a.append(e("clear",null,strings.saves.labelClear,Save.autosave.has()||!Save.slots.isEmpty()?function(){Save.clear(),g(),Dialog.resize()}:null)),!0}return o(strings.saves.incapable.replace(/%identity%/g,strings.identity)),!1}function m(){var e=jQuery(Dialog.setup(strings.settings.title,"settings"));return Setting.forEach(function(t){var r=t.name,n=Util.slugify(r),a=jQuery(document.createElement("div")),i=jQuery(document.createElement("label")),o=jQuery(document.createElement("div")),s=void 0;switch(a.attr("id","setting-body-"+n).append(i).append(o).appendTo(e),i.attr({id:"setting-label-"+n,for:"setting-control-"+n}).wiki(t.label),null==settings[r]&&(settings[r]=t.default),t.type){case Setting.Types.Toggle:s=jQuery(document.createElement("button")),settings[r]?s.addClass("enabled").text(strings.settings.on):s.text(strings.settings.off),s.ariaClick(function(){settings[r]?(jQuery(this).removeClass("enabled").text(strings.settings.off),settings[r]=!1):(jQuery(this).addClass("enabled").text(strings.settings.on),settings[r]=!0),Setting.save(),t.hasOwnProperty("onChange")&&t.onChange.call({name:r,value:settings[r],default:t.default})});break;case Setting.Types.List:s=jQuery(document.createElement("select"));for(var l=0,u=t.list.length;u>l;++l)jQuery(document.createElement("option")).val(l).text(t.list[l]).appendTo(s);s.val(t.list.indexOf(settings[r])).attr("tabindex",0).on("change",function(){settings[r]=t.list[Number(this.value)],Setting.save(),t.hasOwnProperty("onChange")&&t.onChange.call({name:r,value:settings[r],default:t.default,list:t.list})})}s.attr("id","setting-control-"+n).appendTo(o)}),e.append('<ul class="buttons">'+('<li><button id="settings-ok" class="ui-close">'+(strings.settings.ok||strings.ok)+"</button></li>")+('<li><button id="settings-reset">'+strings.settings.reset+"</button></li>")+"</ul>").find("#settings-reset").ariaClick({one:!0},function(){jQuery(document).one("tw:dialogclosed",function(){Setting.reset(),window.location.reload()}),Dialog.close()}),!0}function v(){return jQuery(Dialog.setup(strings.share.title,"share list")).append(i("StoryShare")),!0}var y=null;return Object.freeze(Object.defineProperties({},{init:{value:e},start:{value:t},setStoryElements:{value:r},hideOutlines:{value:n},showOutlines:{value:a},assembleLinkList:{value:i},alert:{value:o},jumpto:{value:s},restart:{value:l},saves:{value:u},settings:{value:c},share:{value:d},buildAutoload:{value:h},buildJumpto:{value:p},buildRestart:{value:f},buildSaves:{value:g},buildSettings:{value:m},buildShare:{value:v},isOpen:{value:function(){return Dialog.isOpen.apply(Dialog,arguments)}},body:{value:function(){return Dialog.body()}},setup:{value:function(){return Dialog.setup.apply(Dialog,arguments)}},addClickHandler:{value:function(){return Dialog.addClickHandler.apply(Dialog,arguments)}},open:{value:function(){return Dialog.open.apply(Dialog,arguments)}},close:{value:function(){return Dialog.close.apply(Dialog,arguments)}},resize:{value:function(){return Dialog.resize()}},buildDialogAutoload:{value:h},buildDialogJumpto:{value:p},buildDialogRestart:{value:f},buildDialogSaves:{value:g},buildDialogSettings:{value:m},buildDialogShare:{value:v},buildLinkListFromPassage:{value:i}}))}(),version=Object.freeze({title:"SugarCube",major:2,minor:7,patch:0,prerelease:"",build:7201,date:new Date("2016-07-13T16:45:34.655Z"),extensions:{},toString:function(){var e=this.prerelease?"-"+this.prerelease:"";return this.major+"."+this.minor+"."+this.patch+e+"+"+this.build},short:function(){var e=this.prerelease?"-"+this.prerelease:"";return this.title+" (v"+this.major+"."+this.minor+"."+this.patch+e+")"},long:function(){return this.title+" v"+this.toString()+" ("+this.date.toUTCString()+")"}}),TempState={},TempVariables={},macros={},postdisplay={},postrender={},predisplay={},prehistory={},prerender={},session=null,settings={},setup={},storage=null,browser=Browser,config=Config,has=Has,History=State,state=State,tale=Story;window.SugarCube={},jQuery(document).on("readystatechange.SugarCube",function(){var e=jQuery(document.documentElement);"complete"===document.readyState?e.hasClass("init-loading")&&(Config.loadDelay>0?setTimeout(function(){return e.removeClass("init-loading")},Math.max(Engine.minDomActionDelay,Config.loadDelay)):e.removeClass("init-loading")):e.addClass("init-loading")}),jQuery(function(){try{document.normalize&&document.normalize(),Story.load(),storage=new KeyValueStore("webStorage",!0,Story.domId),session=new KeyValueStore("webStorage",!1,Story.domId),session.has("rcWarn")||"cookie"!==storage.name||(session.set("rcWarn",1),window.alert(strings.warnings.degraded.replace(/%identity%/g,strings.identity))),Dialog.init(),UI.init(),Story.init(),Save.init(),Setting.init(),Macro.init(),Engine.start(),UI.start(),window.SugarCube={Browser:Browser,Config:Config,Dialog:Dialog,DebugView:DebugView,Has:Has,Macro:Macro,Passage:Passage,Save:Save,Scripting:Scripting,Setting:Setting,State:State,Story:Story,TempVariables:TempVariables,UI:UI,Util:Util,Wikifier:Wikifier,macros:macros,session:session,settings:settings,setup:setup,storage:storage,version:version}}catch(e){return jQuery(document).off("readystatechange.SugarCube"),Alert.fatal(null,e.message,e)}})}(window,window.document,jQuery);}
	</script>
</body>
</html>
